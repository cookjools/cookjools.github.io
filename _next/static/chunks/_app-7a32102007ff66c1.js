(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2888],{26099:function(t,e,n){"use strict";var r,i,o=n(70655),a=n(44589),s=n(30909),u=n(14594),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),h=new a.LL("app","Firebase",c),l="@firebase/app",f="[DEFAULT]",p=((i={})[l]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/app-check"]="fire-app-check",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),d=new u.Yd("@firebase/app"),g=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=(0,a.p$)(t),this.container=new s.H0(e.name),this._addComponent(new s.wA("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(t){return r._addComponent(t)}))}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){var n;void 0===e&&(e=f),this.checkDestroyed_();var r=this.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=f),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){d.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw h.create("app-deleted",{appName:this.name_})},t}();g.prototype.name&&g.prototype.options||g.prototype.delete||console.log("dc");var v=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"===typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=f);var s=o.name;if("string"!==typeof s||!s)throw h.create("bad-app-name",{appName:String(s)});if((0,a.r3)(e,s))throw h.create("duplicate-app",{appName:s});var u=new t(n,o,r);return e[s]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=p[t])&&void 0!==r?r:t;n&&(i+="-"+n);var a=i.match(/\s|\//),u=e.match(/\s|\//);if(a||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return a&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),a&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void d.warn(c.join(" "))}o(new s.wA(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:u.Ub,onLog:function(t,e){if(null!==t&&"function"!==typeof t)throw h.create("invalid-log-argument");(0,u.Am)(t,e)},apps:null,SDK_VERSION:"8.10.0",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||f,!(0,a.r3)(e,t))throw h.create("no-app",{appName:t});return e[t]}function o(o){var s=o.name;if(n.has(s))return d.debug("There were multiple attempts to register component "+s+"."),"PUBLIC"===o.type?r[s]:null;if(n.set(s,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=i()),"function"!==typeof t[s])throw h.create("invalid-app-argument",{appName:s});return t[s]()};void 0!==o.serviceProps&&(0,a.ZB)(u,o.serviceProps),r[s]=u,t.prototype[s]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,s).apply(this,o.multipleInstances?t:[])}}for(var c=0,l=Object.keys(e);c<l.length;c++){var f=l[c];e[f]._addComponent(o)}return"PUBLIC"===o.type?r[s]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}(g);return e.INTERNAL=(0,o.pi)((0,o.pi)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){(0,a.ZB)(e,t)},createSubscribe:a.ne,ErrorFactory:a.LL,deepExtend:a.ZB}),e}(),m=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null===e||void 0===e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();if((0,a.jU)()&&void 0!==self.firebase){d.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var y=self.firebase.SDK_VERSION;y&&y.indexOf("LITE")>=0&&d.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b=v.initializeApp;v.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,a.UG)()&&d.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),b.apply(void 0,t)};var w=v;!function(t,e){t.INTERNAL.registerComponent(new s.wA("platform-logger",(function(t){return new m(t)}),"PRIVATE")),t.registerVersion(l,"0.6.30",e),t.registerVersion("fire-js","")}(w),e.Z=w},30909:function(t,e,n){"use strict";n.d(e,{H0:function(){return u},wA:function(){return o}});var r=n(70655),i=n(44589),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),a="[DEFAULT]",s=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return t.prototype.get=function(t){var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.BH;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e,n=this.normalizeInstanceIdentifier(null===t||void 0===t?void 0:t.identifier),r=null!==(e=null===t||void 0===t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:a})}catch(f){}try{for(var i=(0,r.XA)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var s=(0,r.CR)(o.value,2),u=s[0],c=s[1],h=this.normalizeInstanceIdentifier(u);try{var l=this.getOrInitializeService({instanceIdentifier:h});c.resolve(l)}catch(f){}}}catch(p){e={error:p}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=a),this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return(0,r.mG)(this,void 0,void 0,(function(){var t;return(0,r.Jh)(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all((0,r.ev)((0,r.ev)([],(0,r.CR)(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))),(0,r.CR)(t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()})))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=a),this.instances.has(t)},t.prototype.getOptions=function(t){return void 0===t&&(t=a),this.instancesOptions.get(t)||{}},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var i=t.options,o=void 0===i?{}:i,a=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(a))throw Error(this.name+"("+a+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var s=this.getOrInitializeService({instanceIdentifier:a,options:o});try{for(var u=(0,r.XA)(this.instancesDeferred.entries()),c=u.next();!c.done;c=u.next()){var h=(0,r.CR)(c.value,2),l=h[0],f=h[1];a===this.normalizeInstanceIdentifier(l)&&f.resolve(s)}}catch(p){e={error:p}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}return s},t.prototype.onInit=function(t,e){var n,r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);var o=this.instances.get(r);return o&&t(o,r),function(){i.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,i,o=this.onInitCallbacks.get(e);if(o)try{for(var a=(0,r.XA)(o),s=a.next();!s.done;s=a.next()){var u=s.value;try{u(t,e)}catch(c){}}}catch(h){n={error:h}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===a?void 0:e),options:i}),this.instances.set(n,o),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(o,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(s){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return void 0===t&&(t=a),this.component?this.component.multipleInstances?t:a:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}();var u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new s(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},14594:function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}var i;n.d(e,{Am:function(){return p},Ub:function(){return f},Yd:function(){return l},in:function(){return o}});var o,a=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(o||(o={}));var s={debug:o.DEBUG,verbose:o.VERBOSE,info:o.INFO,warn:o.WARN,error:o.ERROR,silent:o.SILENT},u=o.INFO,c=((i={})[o.DEBUG]="log",i[o.VERBOSE]="log",i[o.INFO]="info",i[o.WARN]="warn",i[o.ERROR]="error",i),h=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),a=c[e];if(!a)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[a].apply(console,r(["["+o+"]  "+t.name+":"],n))}},l=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=h,this._userLogHandler=null,a.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in o))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"===typeof t?s[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!==typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.DEBUG],t)),this._logHandler.apply(this,r([this,o.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.VERBOSE],t)),this._logHandler.apply(this,r([this,o.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.INFO],t)),this._logHandler.apply(this,r([this,o.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.WARN],t)),this._logHandler.apply(this,r([this,o.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.ERROR],t)),this._logHandler.apply(this,r([this,o.ERROR],t))},t}();function f(t){a.forEach((function(e){e.setLogLevel(t)}))}function p(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=s[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var s=i.map((function(t){if(null==t)return null;if("string"===typeof t)return t;if("number"===typeof t||"boolean"===typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}})).filter((function(t){return t})).join(" ");n>=(null!==r&&void 0!==r?r:e.logLevel)&&t({level:o[n].toLowerCase(),message:s,args:i,type:e.name})}},r=0,i=a;r<i.length;r++){n(i[r])}}},44589:function(t,e,n){"use strict";n.d(e,{$s:function(){return R},BH:function(){return c},G6:function(){return w},LL:function(){return S},Mn:function(){return b},Sg:function(){return h},UG:function(){return p},ZB:function(){return u},ZR:function(){return E},b$:function(){return v},d:function(){return m},eu:function(){return _},hl:function(){return I},jU:function(){return d},m9:function(){return x},ne:function(){return O},p$:function(){return s},r3:function(){return N},ru:function(){return g},uI:function(){return f},w1:function(){return y},z$:function(){return l},zI:function(){return T}});var r=n(70655),i=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296===(64512&i)&&r+1<t.length&&56320===(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},o={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],a=i+1<t.length,s=a?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=o>>2,l=(3&o)<<4|s>>4,f=(15&s)<<2|c>>6,p=63&c;u||(p=64,a||(f=64)),r.push(n[h],n[l],n[f],n[p])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(i(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(s=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(1023&a))}else{o=t[n++];var s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0,s=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();var c=o<<2|a>>4;if(r.push(c),64!==s){var h=a<<4&240|s>>2;if(r.push(h),64!==u){var l=s<<6&192|u;r.push(l)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},a=function(t){return function(t){var e=i(t);return o.encodeByteArray(e,!0)}(t).replace(/\./g,"")};function s(t){return u(void 0,t)}function u(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=u(t[n],e[n]));return t}var c=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"===typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();function h(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var s=(0,r.pi)({iss:"https://securetoken.google.com/"+n,aud:n,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[a(JSON.stringify({alg:"none",type:"JWT"})),a(JSON.stringify(s)),""].join(".")}function l(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function f(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(l())}function p(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(t){return!1}}function d(){return"object"===typeof self&&self.self===self}function g(){var t="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof t&&void 0!==t.id}function v(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function m(){return l().indexOf("Electron/")>=0}function y(){var t=l();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function b(){return l().indexOf("MSAppHost/")>=0}function w(){return!p()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function I(){return"indexedDB"in self&&null!=indexedDB}function _(){return new Promise((function(t,e){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(o){e(o)}}))}function T(){return!(!navigator||!navigator.cookieEnabled)}var E=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,S.prototype.create),o}return(0,r.ZT)(e,t),e}(Error),S=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],a=o?k(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new E(i,s,r);return u},t}();function k(t,e){return t.replace(A,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var A=/\{\$([^}]+)}/g;function N(t,e){return Object.prototype.hasOwnProperty.call(t,e)}!function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"===typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],h=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=h^u&(c^h),a=1518500249):(o=u^c^h,a=1859775393):r<60?(o=u&c|h&(u|c),a=2400959708):(o=u^c^h,a=3395469782);i=(s<<5|s>>>27)+o+l+a+n[r]&4294967295;l=h,h=c,c=4294967295&(u<<30|u>>>2),u=s,s=i}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"===typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t}}();function O(t,e){var n=new C(t,e);return n.subscribe.bind(n)}var C=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!==typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"===typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=D),void 0===r.error&&(r.error=D),void 0===r.complete&&(r.complete=D);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function D(){}function R(t,e,n){void 0===e&&(e=1e3),void 0===n&&(n=2);var r=e*Math.pow(n,t),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}function x(t){return t&&t._delegate?t._delegate:t}},88317:function(t,e,n){"use strict";n.r(e);var r,i=n(70655),o=n(26099),a=n(30909),s=n(44589),u=n(98676),c="0.4.32",h=1e4,l="w:0.4.32",f="FIS_v2",p=36e5,d=((r={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',r["not-registered"]="Firebase Installation is not registered.",r["installation-not-found"]="Firebase Installation not found.",r["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',r["app-offline"]="Could not process request. Application offline.",r["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",r),g=new s.LL("installations","Installations",d);function v(t){return t instanceof s.ZR&&t.code.includes("request-failed")}function m(t){return"https://firebaseinstallations.googleapis.com/v1/projects/"+t.projectId+"/installations"}function y(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}function b(t,e){return(0,i.mG)(this,void 0,void 0,(function(){var n,r;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return[4,e.json()];case 1:return n=i.sent(),r=n.error,[2,g.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})]}}))}))}function w(t){var e=t.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function I(t,e){var n=e.refreshToken,r=w(t);return r.append("Authorization",function(t){return"FIS_v2 "+t}(n)),r}function _(t){return(0,i.mG)(this,void 0,void 0,(function(){var e;return(0,i.Jh)(this,(function(n){switch(n.label){case 0:return[4,t()];case 1:return(e=n.sent()).status>=500&&e.status<600?[2,t()]:[2,e]}}))}))}function T(t,e){var n=e.fid;return(0,i.mG)(this,void 0,void 0,(function(){var e,r,o,a,s,u;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return e=m(t),r=w(t),o={fid:n,authVersion:f,appId:t.appId,sdkVersion:l},a={method:"POST",headers:r,body:JSON.stringify(o)},[4,_((function(){return fetch(e,a)}))];case 1:return(s=i.sent()).ok?[4,s.json()]:[3,3];case 2:return u=i.sent(),[2,{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:y(u.authToken)}];case 3:return[4,b("Create Installation",s)];case 4:throw i.sent()}}))}))}function E(t){return new Promise((function(e){setTimeout(e,t)}))}var S=/^[cdef][\w-]{21}$/;function k(){try{var t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;var e=function(t){return(e=t,btoa(String.fromCharCode.apply(String,(0,i.ev)([],(0,i.CR)(e)))).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var e}(t);return S.test(e)?e:""}catch(r){return""}}function A(t){return t.appName+"!"+t.appId}var N=new Map;function O(t,e){var n=A(t);C(n,e),function(t,e){var n=R();n&&n.postMessage({key:t,fid:e});x()}(n,e)}function C(t,e){var n,r,o=N.get(t);if(o)try{for(var a=(0,i.XA)(o),s=a.next();!s.done;s=a.next()){(0,s.value)(e)}}catch(u){n={error:u}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}var D=null;function R(){return!D&&"BroadcastChannel"in self&&((D=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(t){C(t.data.key,t.data.fid)}),D}function x(){0===N.size&&D&&(D.close(),D=null)}var P,L="firebase-installations-store",M=null;function j(){return M||(M=(0,u.openDb)("firebase-installations-database",1,(function(t){if(0===t.oldVersion)t.createObjectStore(L)}))),M}function F(t,e){return(0,i.mG)(this,void 0,void 0,(function(){var n,r,o,a,s;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return n=A(t),[4,j()];case 1:return r=i.sent(),o=r.transaction(L,"readwrite"),[4,(a=o.objectStore(L)).get(n)];case 2:return s=i.sent(),[4,a.put(e,n)];case 3:return i.sent(),[4,o.complete];case 4:return i.sent(),s&&s.fid===e.fid||O(t,e.fid),[2,e]}}))}))}function U(t){return(0,i.mG)(this,void 0,void 0,(function(){var e,n,r;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return e=A(t),[4,j()];case 1:return n=i.sent(),[4,(r=n.transaction(L,"readwrite")).objectStore(L).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function V(t,e){return(0,i.mG)(this,void 0,void 0,(function(){var n,r,o,a,s,u;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return n=A(t),[4,j()];case 1:return r=i.sent(),o=r.transaction(L,"readwrite"),[4,(a=o.objectStore(L)).get(n)];case 2:return s=i.sent(),void 0!==(u=e(s))?[3,4]:[4,a.delete(n)];case 3:return i.sent(),[3,6];case 4:return[4,a.put(u,n)];case 5:i.sent(),i.label=6;case 6:return[4,o.complete];case 7:return i.sent(),!u||s&&s.fid===u.fid||O(t,u.fid),[2,u]}}))}))}function q(t){return(0,i.mG)(this,void 0,void 0,(function(){var e,n,r;return(0,i.Jh)(this,(function(o){switch(o.label){case 0:return[4,V(t,(function(n){var r=function(t){return K(t||{fid:k(),registrationStatus:0})}(n),o=function(t,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(g.create("app-offline"))};var n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=function(t,e){return(0,i.mG)(this,void 0,void 0,(function(){var n,r;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,T(t,e)];case 1:return n=i.sent(),[2,F(t,n)];case 2:return v(r=i.sent())&&409===r.customData.serverCode?[4,U(t)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,F(t,{fid:e.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}}))}))}(t,n);return{installationEntry:n,registrationPromise:r}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:B(t)}:{installationEntry:e}}(t,r);return e=o.registrationPromise,o.installationEntry}))];case 1:return""!==(n=o.sent()).fid?[3,3]:(r={},[4,e]);case 2:return[2,(r.installationEntry=o.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:e}]}}))}))}function B(t){return(0,i.mG)(this,void 0,void 0,(function(){var e,n,r,o;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return[4,G(t)];case 1:e=i.sent(),i.label=2;case 2:return 1!==e.registrationStatus?[3,5]:[4,E(100)];case 3:return i.sent(),[4,G(t)];case 4:return e=i.sent(),[3,2];case 5:return 0!==e.registrationStatus?[3,7]:[4,q(t)];case 6:return n=i.sent(),r=n.installationEntry,(o=n.registrationPromise)?[2,o]:[2,r];case 7:return[2,e]}}))}))}function G(t){return V(t,(function(t){if(!t)throw g.create("installation-not-found");return K(t)}))}function K(t){return 1===(e=t).registrationStatus&&e.registrationTime+h<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e}function H(t,e){var n=t.appConfig,r=t.platformLoggerProvider;return(0,i.mG)(this,void 0,void 0,(function(){var t,o,a,s,u,c,h;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return t=function(t,e){var n=e.fid;return m(t)+"/"+n+"/authTokens:generate"}(n,e),o=I(n,e),(a=r.getImmediate({optional:!0}))&&o.append("x-firebase-client",a.getPlatformInfoString()),s={installation:{sdkVersion:l}},u={method:"POST",headers:o,body:JSON.stringify(s)},[4,_((function(){return fetch(t,u)}))];case 1:return(c=i.sent()).ok?[4,c.json()]:[3,3];case 2:return h=i.sent(),[2,y(h)];case 3:return[4,b("Generate Auth Token",c)];case 4:throw i.sent()}}))}))}function z(t,e){return void 0===e&&(e=!1),(0,i.mG)(this,void 0,void 0,(function(){var n,r,o;return(0,i.Jh)(this,(function(a){switch(a.label){case 0:return[4,V(t.appConfig,(function(r){if(!W(r))throw g.create("not-registered");var o=r.authToken;if(!e&&function(t){return 2===t.requestStatus&&!function(t){var e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+p}(t)}(o))return r;if(1===o.requestStatus)return n=function(t,e){return(0,i.mG)(this,void 0,void 0,(function(){var n,r;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return[4,J(t.appConfig)];case 1:n=i.sent(),i.label=2;case 2:return 1!==n.authToken.requestStatus?[3,5]:[4,E(100)];case 3:return i.sent(),[4,J(t.appConfig)];case 4:return n=i.sent(),[3,2];case 5:return 0===(r=n.authToken).requestStatus?[2,z(t,e)]:[2,r]}}))}))}(t,e),r;if(!navigator.onLine)throw g.create("app-offline");var a=function(t){var e={requestStatus:1,requestTime:Date.now()};return(0,i.pi)((0,i.pi)({},t),{authToken:e})}(r);return n=function(t,e){return(0,i.mG)(this,void 0,void 0,(function(){var n,r,o;return(0,i.Jh)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,8]),[4,H(t,e)];case 1:return n=a.sent(),o=(0,i.pi)((0,i.pi)({},e),{authToken:n}),[4,F(t.appConfig,o)];case 2:return a.sent(),[2,n];case 3:return!v(r=a.sent())||401!==r.customData.serverCode&&404!==r.customData.serverCode?[3,5]:[4,U(t.appConfig)];case 4:return a.sent(),[3,7];case 5:return o=(0,i.pi)((0,i.pi)({},e),{authToken:{requestStatus:0}}),[4,F(t.appConfig,o)];case 6:a.sent(),a.label=7;case 7:throw r;case 8:return[2]}}))}))}(t,a),a}))];case 1:return r=a.sent(),n?[4,n]:[3,3];case 2:return o=a.sent(),[3,4];case 3:o=r.authToken,a.label=4;case 4:return[2,o]}}))}))}function J(t){return V(t,(function(t){if(!W(t))throw g.create("not-registered");var e,n=t.authToken;return 1===(e=n).requestStatus&&e.requestTime+h<Date.now()?(0,i.pi)((0,i.pi)({},t),{authToken:{requestStatus:0}}):t}))}function W(t){return void 0!==t&&2===t.registrationStatus}function Z(t){return(0,i.mG)(this,void 0,void 0,(function(){var e;return(0,i.Jh)(this,(function(n){switch(n.label){case 0:return[4,q(t)];case 1:return(e=n.sent().registrationPromise)?[4,e]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))}function X(t,e){return(0,i.mG)(this,void 0,void 0,(function(){var n,r,o,a;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return n=function(t,e){var n=e.fid;return m(t)+"/"+n}(t,e),r=I(t,e),o={method:"DELETE",headers:r},[4,_((function(){return fetch(n,o)}))];case 1:return(a=i.sent()).ok?[3,3]:[4,b("Delete Installation",a)];case 2:throw i.sent();case 3:return[2]}}))}))}function Q(t,e){var n=t.appConfig;return function(t,e){R();var n=A(t),r=N.get(n);r||(r=new Set,N.set(n,r)),r.add(e)}(n,e),function(){!function(t,e){var n=A(t),r=N.get(n);r&&(r.delete(e),0===r.size&&N.delete(n),x())}(n,e)}}function Y(t){return g.create("missing-app-config-values",{valueName:t})}(P=o.Z).INTERNAL.registerComponent(new a.wA("installations",(function(t){var e=t.getProvider("app").getImmediate(),n=function(t){var e,n;if(!t||!t.options)throw Y("App Configuration");if(!t.name)throw Y("App Name");try{for(var r=(0,i.XA)(["projectId","apiKey","appId"]),o=r.next();!o.done;o=r.next()){var a=o.value;if(!t.options[a])throw Y(a)}}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e),r={appConfig:n,platformLoggerProvider:t.getProvider("platform-logger")},o={app:e,getId:function(){return function(t){return(0,i.mG)(this,void 0,void 0,(function(){var e,n,r;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return[4,q(t.appConfig)];case 1:return e=i.sent(),n=e.installationEntry,(r=e.registrationPromise)?r.catch(console.error):z(t).catch(console.error),[2,n.fid]}}))}))}(r)},getToken:function(t){return function(t,e){return void 0===e&&(e=!1),(0,i.mG)(this,void 0,void 0,(function(){return(0,i.Jh)(this,(function(n){switch(n.label){case 0:return[4,Z(t.appConfig)];case 1:return n.sent(),[4,z(t,e)];case 2:return[2,n.sent().token]}}))}))}(r,t)},delete:function(){return function(t){return(0,i.mG)(this,void 0,void 0,(function(){var e,n;return(0,i.Jh)(this,(function(r){switch(r.label){case 0:return[4,V(e=t.appConfig,(function(t){if(!t||0!==t.registrationStatus)return t}))];case 1:if(!(n=r.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw g.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw g.create("app-offline");case 3:return[4,X(e,n)];case 4:return r.sent(),[4,U(e)];case 5:r.sent(),r.label=6;case 6:return[2]}}))}))}(r)},onIdChange:function(t){return Q(r,t)}};return o}),"PUBLIC")),P.registerVersion("@firebase/installations",c);var $,tt,et=n(14594),nt="https://www.googletagmanager.com/gtag/js";!function(t){t.EVENT="event",t.SET="set",t.CONFIG="config"}($||($={})),function(t){t.ADD_SHIPPING_INFO="add_shipping_info",t.ADD_PAYMENT_INFO="add_payment_info",t.ADD_TO_CART="add_to_cart",t.ADD_TO_WISHLIST="add_to_wishlist",t.BEGIN_CHECKOUT="begin_checkout",t.CHECKOUT_PROGRESS="checkout_progress",t.EXCEPTION="exception",t.GENERATE_LEAD="generate_lead",t.LOGIN="login",t.PAGE_VIEW="page_view",t.PURCHASE="purchase",t.REFUND="refund",t.REMOVE_FROM_CART="remove_from_cart",t.SCREEN_VIEW="screen_view",t.SEARCH="search",t.SELECT_CONTENT="select_content",t.SELECT_ITEM="select_item",t.SELECT_PROMOTION="select_promotion",t.SET_CHECKOUT_OPTION="set_checkout_option",t.SHARE="share",t.SIGN_UP="sign_up",t.TIMING_COMPLETE="timing_complete",t.VIEW_CART="view_cart",t.VIEW_ITEM="view_item",t.VIEW_ITEM_LIST="view_item_list",t.VIEW_PROMOTION="view_promotion",t.VIEW_SEARCH_RESULTS="view_search_results"}(tt||(tt={}));var rt,it=new et.Yd("@firebase/analytics");function ot(t,e,n,r,o,a){return(0,i.mG)(this,void 0,void 0,(function(){var s,u,c,h;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:s=r[o],i.label=1;case 1:return i.trys.push([1,7,,8]),s?[4,e[s]]:[3,3];case 2:return i.sent(),[3,6];case 3:return[4,Promise.all(n)];case 4:return u=i.sent(),(c=u.find((function(t){return t.measurementId===o})))?[4,e[c.appId]]:[3,6];case 5:i.sent(),i.label=6;case 6:return[3,8];case 7:return h=i.sent(),it.error(h),[3,8];case 8:return t($.CONFIG,o,a),[2]}}))}))}function at(t,e,n,r,o){return(0,i.mG)(this,void 0,void 0,(function(){var a,s,u,c,h,l,f,p;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,4,,5]),a=[],o&&o.send_to?(s=o.send_to,Array.isArray(s)||(s=[s]),[4,Promise.all(n)]):[3,2];case 1:for(u=i.sent(),c=function(t){var n=u.find((function(e){return e.measurementId===t})),r=n&&e[n.appId];if(!r)return a=[],"break";a.push(r)},h=0,l=s;h<l.length&&(f=l[h],"break"!==c(f));h++);i.label=2;case 2:return 0===a.length&&(a=Object.values(e)),[4,Promise.all(a)];case 3:return i.sent(),t($.EVENT,r,o||{}),[3,5];case 4:return p=i.sent(),it.error(p),[3,5];case 5:return[2]}}))}))}function st(t,e,n,r,o){var a=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];window[r].push(arguments)};return window[o]&&"function"===typeof window[o]&&(a=window[o]),window[o]=function(t,e,n,r){return function(o,a,s){return(0,i.mG)(this,void 0,void 0,(function(){var u;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,6,,7]),o!==$.EVENT?[3,2]:[4,at(t,e,n,a,s)];case 1:return i.sent(),[3,5];case 2:return o!==$.CONFIG?[3,4]:[4,ot(t,e,n,r,a,s)];case 3:return i.sent(),[3,5];case 4:t($.SET,a),i.label=5;case 5:return[3,7];case 6:return u=i.sent(),it.error(u),[3,7];case 7:return[2]}}))}))}}(a,t,e,n),{gtagCore:a,wrappedGtag:window[o]}}var ut=((rt={})["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",rt["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",rt["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",rt["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",rt["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",rt["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",rt["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",rt["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',rt["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',rt),ct=new s.LL("analytics","Analytics",ut),ht=new(function(){function t(t,e){void 0===t&&(t={}),void 0===e&&(e=1e3),this.throttleMetadata=t,this.intervalMillis=e}return t.prototype.getThrottleMetadata=function(t){return this.throttleMetadata[t]},t.prototype.setThrottleMetadata=function(t,e){this.throttleMetadata[t]=e},t.prototype.deleteThrottleMetadata=function(t){delete this.throttleMetadata[t]},t}());function lt(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}function ft(t){var e;return(0,i.mG)(this,void 0,void 0,(function(){var n,r,o,a,s,u,c;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return n=t.appId,r=t.apiKey,o={method:"GET",headers:lt(r)},a="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),[4,fetch(a,o)];case 1:if(200===(s=i.sent()).status||304===s.status)return[3,6];u="",i.label=2;case 2:return i.trys.push([2,4,,5]),[4,s.json()];case 3:return c=i.sent(),(null===(e=c.error)||void 0===e?void 0:e.message)&&(u=c.error.message),[3,5];case 4:return i.sent(),[3,5];case 5:throw ct.create("config-fetch-failed",{httpStatus:s.status,responseMessage:u});case 6:return[2,s.json()]}}))}))}function pt(t,e,n,r){var o=e.throttleEndTimeMillis,a=e.backoffCount;return void 0===r&&(r=ht),(0,i.mG)(this,void 0,void 0,(function(){var e,u,c,h,l,f,p;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:e=t.appId,u=t.measurementId,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,dt(n,o)];case 2:return i.sent(),[3,4];case 3:if(c=i.sent(),u)return it.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+u+' provided in the "measurementId" field in the local Firebase config. ['+c.message+"]"),[2,{appId:e,measurementId:u}];throw c;case 4:return i.trys.push([4,6,,7]),[4,ft(t)];case 5:return h=i.sent(),r.deleteThrottleMetadata(e),[2,h];case 6:if(!function(t){if(!(t instanceof s.ZR)||!t.customData)return!1;var e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(l=i.sent())){if(r.deleteThrottleMetadata(e),u)return it.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+u+' provided in the "measurementId" field in the local Firebase config. ['+l.message+"]"),[2,{appId:e,measurementId:u}];throw l}return f=503===Number(l.customData.httpStatus)?(0,s.$s)(a,r.intervalMillis,30):(0,s.$s)(a,r.intervalMillis),p={throttleEndTimeMillis:Date.now()+f,backoffCount:a+1},r.setThrottleMetadata(e,p),it.debug("Calling attemptFetch again in "+f+" millis"),[2,pt(t,p,n,r)];case 7:return[2]}}))}))}function dt(t,e){return new Promise((function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener((function(){clearTimeout(o),r(ct.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}var gt=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach((function(t){return t()}))},t}();function vt(t,e,n,r,o,a){return(0,i.mG)(this,void 0,void 0,(function(){var u,c,h,l,f,p,d;return(0,i.Jh)(this,(function(g){switch(g.label){case 0:return u=function(t,e,n){return void 0===e&&(e=ht),(0,i.mG)(this,void 0,void 0,(function(){var r,o,a,s,u,c,h=this;return(0,i.Jh)(this,(function(l){if(r=t.options,o=r.appId,a=r.apiKey,s=r.measurementId,!o)throw ct.create("no-app-id");if(!a){if(s)return[2,{measurementId:s,appId:o}];throw ct.create("no-api-key")}return u=e.getThrottleMetadata(o)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new gt,setTimeout((function(){return(0,i.mG)(h,void 0,void 0,(function(){return(0,i.Jh)(this,(function(t){return c.abort(),[2]}))}))}),void 0!==n?n:6e4),[2,pt({appId:o,apiKey:a,measurementId:s},u,c,e)]}))}))}(t),u.then((function(e){n[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&it.warn("The measurement ID in the local Firebase config ("+t.options.measurementId+") does not match the measurement ID fetched from the server ("+e.measurementId+"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")})).catch((function(t){return it.error(t)})),e.push(u),c=function(){return(0,i.mG)(this,void 0,void 0,(function(){var t;return(0,i.Jh)(this,(function(e){switch(e.label){case 0:return(0,s.hl)()?[3,1]:(it.warn(ct.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return e.trys.push([1,3,,4]),[4,(0,s.eu)()];case 2:return e.sent(),[3,4];case 3:return t=e.sent(),it.warn(ct.create("indexeddb-unavailable",{errorInfo:t}).message),[2,!1];case 4:return[2,!0]}}))}))}().then((function(t){return t?r.getId():void 0})),[4,Promise.all([u,c])];case 1:return h=g.sent(),l=h[0],f=h[1],function(){for(var t=window.document.getElementsByTagName("script"),e=0,n=Object.values(t);e<n.length;e++){var r=n[e];if(r.src&&r.src.includes(nt))return r}return null}()||function(t,e){var n=document.createElement("script");n.src=nt+"?l="+t+"&id="+e,n.async=!0,document.head.appendChild(n)}(a,l.measurementId),o("js",new Date),(d={}).origin="firebase",d.update=!0,p=d,null!=f&&(p.firebase_id=f),o($.CONFIG,l.measurementId,p),[2,l.measurementId]}}))}))}var mt,yt,bt={},wt=[],It={},_t="dataLayer",Tt="gtag",Et=!1;function St(t){if(Et)throw ct.create("already-initialized");t.dataLayerName&&(_t=t.dataLayerName),t.gtagName&&(Tt=t.gtagName)}function kt(t,e){!function(){var t=[];if((0,s.ru)()&&t.push("This is a browser extension environment."),(0,s.zI)()||t.push("Cookies are not available."),t.length>0){var e=t.map((function(t,e){return"("+(e+1)+") "+t})).join(" "),n=ct.create("invalid-analytics-context",{errorInfo:e});it.warn(n.message)}}();var n=t.options.appId;if(!n)throw ct.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw ct.create("no-api-key");it.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+t.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=bt[n])throw ct.create("already-exists",{id:n});if(!Et){!function(t){var e=[];Array.isArray(window[t])?e=window[t]:window[t]=e}(_t);var r=st(bt,wt,It,_t,Tt),o=r.wrappedGtag,a=r.gtagCore;yt=o,mt=a,Et=!0}bt[n]=vt(t,wt,It,e,mt,_t);var u={app:t,logEvent:function(t,e,r){(function(t,e,n,r,o){return(0,i.mG)(this,void 0,void 0,(function(){var a,s;return(0,i.Jh)(this,(function(u){switch(u.label){case 0:return o&&o.global?(t($.EVENT,n,r),[2]):[3,1];case 1:return[4,e];case 2:a=u.sent(),s=(0,i.pi)((0,i.pi)({},r),{send_to:a}),t($.EVENT,n,s),u.label=3;case 3:return[2]}}))}))})(yt,bt[n],t,e,r).catch((function(t){return it.error(t)}))},setCurrentScreen:function(t,e){(function(t,e,n,r){return(0,i.mG)(this,void 0,void 0,(function(){var o;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return r&&r.global?(t($.SET,{screen_name:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:o=i.sent(),t($.CONFIG,o,{update:!0,screen_name:n}),i.label=3;case 3:return[2]}}))}))})(yt,bt[n],t,e).catch((function(t){return it.error(t)}))},setUserId:function(t,e){(function(t,e,n,r){return(0,i.mG)(this,void 0,void 0,(function(){var o;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return r&&r.global?(t($.SET,{user_id:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:o=i.sent(),t($.CONFIG,o,{update:!0,user_id:n}),i.label=3;case 3:return[2]}}))}))})(yt,bt[n],t,e).catch((function(t){return it.error(t)}))},setUserProperties:function(t,e){(function(t,e,n,r){return(0,i.mG)(this,void 0,void 0,(function(){var o,a,s,u,c;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:if(!r||!r.global)return[3,1];for(o={},a=0,s=Object.keys(n);a<s.length;a++)u=s[a],o["user_properties."+u]=n[u];return t($.SET,o),[2,Promise.resolve()];case 1:return[4,e];case 2:c=i.sent(),t($.CONFIG,c,{update:!0,user_properties:n}),i.label=3;case 3:return[2]}}))}))})(yt,bt[n],t,e).catch((function(t){return it.error(t)}))},setAnalyticsCollectionEnabled:function(t){(function(t,e){return(0,i.mG)(this,void 0,void 0,(function(){var n;return(0,i.Jh)(this,(function(r){switch(r.label){case 0:return[4,t];case 1:return n=r.sent(),window["ga-disable-"+n]=!e,[2]}}))}))})(bt[n],t).catch((function(t){return it.error(t)}))},INTERNAL:{delete:function(){return delete bt[n],Promise.resolve()}}};return u}var At="analytics";function Nt(){return(0,i.mG)(this,void 0,void 0,(function(){return(0,i.Jh)(this,(function(t){switch(t.label){case 0:if((0,s.ru)())return[2,!1];if(!(0,s.zI)())return[2,!1];if(!(0,s.hl)())return[2,!1];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,(0,s.eu)()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,!1];case 4:return[2]}}))}))}!function(t){t.INTERNAL.registerComponent(new a.wA(At,(function(t){return kt(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())}),"PUBLIC").setServiceProps({settings:St,EventName:tt,isSupported:Nt})),t.INTERNAL.registerComponent(new a.wA("analytics-internal",(function(t){try{return{logEvent:t.getProvider(At).getImmediate().logEvent}}catch(e){throw ct.create("interop-component-reg-failed",{reason:e})}}),"PRIVATE")),t.registerVersion("@firebase/analytics","0.6.18")}(o.Z)},98676:function(t,e){!function(t){"use strict";function e(t){return Array.prototype.slice.call(t)}function n(t){return new Promise((function(e,n){t.onsuccess=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function r(t,e,r){var i,o=new Promise((function(o,a){n(i=t[e].apply(t,r)).then(o,a)}));return o.request=i,o}function i(t,e,n){var i=r(t,e,n);return i.then((function(t){if(t)return new h(t,i.request)}))}function o(t,e,n){n.forEach((function(n){Object.defineProperty(t.prototype,n,{get:function(){return this[e][n]},set:function(t){this[e][n]=t}})}))}function a(t,e,n,i){i.forEach((function(i){i in n.prototype&&(t.prototype[i]=function(){return r(this[e],i,arguments)})}))}function s(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return this[e][r].apply(this[e],arguments)})}))}function u(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return i(this[e],r,arguments)})}))}function c(t){this._index=t}function h(t,e){this._cursor=t,this._request=e}function l(t){this._store=t}function f(t){this._tx=t,this.complete=new Promise((function(e,n){t.oncomplete=function(){e()},t.onerror=function(){n(t.error)},t.onabort=function(){n(t.error)}}))}function p(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new f(n)}function d(t){this._db=t}function g(t,e,n){var i=r(indexedDB,"open",[t,e]),o=i.request;return o&&(o.onupgradeneeded=function(t){n&&n(new p(o.result,t.oldVersion,o.transaction))}),i.then((function(t){return new d(t)}))}function v(t){return r(indexedDB,"deleteDatabase",[t])}o(c,"_index",["name","keyPath","multiEntry","unique"]),a(c,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),u(c,"_index",IDBIndex,["openCursor","openKeyCursor"]),o(h,"_cursor",["direction","key","primaryKey","value"]),a(h,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach((function(t){t in IDBCursor.prototype&&(h.prototype[t]=function(){var e=this,r=arguments;return Promise.resolve().then((function(){return e._cursor[t].apply(e._cursor,r),n(e._request).then((function(t){if(t)return new h(t,e._request)}))}))})})),l.prototype.createIndex=function(){return new c(this._store.createIndex.apply(this._store,arguments))},l.prototype.index=function(){return new c(this._store.index.apply(this._store,arguments))},o(l,"_store",["name","keyPath","indexNames","autoIncrement"]),a(l,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),u(l,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),s(l,"_store",IDBObjectStore,["deleteIndex"]),f.prototype.objectStore=function(){return new l(this._tx.objectStore.apply(this._tx,arguments))},o(f,"_tx",["objectStoreNames","mode"]),s(f,"_tx",IDBTransaction,["abort"]),p.prototype.createObjectStore=function(){return new l(this._db.createObjectStore.apply(this._db,arguments))},o(p,"_db",["name","version","objectStoreNames"]),s(p,"_db",IDBDatabase,["deleteObjectStore","close"]),d.prototype.transaction=function(){return new f(this._db.transaction.apply(this._db,arguments))},o(d,"_db",["name","version","objectStoreNames"]),s(d,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach((function(t){[l,c].forEach((function(n){t in n.prototype&&(n.prototype[t.replace("open","iterate")]=function(){var n=e(arguments),r=n[n.length-1],i=this._store||this._index,o=i[t].apply(i,n.slice(0,-1));o.onsuccess=function(){r(o.result)}})}))})),[c,l].forEach((function(t){t.prototype.getAll||(t.prototype.getAll=function(t,e){var n=this,r=[];return new Promise((function(i){n.iterateCursor(t,(function(t){t?(r.push(t.value),void 0===e||r.length!=e?t.continue():i(r)):i(r)}))}))})})),t.openDb=g,t.deleteDb=v,Object.defineProperty(t,"__esModule",{value:!0})}(e)},6840:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/_app",function(){return n(85777)}])},85777:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return He}});var r=n(85893);n(30520),n(49320);function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}var o=n(15671),a=n(43144);function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var u=n(89611);function c(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&(0,u.Z)(t,e)}function h(t,e){if(e&&("object"===i(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return s(t)}function l(t){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},l(t)}var f=n(4942),p=n(83878);var d=n(81563),g=n(25267);function v(t){return(0,p.Z)(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||(0,d.Z)(t)||(0,g.Z)()}function m(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?m(Object(n),!0).forEach((function(e){(0,f.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var b={type:"logger",log:function(t){this.output("log",t)},warn:function(t){this.output("warn",t)},error:function(t){this.output("error",t)},output:function(t,e){console&&console[t]&&console[t].apply(console,e)}},w=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,o.Z)(this,t),this.init(e,n)}return(0,a.Z)(t,[{key:"init",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=e.prefix||"i18next:",this.logger=t||b,this.options=e,this.debug=e.debug}},{key:"setDebug",value:function(t){this.debug=t}},{key:"log",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.forward(e,"log","",!0)}},{key:"warn",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.forward(e,"warn","",!0)}},{key:"error",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.forward(e,"error","")}},{key:"deprecate",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(t,e,n,r){return r&&!this.debug?null:("string"===typeof t[0]&&(t[0]="".concat(n).concat(this.prefix," ").concat(t[0])),this.logger[e](t))}},{key:"create",value:function(e){return new t(this.logger,y(y({},{prefix:"".concat(this.prefix,":").concat(e,":")}),this.options))}}]),t}(),I=new w,_=function(){function t(){(0,o.Z)(this,t),this.observers={}}return(0,a.Z)(t,[{key:"on",value:function(t,e){var n=this;return t.split(" ").forEach((function(t){n.observers[t]=n.observers[t]||[],n.observers[t].push(e)})),this}},{key:"off",value:function(t,e){this.observers[t]&&(e?this.observers[t]=this.observers[t].filter((function(t){return t!==e})):delete this.observers[t])}},{key:"emit",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if(this.observers[t]){var i=[].concat(this.observers[t]);i.forEach((function(t){t.apply(void 0,n)}))}if(this.observers["*"]){var o=[].concat(this.observers["*"]);o.forEach((function(e){e.apply(e,[t].concat(n))}))}}}]),t}();function T(){var t,e,n=new Promise((function(n,r){t=n,e=r}));return n.resolve=t,n.reject=e,n}function E(t){return null==t?"":""+t}function S(t,e,n){t.forEach((function(t){e[t]&&(n[t]=e[t])}))}function k(t,e,n){function r(t){return t&&t.indexOf("###")>-1?t.replace(/###/g,"."):t}function i(){return!t||"string"===typeof t}for(var o="string"!==typeof e?[].concat(e):e.split(".");o.length>1;){if(i())return{};var a=r(o.shift());!t[a]&&n&&(t[a]=new n),t=Object.prototype.hasOwnProperty.call(t,a)?t[a]:{}}return i()?{}:{obj:t,k:r(o.shift())}}function A(t,e,n){var r=k(t,e,Object);r.obj[r.k]=n}function N(t,e){var n=k(t,e),r=n.obj,i=n.k;if(r)return r[i]}function O(t,e,n){var r=N(t,n);return void 0!==r?r:N(e,n)}function C(t,e,n){for(var r in e)"__proto__"!==r&&"constructor"!==r&&(r in t?"string"===typeof t[r]||t[r]instanceof String||"string"===typeof e[r]||e[r]instanceof String?n&&(t[r]=e[r]):C(t[r],e[r],n):t[r]=e[r]);return t}function D(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var R={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function x(t){return"string"===typeof t?t.replace(/[&<>"'\/]/g,(function(t){return R[t]})):t}var P="undefined"!==typeof window&&window.navigator&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,L=[" ",",","?","!",";"];function M(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function j(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?M(Object(n),!0).forEach((function(e){(0,f.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function F(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(Tt){return!1}}();return function(){var n,r=l(t);if(e){var i=l(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h(this,n)}}function U(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".";if(t){if(t[e])return t[e];for(var r=e.split(n),i=t,o=0;o<r.length;++o){if(!i)return;if("string"===typeof i[r[o]]&&o+1<r.length)return;if(void 0===i[r[o]]){for(var a=2,s=r.slice(o,o+a).join(n),u=i[s];void 0===u&&r.length>o+a;)a++,u=i[s=r.slice(o,o+a).join(n)];if(void 0===u)return;if(e.endsWith(s)){if("string"===typeof u)return u;if(s&&"string"===typeof u[s])return u[s]}var c=r.slice(o+a).join(n);return c?U(u,c,n):void 0}i=i[r[o]]}return i}}var V=function(t){c(n,t);var e=F(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};return(0,o.Z)(this,n),r=e.call(this),P&&_.call(s(r)),r.data=t||{},r.options=i,void 0===r.options.keySeparator&&(r.options.keySeparator="."),void 0===r.options.ignoreJSONStructure&&(r.options.ignoreJSONStructure=!0),r}return(0,a.Z)(n,[{key:"addNamespaces",value:function(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}},{key:"removeNamespaces",value:function(t){var e=this.options.ns.indexOf(t);e>-1&&this.options.ns.splice(e,1)}},{key:"getResource",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=void 0!==r.keySeparator?r.keySeparator:this.options.keySeparator,o=void 0!==r.ignoreJSONStructure?r.ignoreJSONStructure:this.options.ignoreJSONStructure,a=[t,e];n&&"string"!==typeof n&&(a=a.concat(n)),n&&"string"===typeof n&&(a=a.concat(i?n.split(i):n)),t.indexOf(".")>-1&&(a=t.split("."));var s=N(this.data,a);return s||!o||"string"!==typeof n?s:U(this.data&&this.data[t]&&this.data[t][e],n,i)}},{key:"addResource",value:function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1},o=this.options.keySeparator;void 0===o&&(o=".");var a=[t,e];n&&(a=a.concat(o?n.split(o):n)),t.indexOf(".")>-1&&(r=e,e=(a=t.split("."))[1]),this.addNamespaces(e),A(this.data,a,r),i.silent||this.emit("added",t,e,n,r)}},{key:"addResources",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(var i in n)"string"!==typeof n[i]&&"[object Array]"!==Object.prototype.toString.apply(n[i])||this.addResource(t,e,i,n[i],{silent:!0});r.silent||this.emit("added",t,e,n)}},{key:"addResourceBundle",value:function(t,e,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1},a=[t,e];t.indexOf(".")>-1&&(r=n,n=e,e=(a=t.split("."))[1]),this.addNamespaces(e);var s=N(this.data,a)||{};r?C(s,n,i):s=j(j({},s),n),A(this.data,a,s),o.silent||this.emit("added",t,e,n)}},{key:"removeResourceBundle",value:function(t,e){this.hasResourceBundle(t,e)&&delete this.data[t][e],this.removeNamespaces(e),this.emit("removed",t,e)}},{key:"hasResourceBundle",value:function(t,e){return void 0!==this.getResource(t,e)}},{key:"getResourceBundle",value:function(t,e){return e||(e=this.options.defaultNS),"v1"===this.options.compatibilityAPI?j(j({},{}),this.getResource(t,e)):this.getResource(t,e)}},{key:"getDataByLanguage",value:function(t){return this.data[t]}},{key:"hasLanguageSomeTranslations",value:function(t){var e=this.getDataByLanguage(t);return!!(e&&Object.keys(e)||[]).find((function(t){return e[t]&&Object.keys(e[t]).length>0}))}},{key:"toJSON",value:function(){return this.data}}]),n}(_),q={processors:{},addPostProcessor:function(t){this.processors[t.name]=t},handle:function(t,e,n,r,i){var o=this;return t.forEach((function(t){o.processors[t]&&(e=o.processors[t].process(e,n,r,i))})),e}};function B(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function G(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?B(Object(n),!0).forEach((function(e){(0,f.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function K(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(Tt){return!1}}();return function(){var n,r=l(t);if(e){var i=l(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h(this,n)}}var H={},z=function(t){c(n,t);var e=K(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,o.Z)(this,n),r=e.call(this),P&&_.call(s(r)),S(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],t,s(r)),r.options=i,void 0===r.options.keySeparator&&(r.options.keySeparator="."),r.logger=I.create("translator"),r}return(0,a.Z)(n,[{key:"changeLanguage",value:function(t){t&&(this.language=t)}},{key:"exists",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};if(void 0===t||null===t)return!1;var n=this.resolve(t,e);return n&&void 0!==n.res}},{key:"extractFromKey",value:function(t,e){var n=void 0!==e.nsSeparator?e.nsSeparator:this.options.nsSeparator;void 0===n&&(n=":");var r=void 0!==e.keySeparator?e.keySeparator:this.options.keySeparator,i=e.ns||this.options.defaultNS||[],o=n&&t.indexOf(n)>-1,a=!this.options.userDefinedKeySeparator&&!e.keySeparator&&!this.options.userDefinedNsSeparator&&!e.nsSeparator&&!function(t,e,n){e=e||"",n=n||"";var r=L.filter((function(t){return e.indexOf(t)<0&&n.indexOf(t)<0}));if(0===r.length)return!0;var i=new RegExp("(".concat(r.map((function(t){return"?"===t?"\\?":t})).join("|"),")")),o=!i.test(t);if(!o){var a=t.indexOf(n);a>0&&!i.test(t.substring(0,a))&&(o=!0)}return o}(t,n,r);if(o&&!a){var s=t.match(this.interpolator.nestingRegexp);if(s&&s.length>0)return{key:t,namespaces:i};var u=t.split(n);(n!==r||n===r&&this.options.ns.indexOf(u[0])>-1)&&(i=u.shift()),t=u.join(r)}return"string"===typeof i&&(i=[i]),{key:t,namespaces:i}}},{key:"translate",value:function(t,e,r){var o=this;if("object"!==i(e)&&this.options.overloadTranslationOptionHandler&&(e=this.options.overloadTranslationOptionHandler(arguments)),e||(e={}),void 0===t||null===t)return"";Array.isArray(t)||(t=[String(t)]);var a=void 0!==e.returnDetails?e.returnDetails:this.options.returnDetails,s=void 0!==e.keySeparator?e.keySeparator:this.options.keySeparator,u=this.extractFromKey(t[t.length-1],e),c=u.key,h=u.namespaces,l=h[h.length-1],f=e.lng||this.language,p=e.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(f&&"cimode"===f.toLowerCase()){if(p){var d=e.nsSeparator||this.options.nsSeparator;return a?(g.res="".concat(l).concat(d).concat(c),g):"".concat(l).concat(d).concat(c)}return a?(g.res=c,g):c}var g=this.resolve(t,e),v=g&&g.res,m=g&&g.usedKey||c,y=g&&g.exactUsedKey||c,b=Object.prototype.toString.apply(v),w=["[object Number]","[object Function]","[object RegExp]"],I=void 0!==e.joinArrays?e.joinArrays:this.options.joinArrays,_=!this.i18nFormat||this.i18nFormat.handleAsObject,T="string"!==typeof v&&"boolean"!==typeof v&&"number"!==typeof v;if(_&&v&&T&&w.indexOf(b)<0&&("string"!==typeof I||"[object Array]"!==b)){if(!e.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");var E=this.options.returnedObjectHandler?this.options.returnedObjectHandler(m,v,G(G({},e),{},{ns:h})):"key '".concat(c," (").concat(this.language,")' returned an object instead of string.");return a?(g.res=E,g):E}if(s){var S="[object Array]"===b,k=S?[]:{},A=S?y:m;for(var N in v)if(Object.prototype.hasOwnProperty.call(v,N)){var O="".concat(A).concat(s).concat(N);k[N]=this.translate(O,G(G({},e),{joinArrays:!1,ns:h})),k[N]===O&&(k[N]=v[N])}v=k}}else if(_&&"string"===typeof I&&"[object Array]"===b)(v=v.join(I))&&(v=this.extendTranslation(v,t,e,r));else{var C=!1,D=!1,R=void 0!==e.count&&"string"!==typeof e.count,x=n.hasDefaultValue(e),P=R?this.pluralResolver.getSuffix(f,e.count,e):"",L=e["defaultValue".concat(P)]||e.defaultValue;!this.isValidLookup(v)&&x&&(C=!0,v=L),this.isValidLookup(v)||(D=!0,v=c);var M=e.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey,j=M&&D?void 0:v,F=x&&L!==v&&this.options.updateMissing;if(D||C||F){if(this.logger.log(F?"updateKey":"missingKey",f,l,c,F?L:v),s){var U=this.resolve(c,G(G({},e),{},{keySeparator:!1}));U&&U.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var V=[],q=this.languageUtils.getFallbackCodes(this.options.fallbackLng,e.lng||this.language);if("fallback"===this.options.saveMissingTo&&q&&q[0])for(var B=0;B<q.length;B++)V.push(q[B]);else"all"===this.options.saveMissingTo?V=this.languageUtils.toResolveHierarchy(e.lng||this.language):V.push(e.lng||this.language);var K=function(t,n,r){var i=x&&r!==v?r:j;o.options.missingKeyHandler?o.options.missingKeyHandler(t,l,n,i,F,e):o.backendConnector&&o.backendConnector.saveMissing&&o.backendConnector.saveMissing(t,l,n,i,F,e),o.emit("missingKey",t,l,n,v)};this.options.saveMissing&&(this.options.saveMissingPlurals&&R?V.forEach((function(t){o.pluralResolver.getSuffixes(t,e).forEach((function(n){K([t],c+n,e["defaultValue".concat(n)]||L)}))})):K(V,c,L))}v=this.extendTranslation(v,t,e,g,r),D&&v===c&&this.options.appendNamespaceToMissingKey&&(v="".concat(l,":").concat(c)),(D||C)&&this.options.parseMissingKeyHandler&&(v="v1"!==this.options.compatibilityAPI?this.options.parseMissingKeyHandler(c,C?v:void 0):this.options.parseMissingKeyHandler(v))}return a?(g.res=v,g):v}},{key:"extendTranslation",value:function(t,e,n,r,i){var o=this;if(this.i18nFormat&&this.i18nFormat.parse)t=this.i18nFormat.parse(t,G(G({},this.options.interpolation.defaultVariables),n),r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init(G(G({},n),{interpolation:G(G({},this.options.interpolation),n.interpolation)}));var a,s="string"===typeof t&&(n&&n.interpolation&&void 0!==n.interpolation.skipOnVariables?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);if(s){var u=t.match(this.interpolator.nestingRegexp);a=u&&u.length}var c=n.replace&&"string"!==typeof n.replace?n.replace:n;if(this.options.interpolation.defaultVariables&&(c=G(G({},this.options.interpolation.defaultVariables),c)),t=this.interpolator.interpolate(t,c,n.lng||this.language,n),s){var h=t.match(this.interpolator.nestingRegexp);a<(h&&h.length)&&(n.nest=!1)}!1!==n.nest&&(t=this.interpolator.nest(t,(function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return i&&i[0]===r[0]&&!n.context?(o.logger.warn("It seems you are nesting recursively key: ".concat(r[0]," in key: ").concat(e[0])),null):o.translate.apply(o,r.concat([e]))}),n)),n.interpolation&&this.interpolator.reset()}var l=n.postProcess||this.options.postProcess,f="string"===typeof l?[l]:l;return void 0!==t&&null!==t&&f&&f.length&&!1!==n.applyPostProcessor&&(t=q.handle(f,t,e,this.options&&this.options.postProcessPassResolved?G({i18nResolved:r},n):n,this)),t}},{key:"resolve",value:function(t){var e,n,r,i,o,a=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"===typeof t&&(t=[t]),t.forEach((function(t){if(!a.isValidLookup(e)){var u=a.extractFromKey(t,s),c=u.key;n=c;var h=u.namespaces;a.options.fallbackNS&&(h=h.concat(a.options.fallbackNS));var l=void 0!==s.count&&"string"!==typeof s.count,f=l&&!s.ordinal&&0===s.count&&a.pluralResolver.shouldUseIntlApi(),p=void 0!==s.context&&("string"===typeof s.context||"number"===typeof s.context)&&""!==s.context,d=s.lngs?s.lngs:a.languageUtils.toResolveHierarchy(s.lng||a.language,s.fallbackLng);h.forEach((function(t){a.isValidLookup(e)||(o=t,!H["".concat(d[0],"-").concat(t)]&&a.utils&&a.utils.hasLoadedNamespace&&!a.utils.hasLoadedNamespace(o)&&(H["".concat(d[0],"-").concat(t)]=!0,a.logger.warn('key "'.concat(n,'" for languages "').concat(d.join(", "),'" won\'t get resolved as namespace "').concat(o,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),d.forEach((function(n){if(!a.isValidLookup(e)){i=n;var o,u=[c];if(a.i18nFormat&&a.i18nFormat.addLookupKeys)a.i18nFormat.addLookupKeys(u,c,n,t,s);else{var h;l&&(h=a.pluralResolver.getSuffix(n,s.count,s));var d="_zero";if(l&&(u.push(c+h),f&&u.push(c+d)),p){var g="".concat(c).concat(a.options.contextSeparator).concat(s.context);u.push(g),l&&(u.push(g+h),f&&u.push(g+d))}}for(;o=u.pop();)a.isValidLookup(e)||(r=o,e=a.getResource(n,t,o,s))}})))}))}})),{res:e,usedKey:n,exactUsedKey:r,usedLng:i,usedNS:o}}},{key:"isValidLookup",value:function(t){return void 0!==t&&!(!this.options.returnNull&&null===t)&&!(!this.options.returnEmptyString&&""===t)}},{key:"getResource",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(t,e,n,r):this.resourceStore.getResource(t,e,n,r)}}],[{key:"hasDefaultValue",value:function(t){var e="defaultValue";for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e===n.substring(0,e.length)&&void 0!==t[n])return!0;return!1}}]),n}(_);function J(t){return t.charAt(0).toUpperCase()+t.slice(1)}var W=function(){function t(e){(0,o.Z)(this,t),this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=I.create("languageUtils")}return(0,a.Z)(t,[{key:"getScriptPartFromCode",value:function(t){if(!t||t.indexOf("-")<0)return null;var e=t.split("-");return 2===e.length?null:(e.pop(),"x"===e[e.length-1].toLowerCase()?null:this.formatLanguageCode(e.join("-")))}},{key:"getLanguagePartFromCode",value:function(t){if(!t||t.indexOf("-")<0)return t;var e=t.split("-");return this.formatLanguageCode(e[0])}},{key:"formatLanguageCode",value:function(t){if("string"===typeof t&&t.indexOf("-")>-1){var e=["hans","hant","latn","cyrl","cans","mong","arab"],n=t.split("-");return this.options.lowerCaseLng?n=n.map((function(t){return t.toLowerCase()})):2===n.length?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),e.indexOf(n[1].toLowerCase())>-1&&(n[1]=J(n[1].toLowerCase()))):3===n.length&&(n[0]=n[0].toLowerCase(),2===n[1].length&&(n[1]=n[1].toUpperCase()),"sgn"!==n[0]&&2===n[2].length&&(n[2]=n[2].toUpperCase()),e.indexOf(n[1].toLowerCase())>-1&&(n[1]=J(n[1].toLowerCase())),e.indexOf(n[2].toLowerCase())>-1&&(n[2]=J(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}},{key:"isSupportedCode",value:function(t){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}},{key:"getBestMatchFromCodes",value:function(t){var e,n=this;return t?(t.forEach((function(t){if(!e){var r=n.formatLanguageCode(t);n.options.supportedLngs&&!n.isSupportedCode(r)||(e=r)}})),!e&&this.options.supportedLngs&&t.forEach((function(t){if(!e){var r=n.getLanguagePartFromCode(t);if(n.isSupportedCode(r))return e=r;e=n.options.supportedLngs.find((function(t){if(0===t.indexOf(r))return t}))}})),e||(e=this.getFallbackCodes(this.options.fallbackLng)[0]),e):null}},{key:"getFallbackCodes",value:function(t,e){if(!t)return[];if("function"===typeof t&&(t=t(e)),"string"===typeof t&&(t=[t]),"[object Array]"===Object.prototype.toString.apply(t))return t;if(!e)return t.default||[];var n=t[e];return n||(n=t[this.getScriptPartFromCode(e)]),n||(n=t[this.formatLanguageCode(e)]),n||(n=t[this.getLanguagePartFromCode(e)]),n||(n=t.default),n||[]}},{key:"toResolveHierarchy",value:function(t,e){var n=this,r=this.getFallbackCodes(e||this.options.fallbackLng||[],t),i=[],o=function(t){t&&(n.isSupportedCode(t)?i.push(t):n.logger.warn("rejecting language code not found in supportedLngs: ".concat(t)))};return"string"===typeof t&&t.indexOf("-")>-1?("languageOnly"!==this.options.load&&o(this.formatLanguageCode(t)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&o(this.getScriptPartFromCode(t)),"currentOnly"!==this.options.load&&o(this.getLanguagePartFromCode(t))):"string"===typeof t&&o(this.formatLanguageCode(t)),r.forEach((function(t){i.indexOf(t)<0&&o(n.formatLanguageCode(t))})),i}}]),t}(),Z=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],X={1:function(t){return Number(t>1)},2:function(t){return Number(1!=t)},3:function(t){return 0},4:function(t){return Number(t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2)},5:function(t){return Number(0==t?0:1==t?1:2==t?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5)},6:function(t){return Number(1==t?0:t>=2&&t<=4?1:2)},7:function(t){return Number(1==t?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2)},8:function(t){return Number(1==t?0:2==t?1:8!=t&&11!=t?2:3)},9:function(t){return Number(t>=2)},10:function(t){return Number(1==t?0:2==t?1:t<7?2:t<11?3:4)},11:function(t){return Number(1==t||11==t?0:2==t||12==t?1:t>2&&t<20?2:3)},12:function(t){return Number(t%10!=1||t%100==11)},13:function(t){return Number(0!==t)},14:function(t){return Number(1==t?0:2==t?1:3==t?2:3)},15:function(t){return Number(t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2)},16:function(t){return Number(t%10==1&&t%100!=11?0:0!==t?1:2)},17:function(t){return Number(1==t||t%10==1&&t%100!=11?0:1)},18:function(t){return Number(0==t?0:1==t?1:2)},19:function(t){return Number(1==t?0:0==t||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3)},20:function(t){return Number(1==t?0:0==t||t%100>0&&t%100<20?1:2)},21:function(t){return Number(t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0)},22:function(t){return Number(1==t?0:2==t?1:(t<0||t>10)&&t%10==0?2:3)}},Q=["v1","v2","v3"],Y={zero:0,one:1,two:2,few:3,many:4,other:5};function $(){var t={};return Z.forEach((function(e){e.lngs.forEach((function(n){t[n]={numbers:e.nr,plurals:X[e.fc]}}))})),t}var tt=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,o.Z)(this,t),this.languageUtils=e,this.options=n,this.logger=I.create("pluralResolver"),this.options.compatibilityJSON&&"v4"!==this.options.compatibilityJSON||"undefined"!==typeof Intl&&Intl.PluralRules||(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=$()}return(0,a.Z)(t,[{key:"addRule",value:function(t,e){this.rules[t]=e}},{key:"getRule",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(t,{type:e.ordinal?"ordinal":"cardinal"})}catch(n){return}return this.rules[t]||this.rules[this.languageUtils.getLanguagePartFromCode(t)]}},{key:"needsPlural",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getRule(t,e);return this.shouldUseIntlApi()?n&&n.resolvedOptions().pluralCategories.length>1:n&&n.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.getSuffixes(t,n).map((function(t){return"".concat(e).concat(t)}))}},{key:"getSuffixes",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.getRule(t,n);return r?this.shouldUseIntlApi()?r.resolvedOptions().pluralCategories.sort((function(t,e){return Y[t]-Y[e]})).map((function(t){return"".concat(e.options.prepend).concat(t)})):r.numbers.map((function(r){return e.getSuffix(t,r,n)})):[]}},{key:"getSuffix",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.getRule(t,n);return r?this.shouldUseIntlApi()?"".concat(this.options.prepend).concat(r.select(e)):this.getSuffixRetroCompatible(r,e):(this.logger.warn("no plural rule found for: ".concat(t)),"")}},{key:"getSuffixRetroCompatible",value:function(t,e){var n=this,r=t.noAbs?t.plurals(e):t.plurals(Math.abs(e)),i=t.numbers[r];this.options.simplifyPluralSuffix&&2===t.numbers.length&&1===t.numbers[0]&&(2===i?i="plural":1===i&&(i=""));var o=function(){return n.options.prepend&&i.toString()?n.options.prepend+i.toString():i.toString()};return"v1"===this.options.compatibilityJSON?1===i?"":"number"===typeof i?"_plural_".concat(i.toString()):o():"v2"===this.options.compatibilityJSON||this.options.simplifyPluralSuffix&&2===t.numbers.length&&1===t.numbers[0]?o():this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString()}},{key:"shouldUseIntlApi",value:function(){return!Q.includes(this.options.compatibilityJSON)}}]),t}();function et(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function nt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?et(Object(n),!0).forEach((function(e){(0,f.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):et(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var rt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,o.Z)(this,t),this.logger=I.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||function(t){return t},this.init(e)}return(0,a.Z)(t,[{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.interpolation||(t.interpolation={escapeValue:!0});var e=t.interpolation;this.escape=void 0!==e.escape?e.escape:x,this.escapeValue=void 0===e.escapeValue||e.escapeValue,this.useRawValueToEscape=void 0!==e.useRawValueToEscape&&e.useRawValueToEscape,this.prefix=e.prefix?D(e.prefix):e.prefixEscaped||"{{",this.suffix=e.suffix?D(e.suffix):e.suffixEscaped||"}}",this.formatSeparator=e.formatSeparator?e.formatSeparator:e.formatSeparator||",",this.unescapePrefix=e.unescapeSuffix?"":e.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":e.unescapeSuffix||"",this.nestingPrefix=e.nestingPrefix?D(e.nestingPrefix):e.nestingPrefixEscaped||D("$t("),this.nestingSuffix=e.nestingSuffix?D(e.nestingSuffix):e.nestingSuffixEscaped||D(")"),this.nestingOptionsSeparator=e.nestingOptionsSeparator?e.nestingOptionsSeparator:e.nestingOptionsSeparator||",",this.maxReplaces=e.maxReplaces?e.maxReplaces:1e3,this.alwaysFormat=void 0!==e.alwaysFormat&&e.alwaysFormat,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var t="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(t,"g");var e="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(e,"g");var n="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(n,"g")}},{key:"interpolate",value:function(t,e,n,r){var i,o,a,s=this,u=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function c(t){return t.replace(/\$/g,"$$$$")}var h=function(t){if(t.indexOf(s.formatSeparator)<0){var i=O(e,u,t);return s.alwaysFormat?s.format(i,void 0,n,nt(nt(nt({},r),e),{},{interpolationkey:t})):i}var o=t.split(s.formatSeparator),a=o.shift().trim(),c=o.join(s.formatSeparator).trim();return s.format(O(e,u,a),c,n,nt(nt(nt({},r),e),{},{interpolationkey:a}))};this.resetRegExp();var l=r&&r.missingInterpolationHandler||this.options.missingInterpolationHandler,f=r&&r.interpolation&&void 0!==r.interpolation.skipOnVariables?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:function(t){return c(t)}},{regex:this.regexp,safeValue:function(t){return s.escapeValue?c(s.escape(t)):c(t)}}].forEach((function(e){for(a=0;i=e.regex.exec(t);){var n=i[1].trim();if(void 0===(o=h(n)))if("function"===typeof l){var u=l(t,i,r);o="string"===typeof u?u:""}else if(r&&r.hasOwnProperty(n))o="";else{if(f){o=i[0];continue}s.logger.warn("missed to pass in variable ".concat(n," for interpolating ").concat(t)),o=""}else"string"===typeof o||s.useRawValueToEscape||(o=E(o));var c=e.safeValue(o);if(t=t.replace(i[0],c),f?(e.regex.lastIndex+=c.length,e.regex.lastIndex-=i[0].length):e.regex.lastIndex=0,++a>=s.maxReplaces)break}})),t}},{key:"nest",value:function(t,e){var n,r,i=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=nt({},o);function s(t,e){var n=this.nestingOptionsSeparator;if(t.indexOf(n)<0)return t;var r=t.split(new RegExp("".concat(n,"[ ]*{"))),i="{".concat(r[1]);t=r[0],i=(i=this.interpolate(i,a)).replace(/'/g,'"');try{a=JSON.parse(i),e&&(a=nt(nt({},e),a))}catch(Tt){return this.logger.warn("failed parsing options string in nesting for key ".concat(t),Tt),"".concat(t).concat(n).concat(i)}return delete a.defaultValue,t}for(a.applyPostProcessor=!1,delete a.defaultValue;n=this.nestingRegexp.exec(t);){var u=[],c=!1;if(-1!==n[0].indexOf(this.formatSeparator)&&!/{.*}/.test(n[1])){var h=n[1].split(this.formatSeparator).map((function(t){return t.trim()}));n[1]=h.shift(),u=h,c=!0}if((r=e(s.call(this,n[1].trim(),a),a))&&n[0]===t&&"string"!==typeof r)return r;"string"!==typeof r&&(r=E(r)),r||(this.logger.warn("missed to resolve ".concat(n[1]," for nesting ").concat(t)),r=""),c&&(r=u.reduce((function(t,e){return i.format(t,e,o.lng,nt(nt({},o),{},{interpolationkey:n[1].trim()}))}),r.trim())),t=t.replace(n[0],r),this.regexp.lastIndex=0}return t}}]),t}();function it(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ot(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?it(Object(n),!0).forEach((function(e){(0,f.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):it(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var at=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,o.Z)(this,t),this.logger=I.create("formatter"),this.options=e,this.formats={number:function(t,e,n){return new Intl.NumberFormat(e,n).format(t)},currency:function(t,e,n){return new Intl.NumberFormat(e,ot(ot({},n),{},{style:"currency"})).format(t)},datetime:function(t,e,n){return new Intl.DateTimeFormat(e,ot({},n)).format(t)},relativetime:function(t,e,n){return new Intl.RelativeTimeFormat(e,ot({},n)).format(t,n.range||"day")},list:function(t,e,n){return new Intl.ListFormat(e,ot({},n)).format(t)}},this.init(e)}return(0,a.Z)(t,[{key:"init",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}},n=e.interpolation;this.formatSeparator=n.formatSeparator?n.formatSeparator:n.formatSeparator||","}},{key:"add",value:function(t,e){this.formats[t.toLowerCase().trim()]=e}},{key:"format",value:function(t,e,n,r){var i=this,o=e.split(this.formatSeparator).reduce((function(t,e){var o=function(t){var e=t.toLowerCase().trim(),n={};if(t.indexOf("(")>-1){var r=t.split("(");e=r[0].toLowerCase().trim();var i=r[1].substring(0,r[1].length-1);"currency"===e&&i.indexOf(":")<0?n.currency||(n.currency=i.trim()):"relativetime"===e&&i.indexOf(":")<0?n.range||(n.range=i.trim()):i.split(";").forEach((function(t){if(t){var e=v(t.split(":")),r=e[0],i=e.slice(1).join(":");n[r.trim()]||(n[r.trim()]=i.trim()),"false"===i.trim()&&(n[r.trim()]=!1),"true"===i.trim()&&(n[r.trim()]=!0),isNaN(i.trim())||(n[r.trim()]=parseInt(i.trim(),10))}}))}return{formatName:e,formatOptions:n}}(e),a=o.formatName,s=o.formatOptions;if(i.formats[a]){var u=t;try{var c=r&&r.formatParams&&r.formatParams[r.interpolationkey]||{},h=c.locale||c.lng||r.locale||r.lng||n;u=i.formats[a](t,h,ot(ot(ot({},s),r),c))}catch(l){i.logger.warn(l)}return u}return i.logger.warn("there was no format function for ".concat(a)),t}),t);return o}}]),t}();function st(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ut(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?st(Object(n),!0).forEach((function(e){(0,f.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):st(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ct(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(Tt){return!1}}();return function(){var n,r=l(t);if(e){var i=l(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h(this,n)}}var ht=function(t){c(n,t);var e=ct(n);function n(t,r,i){var a,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return(0,o.Z)(this,n),a=e.call(this),P&&_.call(s(a)),a.backend=t,a.store=r,a.services=i,a.languageUtils=i.languageUtils,a.options=u,a.logger=I.create("backendConnector"),a.waitingReads=[],a.maxParallelReads=u.maxParallelReads||10,a.readingCalls=0,a.state={},a.queue=[],a.backend&&a.backend.init&&a.backend.init(i,u.backend,u),a}return(0,a.Z)(n,[{key:"queueLoad",value:function(t,e,n,r){var i=this,o={},a={},s={},u={};return t.forEach((function(t){var r=!0;e.forEach((function(e){var s="".concat(t,"|").concat(e);!n.reload&&i.store.hasResourceBundle(t,e)?i.state[s]=2:i.state[s]<0||(1===i.state[s]?void 0===a[s]&&(a[s]=!0):(i.state[s]=1,r=!1,void 0===a[s]&&(a[s]=!0),void 0===o[s]&&(o[s]=!0),void 0===u[e]&&(u[e]=!0)))})),r||(s[t]=!0)})),(Object.keys(o).length||Object.keys(a).length)&&this.queue.push({pending:a,pendingCount:Object.keys(a).length,loaded:{},errors:[],callback:r}),{toLoad:Object.keys(o),pending:Object.keys(a),toLoadLanguages:Object.keys(s),toLoadNamespaces:Object.keys(u)}}},{key:"loaded",value:function(t,e,n){var r=t.split("|"),i=r[0],o=r[1];e&&this.emit("failedLoading",i,o,e),n&&this.store.addResourceBundle(i,o,n),this.state[t]=e?-1:2;var a={};this.queue.forEach((function(n){!function(t,e,n,r){var i=k(t,e,Object),o=i.obj,a=i.k;o[a]=o[a]||[],r&&(o[a]=o[a].concat(n)),r||o[a].push(n)}(n.loaded,[i],o),function(t,e){delete t.pending[e],t.pendingCount--}(n,t),e&&n.errors.push(e),0!==n.pendingCount||n.done||(Object.keys(n.loaded).forEach((function(t){a[t]||(a[t]={});var e=Object.keys(a[t]);e.length&&e.forEach((function(n){void 0!==e[n]&&(a[t][n]=!0)}))})),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())})),this.emit("loaded",a),this.queue=this.queue.filter((function(t){return!t.done}))}},{key:"read",value:function(t,e,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:350,a=arguments.length>5?arguments[5]:void 0;return t.length?this.readingCalls>=this.maxParallelReads?void this.waitingReads.push({lng:t,ns:e,fcName:n,tried:i,wait:o,callback:a}):(this.readingCalls++,this.backend[n](t,e,(function(s,u){if(s&&u&&i<5)setTimeout((function(){r.read.call(r,t,e,n,i+1,2*o,a)}),o);else{if(r.readingCalls--,r.waitingReads.length>0){var c=r.waitingReads.shift();r.read(c.lng,c.ns,c.fcName,c.tried,c.wait,c.callback)}a(s,u)}}))):a(null,{})}},{key:"prepareLoading",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();"string"===typeof t&&(t=this.languageUtils.toResolveHierarchy(t)),"string"===typeof e&&(e=[e]);var o=this.queueLoad(t,e,r,i);if(!o.toLoad.length)return o.pending.length||i(),null;o.toLoad.forEach((function(t){n.loadOne(t)}))}},{key:"load",value:function(t,e,n){this.prepareLoading(t,e,{},n)}},{key:"reload",value:function(t,e,n){this.prepareLoading(t,e,{reload:!0},n)}},{key:"loadOne",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=t.split("|"),i=r[0],o=r[1];this.read(i,o,"read",void 0,void 0,(function(r,a){r&&e.logger.warn("".concat(n,"loading namespace ").concat(o," for language ").concat(i," failed"),r),!r&&a&&e.logger.log("".concat(n,"loaded namespace ").concat(o," for language ").concat(i),a),e.loaded(t,r,a)}))}},{key:"saveMissing",value:function(t,e,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(e)?this.logger.warn('did not save key "'.concat(n,'" as the namespace "').concat(e,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!"):void 0!==n&&null!==n&&""!==n&&(this.backend&&this.backend.create&&this.backend.create(t,e,n,r,null,ut(ut({},o),{},{isUpdate:i})),t&&t[0]&&this.store.addResource(t[0],e,n,r))}}]),n}(_);function lt(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(t){var e={};if("object"===i(t[1])&&(e=t[1]),"string"===typeof t[1]&&(e.defaultValue=t[1]),"string"===typeof t[2]&&(e.tDescription=t[2]),"object"===i(t[2])||"object"===i(t[3])){var n=t[3]||t[2];Object.keys(n).forEach((function(t){e[t]=n[t]}))}return e},interpolation:{escapeValue:!0,format:function(t,e,n,r){return t},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function ft(t){return"string"===typeof t.ns&&(t.ns=[t.ns]),"string"===typeof t.fallbackLng&&(t.fallbackLng=[t.fallbackLng]),"string"===typeof t.fallbackNS&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs&&t.supportedLngs.indexOf("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),t}function pt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function dt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?pt(Object(n),!0).forEach((function(e){(0,f.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function gt(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(Tt){return!1}}();return function(){var n,r=l(t);if(e){var i=l(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h(this,n)}}function vt(){}function mt(t){Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach((function(e){"function"===typeof t[e]&&(t[e]=t[e].bind(t))}))}var yt=function(t){c(n,t);var e=gt(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;if((0,o.Z)(this,n),t=e.call(this),P&&_.call(s(t)),t.options=ft(r),t.services={},t.logger=I,t.modules={external:[]},mt(s(t)),i&&!t.isInitialized&&!r.isClone){if(!t.options.initImmediate)return t.init(r,i),h(t,s(t));setTimeout((function(){t.init(r,i)}),0)}return t}return(0,a.Z)(n,[{key:"init",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;"function"===typeof e&&(n=e,e={}),!e.defaultNS&&e.ns&&("string"===typeof e.ns?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));var r=lt();function i(t){return t?"function"===typeof t?new t:t:null}if(this.options=dt(dt(dt({},r),this.options),ft(e)),"v1"!==this.options.compatibilityAPI&&(this.options.interpolation=dt(dt({},r.interpolation),this.options.interpolation)),void 0!==e.keySeparator&&(this.options.userDefinedKeySeparator=e.keySeparator),void 0!==e.nsSeparator&&(this.options.userDefinedNsSeparator=e.nsSeparator),!this.options.isClone){var o;this.modules.logger?I.init(i(this.modules.logger),this.options):I.init(null,this.options),this.modules.formatter?o=this.modules.formatter:"undefined"!==typeof Intl&&(o=at);var a=new W(this.options);this.store=new V(this.options.resources,this.options);var s=this.services;s.logger=I,s.resourceStore=this.store,s.languageUtils=a,s.pluralResolver=new tt(a,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),!o||this.options.interpolation.format&&this.options.interpolation.format!==r.interpolation.format||(s.formatter=i(o),s.formatter.init(s,this.options),this.options.interpolation.format=s.formatter.format.bind(s.formatter)),s.interpolator=new rt(this.options),s.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},s.backendConnector=new ht(i(this.modules.backend),s.resourceStore,s,this.options),s.backendConnector.on("*",(function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];t.emit.apply(t,[e].concat(r))})),this.modules.languageDetector&&(s.languageDetector=i(this.modules.languageDetector),s.languageDetector.init(s,this.options.detection,this.options)),this.modules.i18nFormat&&(s.i18nFormat=i(this.modules.i18nFormat),s.i18nFormat.init&&s.i18nFormat.init(this)),this.translator=new z(this.services,this.options),this.translator.on("*",(function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];t.emit.apply(t,[e].concat(r))})),this.modules.external.forEach((function(e){e.init&&e.init(t)}))}if(this.format=this.options.interpolation.format,n||(n=vt),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var u=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);u.length>0&&"dev"!==u[0]&&(this.options.lng=u[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined");var c=["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"];c.forEach((function(e){t[e]=function(){var n;return(n=t.store)[e].apply(n,arguments)}}));var h=["addResource","addResources","addResourceBundle","removeResourceBundle"];h.forEach((function(e){t[e]=function(){var n;return(n=t.store)[e].apply(n,arguments),t}}));var l=T(),f=function(){var e=function(e,r){t.isInitialized&&!t.initializedStoreOnce&&t.logger.warn("init: i18next is already initialized. You should call init just once!"),t.isInitialized=!0,t.options.isClone||t.logger.log("initialized",t.options),t.emit("initialized",t.options),l.resolve(r),n(e,r)};if(t.languages&&"v1"!==t.options.compatibilityAPI&&!t.isInitialized)return e(null,t.t.bind(t));t.changeLanguage(t.options.lng,e)};return this.options.resources||!this.options.initImmediate?f():setTimeout(f,0),l}},{key:"loadResources",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:vt,r=n,i="string"===typeof t?t:this.language;if("function"===typeof t&&(r=t),!this.options.resources||this.options.partialBundledLanguages){if(i&&"cimode"===i.toLowerCase())return r();var o=[],a=function(t){t&&e.services.languageUtils.toResolveHierarchy(t).forEach((function(t){o.indexOf(t)<0&&o.push(t)}))};if(i)a(i);else{var s=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);s.forEach((function(t){return a(t)}))}this.options.preload&&this.options.preload.forEach((function(t){return a(t)})),this.services.backendConnector.load(o,this.options.ns,(function(t){t||e.resolvedLanguage||!e.language||e.setResolvedLanguage(e.language),r(t)}))}else r(null)}},{key:"reloadResources",value:function(t,e,n){var r=T();return t||(t=this.languages),e||(e=this.options.ns),n||(n=vt),this.services.backendConnector.reload(t,e,(function(t){r.resolve(),n(t)})),r}},{key:"use",value:function(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===t.type&&(this.modules.backend=t),("logger"===t.type||t.log&&t.warn&&t.error)&&(this.modules.logger=t),"languageDetector"===t.type&&(this.modules.languageDetector=t),"i18nFormat"===t.type&&(this.modules.i18nFormat=t),"postProcessor"===t.type&&q.addPostProcessor(t),"formatter"===t.type&&(this.modules.formatter=t),"3rdParty"===t.type&&this.modules.external.push(t),this}},{key:"setResolvedLanguage",value:function(t){if(t&&this.languages&&!(["cimode","dev"].indexOf(t)>-1))for(var e=0;e<this.languages.length;e++){var n=this.languages[e];if(!(["cimode","dev"].indexOf(n)>-1)&&this.store.hasLanguageSomeTranslations(n)){this.resolvedLanguage=n;break}}}},{key:"changeLanguage",value:function(t,e){var n=this;this.isLanguageChangingTo=t;var r=T();this.emit("languageChanging",t);var i=function(t){n.language=t,n.languages=n.services.languageUtils.toResolveHierarchy(t),n.resolvedLanguage=void 0,n.setResolvedLanguage(t)},o=function(o){t||o||!n.services.languageDetector||(o=[]);var a="string"===typeof o?o:n.services.languageUtils.getBestMatchFromCodes(o);a&&(n.language||i(a),n.translator.language||n.translator.changeLanguage(a),n.services.languageDetector&&n.services.languageDetector.cacheUserLanguage(a)),n.loadResources(a,(function(t){!function(t,o){o?(i(o),n.translator.changeLanguage(o),n.isLanguageChangingTo=void 0,n.emit("languageChanged",o),n.logger.log("languageChanged",o)):n.isLanguageChangingTo=void 0,r.resolve((function(){return n.t.apply(n,arguments)})),e&&e(t,(function(){return n.t.apply(n,arguments)}))}(t,a)}))};return t||!this.services.languageDetector||this.services.languageDetector.async?!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect(o):o(t):o(this.services.languageDetector.detect()),r}},{key:"getFixedT",value:function(t,e,n){var r=this,o=function t(e,o){var a;if("object"!==i(o)){for(var s=arguments.length,u=new Array(s>2?s-2:0),c=2;c<s;c++)u[c-2]=arguments[c];a=r.options.overloadTranslationOptionHandler([e,o].concat(u))}else a=dt({},o);a.lng=a.lng||t.lng,a.lngs=a.lngs||t.lngs,a.ns=a.ns||t.ns;var h=r.options.keySeparator||".",l=n?"".concat(n).concat(h).concat(e):e;return r.t(l,a)};return"string"===typeof t?o.lng=t:o.lngs=t,o.ns=e,o.keyPrefix=n,o}},{key:"t",value:function(){var t;return this.translator&&(t=this.translator).translate.apply(t,arguments)}},{key:"exists",value:function(){var t;return this.translator&&(t=this.translator).exists.apply(t,arguments)}},{key:"setDefaultNamespace",value:function(t){this.options.defaultNS=t}},{key:"hasLoadedNamespace",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var r=this.resolvedLanguage||this.languages[0],i=!!this.options&&this.options.fallbackLng,o=this.languages[this.languages.length-1];if("cimode"===r.toLowerCase())return!0;var a=function(t,n){var r=e.services.backendConnector.state["".concat(t,"|").concat(n)];return-1===r||2===r};if(n.precheck){var s=n.precheck(this,a);if(void 0!==s)return s}return!!this.hasResourceBundle(r,t)||(!(this.services.backendConnector.backend&&(!this.options.resources||this.options.partialBundledLanguages))||!(!a(r,t)||i&&!a(o,t)))}},{key:"loadNamespaces",value:function(t,e){var n=this,r=T();return this.options.ns?("string"===typeof t&&(t=[t]),t.forEach((function(t){n.options.ns.indexOf(t)<0&&n.options.ns.push(t)})),this.loadResources((function(t){r.resolve(),e&&e(t)})),r):(e&&e(),Promise.resolve())}},{key:"loadLanguages",value:function(t,e){var n=T();"string"===typeof t&&(t=[t]);var r=this.options.preload||[],i=t.filter((function(t){return r.indexOf(t)<0}));return i.length?(this.options.preload=r.concat(i),this.loadResources((function(t){n.resolve(),e&&e(t)})),n):(e&&e(),Promise.resolve())}},{key:"dir",value:function(t){if(t||(t=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!t)return"rtl";return["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"].indexOf(this.services.languageUtils.getLanguagePartFromCode(t))>-1||t.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}},{key:"cloneInstance",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:vt,i=dt(dt(dt({},this.options),e),{isClone:!0}),o=new n(i),a=["store","services","language"];return a.forEach((function(e){o[e]=t[e]})),o.services=dt({},this.services),o.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o.translator=new z(o.services,o.options),o.translator.on("*",(function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];o.emit.apply(o,[t].concat(n))})),o.init(i,r),o.translator.options=o.options,o.translator.backendConnector.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o}},{key:"toJSON",value:function(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}]),n}(_);(0,f.Z)(yt,"createInstance",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return new yt(t,e)}));var bt=yt.createInstance();bt.createInstance=yt.createInstance;bt.createInstance,bt.init,bt.loadResources,bt.reloadResources,bt.use,bt.changeLanguage,bt.getFixedT,bt.t,bt.exists,bt.setDefaultNamespace,bt.hasLoadedNamespace,bt.loadNamespaces,bt.loadLanguages;var wt=bt,It=n(68718);wt.use(It.Db).init({resources:{en:{translations:{addAnAnswer:"Add an answer",addAnswer:"Add Answer",added:"Added",addNew:"Add New",attribution:"Attribution",available:"Available",confirmPinpointDeletion:"Are you sure you want to delete this pinpoint?",confirmStoryStepDeletion:"Are you sure you want to delete this story step?",contact:"Contact",copy:"Copy",correctAnswer:"Correct answer",correctAnswerMessage:"\u2714\ufe0f Correct!",createAnExhibit:"Create an Exhibit",deleteAnswer:"Delete answer",deletePinpoint:"Delete pinpoint",duplicate:"Duplicate",duplicatedFrom:"Duplicated From",docs:"Docs",doubleClickToCreatePinpoint:"Double click on the item to create a pinpoint.",email:"hello@mnemoscene.io",empty:"Empty",enterComment:"Enter your comment here",enterQuestionOrComment:"Enter your question or comment here",features:"Features",findOutMore:"Find out more",help:"Help",urlPlaceholder:"No content formats are currently enabled",urlPlaceholderWithIIIF:"IIIF Manifest URL",urlPlaceholderWithYouTube:"YouTube URL",urlPlaceholderWithIIIFYouTube:"IIIF Manifest or YouTube URL",iiifManifestUrl:"IIIF Manifest URL",importing:"importing...",incorrectAnswerMessage:"\u274c Incorrect, please try again.",mainHeading:"Create, narrate, and share Exhibits.",next:"Next",noLabel:"No Label",pinpointUsedInQuestions:"It is used in {{val, number}} other question(s)",pleaseEnterValidURL:"Please enter a valid, unique URL",pleaseEnterValue:"Please enter a value",pleaseLimitToChars:"Please limit to {{val, number}} characters",pleaseLimitToSecondsRange:"Please limit to between {{val, number}} and {{val2, number}} seconds",previous:"Previous",quizCompleteMessage:"Congratulations! You have completed the quiz.",reorderableListItem:"Reorderable List Item",restart:"Restart",seconds:"Seconds",siteName:"Exhibit.",strapline:"Promote engagement and learning with your online digital collections.",stop:"Stop",youTubeUrl:"YouTube URL"}}},fallbackLng:"en",debug:!1,ns:["translations"],defaultNS:"translations",keySeparator:!1,interpolation:{escapeValue:!1}});var _t=n(67294);let Tt={data:""},Et=t=>"object"==typeof window?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||Tt,St=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,kt=/\/\*[^]*?\*\/|  +/g,At=/\n+/g,Nt=(t,e)=>{let n="",r="",i="";for(let o in t){let a=t[o];"@"==o[0]?"i"==o[1]?n=o+" "+a+";":r+="f"==o[1]?Nt(a,o):o+"{"+Nt(a,"k"==o[1]?"":e)+"}":"object"==typeof a?r+=Nt(a,e?e.replace(/([^,])+/g,(t=>o.replace(/(^:.*)|([^,])+/g,(e=>/&/.test(e)?e.replace(/&/g,t):t?t+" "+e:e)))):o):null!=a&&(o=/^--/.test(o)?o:o.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=Nt.p?Nt.p(o,a):o+":"+a+";")}return n+(e&&i?e+"{"+i+"}":i)+r},Ot={},Ct=t=>{if("object"==typeof t){let e="";for(let n in t)e+=n+Ct(t[n]);return e}return t},Dt=(t,e,n,r,i)=>{let o=Ct(t),a=Ot[o]||(Ot[o]=(t=>{let e=0,n=11;for(;e<t.length;)n=101*n+t.charCodeAt(e++)>>>0;return"go"+n})(o));if(!Ot[a]){let e=o!==t?t:(t=>{let e,n,r=[{}];for(;e=St.exec(t.replace(kt,""));)e[4]?r.shift():e[3]?(n=e[3].replace(At," ").trim(),r.unshift(r[0][n]=r[0][n]||{})):r[0][e[1]]=e[2].replace(At," ").trim();return r[0]})(t);Ot[a]=Nt(i?{["@keyframes "+a]:e}:e,n?"":"."+a)}return((t,e,n)=>{-1==e.data.indexOf(t)&&(e.data=n?t+e.data:e.data+t)})(Ot[a],e,r),a},Rt=(t,e,n)=>t.reduce(((t,r,i)=>{let o=e[i];if(o&&o.call){let t=o(n),e=t&&t.props&&t.props.className||/^go/.test(t)&&t;o=e?"."+e:t&&"object"==typeof t?t.props?"":Nt(t,""):!1===t?"":t}return t+r+(null==o?"":o)}),"");function xt(t){let e=this||{},n=t.call?t(e.p):t;return Dt(n.unshift?n.raw?Rt(n,[].slice.call(arguments,1),e.p):n.reduce(((t,n)=>Object.assign(t,n&&n.call?n(e.p):n)),{}):n,Et(e.target),e.g,e.o,e.k)}xt.bind({g:1});let Pt,Lt,Mt,jt=xt.bind({k:1});function Ft(t,e){let n=this||{};return function(){let r=arguments;function i(o,a){let s=Object.assign({},o),u=s.className||i.className;n.p=Object.assign({theme:Lt&&Lt()},s),n.o=/ *go\d+/.test(u),s.className=xt.apply(n,r)+(u?" "+u:""),e&&(s.ref=a);let c=t;return t[0]&&(c=s.as||t,delete s.as),Mt&&c[0]&&Mt(s),Pt(c,s)}return e?e(i):i}}function Ut(){return Ut=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ut.apply(this,arguments)}function Vt(t,e){return e||(e=t.slice(0)),t.raw=e,t}var qt,Bt=function(t,e){return function(t){return"function"===typeof t}(t)?t(e):t},Gt=function(){var t=0;return function(){return(++t).toString()}}();!function(t){t[t.ADD_TOAST=0]="ADD_TOAST",t[t.UPDATE_TOAST=1]="UPDATE_TOAST",t[t.UPSERT_TOAST=2]="UPSERT_TOAST",t[t.DISMISS_TOAST=3]="DISMISS_TOAST",t[t.REMOVE_TOAST=4]="REMOVE_TOAST",t[t.START_PAUSE=5]="START_PAUSE",t[t.END_PAUSE=6]="END_PAUSE"}(qt||(qt={}));var Kt=function t(e,n){switch(n.type){case qt.ADD_TOAST:return Ut({},e,{toasts:[n.toast].concat(e.toasts).slice(0,20)});case qt.UPDATE_TOAST:return Ut({},e,{toasts:e.toasts.map((function(t){return t.id===n.toast.id?Ut({},t,n.toast):t}))});case qt.UPSERT_TOAST:var r=n.toast;return e.toasts.find((function(t){return t.id===r.id}))?t(e,{type:qt.UPDATE_TOAST,toast:r}):t(e,{type:qt.ADD_TOAST,toast:r});case qt.DISMISS_TOAST:return Ut({},e,{toasts:e.toasts.map((function(t){return t.id===n.toastId||void 0===n.toastId?Ut({},t,{visible:!1}):t}))});case qt.REMOVE_TOAST:return void 0===n.toastId?Ut({},e,{toasts:[]}):Ut({},e,{toasts:e.toasts.filter((function(t){return t.id!==n.toastId}))});case qt.START_PAUSE:return Ut({},e,{pausedAt:n.time});case qt.END_PAUSE:var i=n.time-(e.pausedAt||0);return Ut({},e,{pausedAt:void 0,toasts:e.toasts.map((function(t){return Ut({},t,{pauseDuration:t.pauseDuration+i})}))})}},Ht=[],zt={toasts:[],pausedAt:void 0},Jt=function(t){zt=Kt(zt,t),Ht.forEach((function(t){t(zt)}))},Wt={blank:4e3,error:4e3,success:2e3,loading:3e4},Zt=function(t){return function(e,n){var r=function(t,e,n){return void 0===e&&(e="blank"),Ut({id:(null==n?void 0:n.id)||Gt(),createdAt:Date.now(),visible:!0,type:e,role:"status",ariaLive:"polite",message:t,pauseDuration:0},n)}(e,t,n);return Jt({type:qt.UPSERT_TOAST,toast:r}),r.id}},Xt=function(t,e){return Zt("blank")(t,e)};Xt.error=Zt("error"),Xt.success=Zt("success"),Xt.loading=Zt("loading"),Xt.dismiss=function(t){Jt({type:qt.DISMISS_TOAST,toastId:t}),setTimeout((function(){Jt({type:qt.REMOVE_TOAST,toastId:t})}),1e3)},Xt.remove=function(t){return Jt({type:qt.REMOVE_TOAST,toastId:t})},Xt.promise=function(t,e,n){var r=Xt.loading(e.loading,Ut({},n,null==n?void 0:n.loading));return t.then((function(t){return Xt.success(Bt(e.success,t),Ut({id:r},n,null==n?void 0:n.success)),t})).catch((function(t){Xt.error(Bt(e.error,t),Ut({id:r},n,null==n?void 0:n.error))})),t};var Qt=function(t){var e=function(t){void 0===t&&(t={});var e=(0,_t.useState)(zt),n=e[0],r=e[1];(0,_t.useEffect)((function(){return Ht.push(r),function(){var t=Ht.indexOf(r);t>-1&&Ht.splice(t,1)}}),[n]);var i=n.toasts.map((function(e){var n,r,i;return Ut({},t,t[e.type],e,{duration:e.duration||(null==(n=t[e.type])?void 0:n.duration)||(null==(r=t)?void 0:r.duration)||Wt[e.type],style:Ut({},t.style,null==(i=t[e.type])?void 0:i.style,e.style)})}));return Ut({},n,{toasts:i})}(t),n=e.toasts,r=e.pausedAt,i=n.filter((function(t){return t.visible}));(0,_t.useEffect)((function(){if(!r){var t=Date.now(),e=n.map((function(e){var n=(e.duration||0)+e.pauseDuration-(t-e.createdAt);if(!(n<0))return setTimeout((function(){return Xt.dismiss(e.id)}),n);e.visible&&Xt.dismiss(e.id)}));return function(){e.forEach((function(t){return t&&clearTimeout(t)}))}}}),[n,r]);var o=(0,_t.useMemo)((function(){return{startPause:function(){Jt({type:qt.START_PAUSE,time:Date.now()})},endPause:function(){r&&Jt({type:qt.END_PAUSE,time:Date.now()})},updateHeight:function(t,e){return Jt({type:qt.UPDATE_TOAST,toast:{id:t,height:e}})},calculateOffset:function(t,e){var n=e||{},r=n.reverseOrder,o=void 0!==r&&r,a=n.margin,s=void 0===a?8:a,u=i.findIndex((function(e){return e.id===t})),c=-1!==u?i.slice.apply(i,o?[u+1]:[0,u]).reduce((function(t,e){return t+(e.height||0)+s}),0):0;return c}}}),[i,r]);return{toasts:n,visibleToasts:i,handlers:o}};function Yt(){var t=Vt(["\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ",";\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: "," 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n\n  &:after,\n  &:before {\n    content: '';\n    animation: "," 0.15s ease-out forwards;\n    animation-delay: 150ms;\n    position: absolute;\n    border-radius: 3px;\n    opacity: 0;\n    background: ",";\n    bottom: 9px;\n    left: 4px;\n    height: 2px;\n    width: 12px;\n  }\n\n  &:before {\n    animation: "," 0.15s ease-out forwards;\n    animation-delay: 180ms;\n    transform: rotate(90deg);\n  }\n"]);return Yt=function(){return t},t}function $t(){var t=Vt(["\n  from {\n    transform: scale(0) rotate(90deg);\n\t opacity: 0;\n  }\n\n  to {\n    transform: scale(1) rotate(90deg);\n\t opacity: 1;\n  }\n"]);return $t=function(){return t},t}function te(){var t=Vt(["\n  from {\n    transform: scale(0);\n\t opacity: 0;\n  }\n\n  to {\n    transform: scale(1);\n\t opacity: 1;\n  }\n"]);return te=function(){return t},t}function ee(){var t=Vt(["\n  from {\n    transform: scale(0) rotate(45deg);\n\t opacity: 0;\n  }\n\n  to {\n    transform: scale(1) rotate(45deg);\n\t opacity: 1;\n  }\n"]);return ee=function(){return t},t}var ne=jt(ee()),re=jt(te()),ie=jt($t()),oe=Ft("div")(Yt(),(function(t){return t.primary||"#ff4b4b"}),ne,re,(function(t){return t.secondary||"#fff"}),ie);function ae(){var t=Vt(["\n  width: 12px;\n  height: 12px;\n  box-sizing: border-box;\n  border: 2px solid;\n  border-radius: 100%;\n  border-color: ",";\n  border-right-color: ",";\n  animation: "," 1s linear infinite;\n"]);return ae=function(){return t},t}function se(){var t=Vt(["\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n"]);return se=function(){return t},t}var ue=jt(se()),ce=Ft("div")(ae(),(function(t){return t.secondary||"#e0e0e0"}),(function(t){return t.primary||"#616161"}),ue);function he(){var t=Vt(["\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ",";\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: "," 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n  &:after {\n    content: '';\n    box-sizing: border-box;\n    animation: "," 0.2s ease-out forwards;\n    opacity: 0;\n    animation-delay: 200ms;\n    position: absolute;\n    border-right: 2px solid;\n    border-bottom: 2px solid;\n    border-color: ",";\n    bottom: 6px;\n    left: 6px;\n    height: 10px;\n    width: 6px;\n  }\n"]);return he=function(){return t},t}function le(){var t=Vt(["\n  0% {\n\t\theight: 0;\n\t\twidth: 0;\n\t\topacity: 0;\n  }\n\n  40% {\n\t\theight: 0;\n\t\twidth: 6px;\n\t\topacity: 1;\n  }\n\n  100% {\n    opacity: 1;\n\t\theight: 10px;\n  }\n"]);return le=function(){return t},t}function fe(){var t=Vt(["\n  from {\n    transform: scale(0) rotate(45deg);\n\t opacity: 0;\n  }\n\n  to {\n    transform: scale(1) rotate(45deg);\n\t opacity: 1;\n  }\n"]);return fe=function(){return t},t}var pe=jt(fe()),de=jt(le()),ge=Ft("div")(he(),(function(t){return t.primary||"#61d345"}),pe,de,(function(t){return t.secondary||"#fff"}));function ve(){var t=Vt(["\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-width: 20px;\n  min-height: 20px;\n"]);return ve=function(){return t},t}function me(){var t=Vt(["\n  position: absolute;\n"]);return me=function(){return t},t}var ye=Ft("div")(me()),be=Ft("div")(ve()),we=function(t){var e=t.type,n=t.theme;return"blank"===e?null:(0,_t.createElement)(be,null,(0,_t.createElement)(ce,Object.assign({},n)),"loading"!==e&&(0,_t.createElement)(ye,null,"error"===e?(0,_t.createElement)(oe,Object.assign({},n)):(0,_t.createElement)(ge,Object.assign({},n))))};function Ie(){var t=Vt(["\n  position: relative;\n  transform: scale(0.6);\n  opacity: 0.4;\n  min-width: 20px;\n  animation: "," 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n"]);return Ie=function(){return t},t}function _e(){var t=Vt(["\nfrom {\n  transform: scale(0.6);\n  opacity: 0.4;\n}\n\nto {\n  transform: scale(1);\n  opacity: 1;\n}\n"]);return _e=function(){return t},t}var Te=jt(_e()),Ee=Ft("div")(Ie(),Te);function Se(){var t=Vt(["",""]);return Se=function(){return t},t}function ke(){var t=Vt(["",""]);return ke=function(){return t},t}function Ae(){var t=Vt(["\n  display: flex;\n  justify-content: center;\n  margin: 4px 10px;\n  color: inherit;\n  flex: 1;\n"]);return Ae=function(){return t},t}function Ne(){var t=Vt(["\n  display: flex;\n  align-items: center;\n  background: #fff;\n  color: #363636;\n  line-height: 1.3;\n  will-change: transform;\n  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);\n  max-width: 350px;\n  margin: 16px;\n  pointer-events: auto;\n  padding: 8px 10px;\n  border-radius: 8px;\n"]);return Ne=function(){return t},t}var Oe=function(t){return"\n0% {transform: translate3d(0,"+-80*t+"px,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n"},Ce=function(t){return"\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,"+-130*t+"px,-1px) scale(.5); opacity:0;}\n"},De=Ft("div",_t.forwardRef)(Ne()),Re=Ft("div")(Ae()),xe=(0,_t.memo)((function(t){var e=t.toast,n=t.position,r=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,["toast","position"]),i=(0,_t.useCallback)((function(t){t&&setTimeout((function(){var e=t.getBoundingClientRect();r.onHeight(e.height)}))}),[]),o=function(t,e){var n=t.includes("top");return Ut({position:"fixed",transition:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:"translateY("+e*(n?1:-1)+"px)"},n?{top:0}:{bottom:0},t.includes("left")?{left:0}:t.includes("right")?{right:0}:{left:0,pointerEvents:"none",right:0,justifyContent:"center"})}(n,r.offset),a=null!=e&&e.height?function(t,e){var n=t.includes("top")?1:-1;return e?{animation:jt(ke(),Oe(n))+" 0.35s cubic-bezier(.21,1.02,.73,1) forwards"}:{animation:jt(Se(),Ce(n))+" 0.8s forwards cubic-bezier(.06,.71,.55,1)",pointerEvents:"none"}}(n,e.visible):{opacity:0};return(0,_t.createElement)("div",{style:Ut({display:"flex",zIndex:e.visible?9999:void 0},o)},(0,_t.createElement)(De,{ref:i,className:e.className,style:Ut({},a,e.style)},function(){var t=e.icon,n=e.type,r=e.iconTheme;return void 0!==t?"string"===typeof t?(0,_t.createElement)(Ee,null,t):t:(0,_t.createElement)(we,{theme:r,type:n})}(),(0,_t.createElement)(Re,{role:e.role,"aria-live":e.ariaLive},Bt(e.message,e))))}));!function(t,e,n,r){Nt.p=e,Pt=t,Lt=n,Mt=r}(_t.createElement);var Pe=function(t){var e=t.reverseOrder,n=t.position,r=void 0===n?"top-center":n,i=t.containerStyle,o=t.toastOptions,a=Qt(o),s=a.toasts,u=a.handlers;return(0,_t.createElement)("div",{style:Ut({position:"fixed",zIndex:9999},i),onMouseEnter:u.startPause,onMouseLeave:u.endPause},s.map((function(t){return(0,_t.createElement)(xe,{key:t.id,onHeight:function(e){return u.updateHeight(t.id,e)},toast:t,offset:u.calculateOffset(t.id,{reverseOrder:e}),position:r})})))},Le=n(16181),Me=n(57601),je=function(){return je=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},je.apply(this,arguments)};var Fe=function(t){return{loading:void 0===t||null===t,value:t}},Ue=function(t){var e=t?t():void 0,n=(0,_t.useReducer)((function(t,e){switch(e.type){case"error":return je({},t,{error:e.error,loading:!1,value:void 0});case"reset":return Fe(e.defaultValue);case"value":return je({},t,{error:void 0,loading:!1,value:e.value});default:return t}}),Fe(e)),r=n[0],i=n[1],o=function(){var e=t?t():void 0;i({type:"reset",defaultValue:e})},a=function(t){i({type:"error",error:t})},s=function(t){i({type:"value",value:t})};return(0,_t.useMemo)((function(){return{error:r.error,loading:r.loading,reset:o,setError:a,setValue:s,value:r.value}}),[r.error,r.loading,o,a,s,r.value])};function Ve(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function qe(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(u){s=!0,i=u}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(t,e)||function(t,e){if(!t)return;if("string"===typeof t)return Ve(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ve(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Be(){var t=qe(function(t){var e=Ue((function(){return t.currentUser})),n=e.error,r=e.loading,i=e.setError,o=e.setValue,a=e.value;(0,_t.useEffect)((function(){var e=t.onAuthStateChanged(o,i);return function(){e()}}),[t]);var s=[a,r,n];return(0,_t.useMemo)((function(){return s}),s)}(Me.I8),1)[0],e=(0,_t.useState)(null),n=e[0],r=e[1];return(0,_t.useEffect)((function(){var e;t?e=Me.RZ.collection("users").doc(t.uid).onSnapshot((function(t){var e;r(null===(e=t.data())||void 0===e?void 0:e.username)})):r(null);return e}),[t]),{user:t,username:n}}function Ge(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ke(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){Ge(t,e,n[e])}))}return t}var He=function(t){var e=t.Component,n=t.pageProps,i=Be();return(0,r.jsxs)(Le.S.Provider,{value:i,children:[(0,r.jsx)(e,Ke({},n)),(0,r.jsx)(Pe,{})]})}},23886:function(t,e,n){"use strict";n.d(e,{hi:function(){return p},U$:function(){return w},JA:function(){return g},Uj:function(){return d},Ye:function(){return b},qe:function(){return v},iX:function(){return m},yv:function(){return s},lg:function(){return T},md:function(){return _},YQ:function(){return h},lz:function(){return l},sm:function(){return I},P_:function(){return f},_T:function(){return y}});var r={environment:"default",localhost:"http://localhost:3000/",defaultDuration:10,defaultBackgroundColor:"#ffffff",siteName:"Exhibit",demoSite:!0,attributionLogoEnabled:!1,environments:{default:{recaptchaSiteKey:"6LdYaL4ZAAAAAA7C28K_8dlHbFeGm7sLMDN3ga6K",demoExhibit:"b8beFUXm1uRSVAs6th1Q",site:"https://exhibit.so",uploadUrl:"",firebaseConfig:{apiKey:"AIzaSyDLucMj6GKxF3koPj3E83IpDQWOl5ADJMU",authDomain:"exhibit-11e91.firebaseapp.com",projectId:"exhibit-11e91",storageBucket:"exhibit-11e91.appspot.com",messagingSenderId:"333496384482",appId:"1:333496384482:web:e091adc79e02e0d6e057bb",measurementId:"G-LGTXH44VGZ"},itemFormats:{iiif:{enabled:!0},youTube:{enabled:!1}}},staging:{recaptchaSiteKey:"6LdYaL4ZAAAAAA7C28K_8dlHbFeGm7sLMDN3ga6K",demoExhibit:"b8beFUXm1uRSVAs6th1Q",site:"https://staging.exhibit.so",uploadUrl:"",firebaseConfig:{apiKey:"AIzaSyC3pM0EKK4NfX21KMsOU-ldkBVshdDmDkE",authDomain:"exhibit-staging-eea8b.firebaseapp.com",projectId:"exhibit-staging-eea8b",storageBucket:"exhibit-staging-eea8b.appspot.com",messagingSenderId:"42800390262",appId:"1:42800390262:web:995f90928d11097ff9bf57",measurementId:"G-B9XHV5TCNJ"},itemFormats:{iiif:{enabled:!0},youTube:{enabled:!0}}}}},i=n(34078),o=n.n(i),a=n(34155),s=!0,u="staging"===r.environment,c=u?"staging":"default";a.env.NODE_TLS_REJECT_UNAUTHORIZED="0";var h=r.environments[c].recaptchaSiteKey,l=(r.environments[c].demoExhibit,r.environments[c].site),f=r.environments[c].uploadUrl,p=s?u?o()(r.environments.staging.site,"api"):o()(r.environments.default.site,"api"):o()(r.localhost,"api"),d=r.defaultDuration,g=r.defaultBackgroundColor,v=r.environments[c].firebaseConfig,m=r.environments[c].itemFormats.iiif.enabled,y=r.environments[c].itemFormats.youTube.enabled,b=r.demoSite,w=r.attributionLogoEnabled,I=640,_=768,T=1024},57601:function(t,e,n){"use strict";n.d(e,{I8:function(){return Cg},RZ:function(){return Dg},Pc:function(){return xg},MP:function(){return Pg},Kz:function(){return Mg},AB:function(){return Lg}});var r=n(34051),i=n.n(r),o=n(26099),a="8.10.1";o.Z.registerVersion("firebase",a,"app"),o.Z.SDK_VERSION=a;var s=n(70655),u=n(30909),c={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},h=function(t){function e(n,r,i){var o=t.call(this,r)||this;return Object.setPrototypeOf(o,e.prototype),o.code=n,o.details=i,o}return(0,s.ZT)(e,t),e}(Error);var l=function(){function t(t,e){var n=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then((function(t){return n.auth=t}),(function(){})),this.messaging||e.get().then((function(t){return n.messaging=t}),(function(){}))}return t.prototype.getAuthToken=function(){return(0,s.mG)(this,void 0,void 0,(function(){var t;return(0,s.Jh)(this,(function(e){switch(e.label){case 0:if(!this.auth)return[2,void 0];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(t=e.sent())?[2,t.accessToken]:[2,void 0];case 3:return e.sent(),[2,void 0];case 4:return[2]}}))}))},t.prototype.getInstanceIdToken=function(){return(0,s.mG)(this,void 0,void 0,(function(){return(0,s.Jh)(this,(function(t){switch(t.label){case 0:if(!this.messaging||!("Notification"in self)||"granted"!==Notification.permission)return[2,void 0];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.messaging.getToken()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,void 0];case 4:return[2]}}))}))},t.prototype.getContext=function(){return(0,s.mG)(this,void 0,void 0,(function(){var t,e;return(0,s.Jh)(this,(function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return t=n.sent(),[4,this.getInstanceIdToken()];case 2:return e=n.sent(),[2,{authToken:t,instanceIdToken:e}]}}))}))},t}();function f(t,e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}var p=function(){function t(){}return t.prototype.encode=function(t){var e=this;if(null==t)return null;if(t instanceof Number&&(t=t.valueOf()),"number"===typeof t&&isFinite(t))return t;if(!0===t||!1===t)return t;if("[object String]"===Object.prototype.toString.call(t))return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map((function(t){return e.encode(t)}));if("function"===typeof t||"object"===typeof t)return f(t,(function(t){return e.encode(t)}));throw new Error("Data cannot be encoded in JSON: "+t)},t.prototype.decode=function(t){var e=this;if(null==t)return t;if(t["@type"])switch(t["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(t.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+t);return n;default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map((function(t){return e.decode(t)})):"function"===typeof t||"object"===typeof t?f(t,(function(t){return e.decode(t)})):t},t}();var d=function(){function t(t,e,n,r,i,o){var a=this;void 0===i&&(i="us-central1"),this.app_=t,this.appCheckProvider=r,this.fetchImpl=o,this.serializer=new p,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(a.deleteService())}},this.contextProvider=new l(e,n),this.cancelAllRequests=new Promise((function(t){a.deleteService=function(){return t()}}));try{var s=new URL(i);this.customDomain=s.origin,this.region="us-central1"}catch(zp){this.customDomain=null,this.region=i}}return Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),t.prototype._url=function(t){var e=this.app_.options.projectId;return null!==this.emulatorOrigin?this.emulatorOrigin+"/"+e+"/"+this.region+"/"+t:null!==this.customDomain?this.customDomain+"/"+t:"https://"+this.region+"-"+e+".cloudfunctions.net/"+t},t.prototype.useEmulator=function(t,e){this.emulatorOrigin="http://"+t+":"+e},t.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},t.prototype.httpsCallable=function(t,e){var n=this;return function(r){return n.call(t,r,e||{})}},t.prototype.postJSON=function(t,e,n){return(0,s.mG)(this,void 0,void 0,(function(){var r,i,o;return(0,s.Jh)(this,(function(a){switch(a.label){case 0:return n["Content-Type"]="application/json",[4,this.getAppCheckToken()];case 1:null!==(r=a.sent())&&(n["X-Firebase-AppCheck"]=r),a.label=2;case 2:return a.trys.push([2,4,,5]),[4,this.fetchImpl(t,{method:"POST",body:JSON.stringify(e),headers:n})];case 3:return i=a.sent(),[3,5];case 4:return a.sent(),[2,{status:0,json:null}];case 5:o=null,a.label=6;case 6:return a.trys.push([6,8,,9]),[4,i.json()];case 7:return o=a.sent(),[3,9];case 8:return a.sent(),[3,9];case 9:return[2,{status:i.status,json:o}]}}))}))},t.prototype.getAppCheckToken=function(){return(0,s.mG)(this,void 0,void 0,(function(){var t;return(0,s.Jh)(this,(function(e){switch(e.label){case 0:return(t=this.appCheckProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:return[2,e.sent().token];case 2:return[2,null]}}))}))},t.prototype.call=function(t,e,n){return(0,s.mG)(this,void 0,void 0,(function(){var r,i,o,a,u,l,f,p,d,v,m;return(0,s.Jh)(this,(function(s){switch(s.label){case 0:return r=this._url(t),e=this.serializer.encode(e),i={data:e},o={},[4,this.contextProvider.getContext()];case 1:return(a=s.sent()).authToken&&(o.Authorization="Bearer "+a.authToken),a.instanceIdToken&&(o["Firebase-Instance-ID-Token"]=a.instanceIdToken),u=n.timeout||7e4,l=function(t){var e,n=new Promise((function(n,r){e=setTimeout((function(){r(new h("deadline-exceeded","deadline-exceeded"))}),t)}));return{timer:e,promise:n}}(u),f=l.timer,p=l.promise,[4,Promise.race([g(f,this.postJSON(r,i,o)),p,g(f,this.cancelAllRequests)])];case 2:if(!(d=s.sent()))throw new h("cancelled","Firebase Functions instance was deleted.");if(v=function(t,e,n){var r=function(t){if(t>=200&&t<300)return"ok";switch(t){case 0:case 500:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(t),i=r,o=void 0;try{var a=e&&e.error;if(a){var s=a.status;if("string"===typeof s){if(!c[s])return new h("internal","internal");r=c[s],i=s}var u=a.message;"string"===typeof u&&(i=u),void 0!==(o=a.details)&&(o=n.decode(o))}}catch(zp){}return"ok"===r?null:new h(r,i,o)}(d.status,d.json,this.serializer))throw v;if(!d.json)throw new h("internal","Response is not valid JSON object.");if("undefined"===typeof(m=d.json.data)&&(m=d.json.result),"undefined"===typeof m)throw new h("internal","Response is missing data field.");return[2,{data:this.serializer.decode(m)}]}}))}))},t}();function g(t,e){return(0,s.mG)(this,void 0,void 0,(function(){var n;return(0,s.Jh)(this,(function(r){switch(r.label){case 0:return[4,e];case 1:return n=r.sent(),clearTimeout(t),[2,n]}}))}))}!function(t,e){var n={Functions:d};t.INTERNAL.registerComponent(new u.wA("functions",(function(t,n){var r=n.instanceIdentifier,i=t.getProvider("app").getImmediate(),o=t.getProvider("auth-internal"),a=t.getProvider("app-check-internal"),s=t.getProvider("messaging");return new d(i,o,s,a,r,e)}),"PUBLIC").setServiceProps(n).setMultipleInstances(!0))}(o.Z,fetch.bind(self)),o.Z.registerVersion("@firebase/functions","0.6.16"),function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)};var r=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof n.g&&n.g,t];for(var e=0;e<t.length;++e){var r=t[e];if(r&&r.Math==Math)return r}return globalThis}(this);function i(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function a(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:i(t)}}!function(t,n){if(n){var i=r;t=t.split(".");for(var o=0;o<t.length-1;o++){var a=t[o];a in i||(i[a]={}),i=i[a]}(n=n(o=i[t=t[t.length-1]]))!=o&&null!=n&&e(i,t,{configurable:!0,writable:!0,value:n})}}("Promise",(function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(n){e.reject(n)}}function n(){this.a=null}function i(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;n.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c((function(){e.g()}))}this.a.push(t)};var o=r.setTimeout;n.prototype.c=function(t){o(t,0)},n.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(k){this.f(k)}}}this.a=null},n.prototype.f=function(t){this.c((function(){throw t}))},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.m),reject:t(this.g)}},e.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.s(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.v(t):this.h(t)}},e.prototype.v=function(t){var e=void 0;try{e=t.then}catch(n){return void this.g(n)}"function"==typeof e?this.u(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)s.b(this.a[t]);this.a=null}};var s=new n;return e.prototype.s=function(t){var e=this.f();t.Ra(e.resolve,e.reject)},e.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(k){n.reject(k)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(Jn){o(Jn)}}:e}var i,o,a=new e((function(t,e){i=t,o=e}));return this.Ra(r(t,i),r(n,o)),a},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Ra=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?s.b(n):this.a.push(n)},e.resolve=i,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var r=a(t),o=r.next();!o.done;o=r.next())i(o.value).Ra(e,n)}))},e.all=function(t){var n=a(t),r=n.next();return r.done?i([]):new e((function(t,e){function o(e){return function(n){a[e]=n,0==--s&&t(a)}}var a=[],s=0;do{a.push(void 0),s++,i(r.value).Ra(o(a.length-1),e),r=n.next()}while(!r.done)}))},e}));var s=s||{},u=this||self,c=/^[\w+/_-]+[=]{0,2}$/,h=null;function l(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&c.test(t)?t:""}function f(){}function p(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function d(t){var e=p(t);return"array"==e||"object"==e&&"number"==typeof t.length}function g(t){return"function"==p(t)}function v(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function m(t){return Object.prototype.hasOwnProperty.call(t,y)&&t[y]||(t[y]=++b)}var y="closure_uid_"+(1e9*Math.random()>>>0),b=0;function w(t,e,n){return t.call.apply(t.bind,arguments)}function I(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function _(t,e,n){return(_=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?w:I).apply(null,arguments)}function T(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var E=Date.now;function S(t,e){function n(){}n.prototype=e.prototype,t.bb=e.prototype,t.prototype=new n,t.prototype.constructor=t}function A(t){return t}function N(t,e,n){this.code=D+t,this.message=e||R[t]||"",this.a=n||null}function O(t){var e=t&&t.code;return e?new N(e.substring(D.length),t.message,t.serverResponse):null}S(N,Error),N.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},N.prototype.toJSON=function(){return this.w()};var C,D="auth/",R={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},x={ld:{Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ua:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://securetoken.googleapis.com/v1/token",Xa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ua:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ua:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",$a:"https://test-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function P(t){for(var e in x)if(x[e].id===t)return{firebaseEndpoint:(t=x[e]).Ua,secureTokenEndpoint:t.$a,identityPlatformEndpoint:t.Xa};return null}function L(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(e){return!1}}function M(t){if(Error.captureStackTrace)Error.captureStackTrace(this,M);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function j(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");M.call(this,n+t[r])}function F(t,e){throw new j("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function U(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function V(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function q(){this.b=this.a=null}C=P("__EID__")?"__EID__":void 0,S(M,Error),M.prototype.name="CustomError",S(j,M),j.prototype.name="AssertionError",U.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var B=new U((function(){return new K}),(function(t){t.reset()}));function G(){var t=Ie,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function K(){this.next=this.b=this.a=null}q.prototype.add=function(t,e){var n=B.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},K.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},K.prototype.reset=function(){this.next=this.b=this.a=null};var H=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"===typeof t)return"string"!==typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},z=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"===typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};var J=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"===typeof t?t.split(""):t,a=0;a<n;a++)if(a in o){var s=o[a];e.call(void 0,s,a,t)&&(r[i++]=s)}return r},W=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"===typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},Z=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"===typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function X(t,e){return 0<=H(t,e)}function Q(t,e){var n;return(n=0<=(e=H(t,e)))&&Array.prototype.splice.call(t,e,1),n}function Y(t,e){!function(t,e){for(var n="string"===typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,(function(n,r){e.call(void 0,n,r,t)&&1==Array.prototype.splice.call(t,r,1).length&&0}))}function $(t){return Array.prototype.concat.apply([],arguments)}function tt(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var et,nt=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},rt=/&/g,it=/</g,ot=/>/g,at=/"/g,st=/'/g,ut=/\x00/g,ct=/[\x00&<>"']/;function ht(t,e){return-1!=t.indexOf(e)}function lt(t,e){return t<e?-1:t>e?1:0}t:{var ft=u.navigator;if(ft){var pt=ft.userAgent;if(pt){et=pt;break t}}et=""}function dt(t){return ht(et,t)}function gt(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function vt(t){for(var e in t)return!1;return!0}function mt(t){var e,n={};for(e in t)n[e]=t[e];return n}var yt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function bt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<yt.length;o++)n=yt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function wt(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||u).Element&&r.Location){var i=r;break t}}catch(a){}i=null}if(i&&"undefined"!=typeof i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(v(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(a){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;F("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function It(t,e){this.a=t===St&&e||"",this.b=Et}function _t(t){return t instanceof It&&t.constructor===It&&t.b===Et?t.a:(F("expected object of type Const, got '"+t+"'"),"type_error:Const")}It.prototype.ta=!0,It.prototype.sa=function(){return this.a},It.prototype.toString=function(){return"Const{"+this.a+"}"};var Tt,Et={},St={};function kt(){if(void 0===Tt){var t=null,e=u.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:A,createScript:A,createScriptURL:A})}catch(n){u.console&&u.console.error(n.message)}Tt=t}else Tt=t}return Tt}function At(t,e){this.a=e===Rt?t:""}function Nt(t){return t instanceof At&&t.constructor===At?t.a:(F("expected object of type TrustedResourceUrl, got '"+t+"' of type "+p(t)),"type_error:TrustedResourceUrl")}function Ot(t,e){var n=_t(t);if(!Dt.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(t){var e=kt();return new At(t=e?e.createScriptURL(t):t,Rt)}(t=n.replace(Ct,(function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof It?_t(t):encodeURIComponent(String(t))})))}At.prototype.ta=!0,At.prototype.sa=function(){return this.a.toString()},At.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Ct=/%{(\w+)}/g,Dt=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Rt={};function xt(t,e){this.a=e===Vt?t:""}function Pt(t){return t instanceof xt&&t.constructor===xt?t.a:(F("expected object of type SafeUrl, got '"+t+"' of type "+p(t)),"type_error:SafeUrl")}xt.prototype.ta=!0,xt.prototype.sa=function(){return this.a.toString()},xt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Lt=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Mt=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,jt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Ft(t){if(t instanceof xt)return t;if(t="object"==typeof t&&t.ta?t.sa():String(t),jt.test(t))t=new xt(t,Vt);else{var e=(t=(t=String(t)).replace(/(%0A|%0D)/g,"")).match(Mt);t=e&&Lt.test(e[1])?new xt(t,Vt):null}return t}function Ut(t){return t instanceof xt?t:(t="object"==typeof t&&t.ta?t.sa():String(t),jt.test(t)||(t="about:invalid#zClosurez"),new xt(t,Vt))}var Vt={},qt=new xt("about:invalid#zClosurez",Vt);function Bt(t,e,n){this.a=n===Gt?t:""}Bt.prototype.ta=!0,Bt.prototype.sa=function(){return this.a.toString()},Bt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Gt={};function Kt(t,e,n,r){return t=t instanceof xt?t:Ut(t),e=e||u,n=n instanceof It?_t(n):n||"",e.open(Pt(t),n,r,void 0)}function Ht(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function zt(t){return ct.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(rt,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(it,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(ot,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(at,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(st,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(ut,"&#0;"))),t}function Jt(t){return Jt[" "](t),t}Jt[" "]=f;var Wt,Zt=dt("Opera"),Xt=dt("Trident")||dt("MSIE"),Qt=dt("Edge"),Yt=Qt||Xt,$t=dt("Gecko")&&!(ht(et.toLowerCase(),"webkit")&&!dt("Edge"))&&!(dt("Trident")||dt("MSIE"))&&!dt("Edge"),te=ht(et.toLowerCase(),"webkit")&&!dt("Edge");function ee(){var t=u.document;return t?t.documentMode:void 0}t:{var ne="",re=function(){var t=et;return $t?/rv:([^\);]+)(\)|;)/.exec(t):Qt?/Edge\/([\d\.]+)/.exec(t):Xt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):te?/WebKit\/(\S+)/.exec(t):Zt?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(re&&(ne=re?re[1]:""),Xt){var ie=ee();if(null!=ie&&ie>parseFloat(ne)){Wt=String(ie);break t}}Wt=ne}var oe,ae={};function se(t){return function(t,e){var n=ae;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(){for(var e=0,n=nt(String(Wt)).split("."),r=nt(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=lt(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||lt(0==a[2].length,0==s[2].length)||lt(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e}))}if(u.document&&Xt){var ue=ee();oe=ue||(parseInt(Wt,10)||void 0)}else oe=void 0;var ce=oe;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(da){}var he=!Xt||9<=Number(ce);function le(t){var e=document;return"string"===typeof t?e.getElementById(t):t}function fe(t,e){gt(e,(function(e,n){e&&"object"==typeof e&&e.ta&&(e=e.sa()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:ge.hasOwnProperty(n)?t.setAttribute(ge[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e}))}var pe,de,ge={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function ve(t,e,n){function r(n){n&&e.appendChild("string"===typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!d(o)||v(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(v(o)){var a="function"==typeof o.item||"string"==typeof o.item;break t}if(g(o)){a="function"==typeof o.item;break t}}a=!1}z(a?tt(o):o,r)}}}function me(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function ye(t){u.setTimeout((function(){throw t}),0)}function be(t,e){de||function(){if(u.Promise&&u.Promise.resolve){var t=u.Promise.resolve(void 0);de=function(){t.then(_e)}}else de=function(){var t=_e;!g(u.setImmediate)||u.Window&&u.Window.prototype&&!dt("Edge")&&u.Window.prototype.setImmediate==u.setImmediate?(pe||(pe=function(){var t=u.MessageChannel;if("undefined"===typeof t&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!dt("Presto")&&(t=function(){var t=me(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=_((function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),"undefined"!==typeof t&&!dt("Trident")&&!dt("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).Hb;n.Hb=null,t()}},function(t){r.next={Hb:t},r=r.next,e.port2.postMessage(0)}}return function(t){u.setTimeout(t,0)}}()),pe(t)):u.setImmediate(t)}}(),we||(de(),we=!0),Ie.add(t,e)}var we=!1,Ie=new q;function _e(){for(var t;t=G();){try{t.a.call(t.b)}catch(e){ye(e)}V(B,t)}we=!1}function Te(t,e){if(this.a=Ee,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=f)try{var n=this;t.call(e,(function(t){je(n,Se,t)}),(function(t){if(!(t instanceof Ke))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(zp){}je(n,ke,t)}))}catch(r){je(this,ke,r)}}var Ee=0,Se=2,ke=3;function Ae(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Ae.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Ne=new U((function(){return new Ae}),(function(t){t.reset()}));function Oe(t,e,n){var r=Ne.get();return r.g=t,r.b=e,r.f=n,r}function Ce(t){if(t instanceof Te)return t;var e=new Te(f);return je(e,Se,t),e}function De(t){return new Te((function(e,n){n(t)}))}function Re(t,e,n){Fe(t,e,n,null)||be(T(e,t))}function xe(t){return new Te((function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Qb:!0,value:o}:{Qb:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)Re(t[o],T(i,o,!0),T(i,o,!1));else e(r)}))}function Pe(t,e){if(t.a==Ee)if(t.c){var n=t.c;if(n.b){for(var r=0,i=null,o=null,a=n.b;a&&(a.c||(r++,a.a==t&&(i=a),!(i&&1<r)));a=a.next)i||(o=a);i&&(n.a==Ee&&1==r?Pe(n,e):(o?((r=o).next==n.f&&(n.f=r),r.next=r.next.next):Ve(n),qe(n,i,ke,e)))}t.c=null}else je(t,ke,e)}function Le(t,e){t.b||t.a!=Se&&t.a!=ke||Ue(t),t.f?t.f.next=e:t.b=e,t.f=e}function Me(t,e,n,r){var i=Oe(null,null,null);return i.a=new Te((function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(k){o(k)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof Ke?o(e):t(i)}catch(k){o(k)}}:o})),i.a.c=t,Le(t,i),i.a}function je(t,e,n){t.a==Ee&&(t===n&&(e=ke,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Fe(n,t.$c,t.ad,t)||(t.i=n,t.a=e,t.c=null,Ue(t),e!=ke||n instanceof Ke||function(t,e){t.g=!0,be((function(){t.g&&Ge.call(null,e)}))}(t,n)))}function Fe(t,e,n,r){if(t instanceof Te)return Le(t,Oe(e||f,n||null,r)),!0;if(L(t))return t.then(e,n,r),!0;if(v(t))try{var i=t.then;if(g(i))return function(t,e,n,r,i){function o(t){s||(s=!0,r.call(i,t))}function a(t){s||(s=!0,n.call(i,t))}var s=!1;try{e.call(t,a,o)}catch(u){o(u)}}(t,i,e,n,r),!0}catch(o){return n.call(r,o),!0}return!1}function Ue(t){t.h||(t.h=!0,be(t.gc,t))}function Ve(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function qe(t,e,n,r){if(n==ke&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Be(e,n,r);else try{e.c?e.g.call(e.f):Be(e,n,r)}catch(zp){Ge.call(null,zp)}V(Ne,e)}function Be(t,e,n){e==Se?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}Te.prototype.then=function(t,e,n){return Me(this,g(t)?t:null,g(e)?e:null,n)},Te.prototype.$goog_Thenable=!0,(t=Te.prototype).oa=function(t,e){return(t=Oe(t,t,e)).c=!0,Le(this,t),this},t.o=function(t,e){return Me(this,null,t,e)},t.cancel=function(t){if(this.a==Ee){var e=new Ke(t);be((function(){Pe(this,e)}),this)}},t.$c=function(t){this.a=Ee,je(this,Se,t)},t.ad=function(t){this.a=Ee,je(this,ke,t)},t.gc=function(){for(var t;t=Ve(this);)qe(this,t,this.a,this.i);this.h=!1};var Ge=ye;function Ke(t){M.call(this,t)}function He(){0!=ze&&(Je[m(this)]=this),this.ya=this.ya,this.pa=this.pa}S(Ke,M),Ke.prototype.name="cancel";var ze=0,Je={};function We(t){if(!t.ya&&(t.ya=!0,t.Da(),0!=ze)){var e=m(t);if(0!=ze&&t.pa&&0<t.pa.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete Je[e]}}He.prototype.ya=!1,He.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var Ze=Object.freeze||function(t){return t},Xe=!Xt||9<=Number(ce),Qe=Xt&&!se("9"),Ye=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{u.addEventListener("test",f,e),u.removeEventListener("test",f,e)}catch(n){}return t}();function $e(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function tn(t,e){if($e.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if($t){t:{try{Jt(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"===typeof t.pointerType?t.pointerType:en[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}$e.prototype.preventDefault=function(){this.defaultPrevented=!0},S(tn,$e);var en=Ze({2:"touch",3:"pen",4:"mouse"});tn.prototype.preventDefault=function(){tn.bb.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Qe)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}},tn.prototype.g=function(){return this.a};var nn="closure_listenable_"+(1e6*Math.random()|0),rn=0;function on(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Wa=i,this.key=++rn,this.wa=this.Qa=!1}function an(t){t.wa=!0,t.listener=null,t.proxy=null,t.src=null,t.Wa=null}function sn(t){this.src=t,this.a={},this.b=0}function un(t,e){var n=e.type;n in t.a&&Q(t.a[n],e)&&(an(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function cn(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.wa&&o.listener==e&&o.capture==!!n&&o.Wa==r)return i}return-1}sn.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=cn(t,e,r,i);return-1<a?(e=t[a],n||(e.Qa=!1)):((e=new on(e,this.src,o,!!r,i)).Qa=n,t.push(e)),e};var hn="closure_lm_"+(1e6*Math.random()|0),ln={};function fn(t,e,n,r,i){if(r&&r.once)dn(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)fn(t,e[o],n,r,i);else n=Tn(n),t&&t[nn]?Sn(t,e,n,v(r)?!!r.capture:!!r,i):pn(t,e,n,!1,r,i)}function pn(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=v(i)?!!i.capture:!!i,s=In(t);if(s||(t[hn]=s=new sn(t)),!(n=s.add(e,n,r,a,o)).proxy){if(r=function(){var t=wn,e=Xe?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Ye||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(mn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}0}}function dn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)dn(t,e[o],n,r,i);else n=Tn(n),t&&t[nn]?kn(t,e,n,v(r)?!!r.capture:!!r,i):pn(t,e,n,!0,r,i)}function gn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)gn(t,e[o],n,r,i);else r=v(r)?!!r.capture:!!r,n=Tn(n),t&&t[nn]?(t=t.v,(e=String(e).toString())in t.a&&(-1<(n=cn(o=t.a[e],n,r,i))&&(an(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=In(t))&&(e=t.a[e.toString()],t=-1,e&&(t=cn(e,n,r,i)),(n=-1<t?e[t]:null)&&vn(n))}function vn(t){if("number"!==typeof t&&t&&!t.wa){var e=t.src;if(e&&e[nn])un(e.v,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(mn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=In(e))?(un(n,t),0==n.b&&(n.src=null,e[hn]=null)):an(t)}}}function mn(t){return t in ln?ln[t]:ln[t]="on"+t}function yn(t,e,n,r){var i=!0;if((t=In(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.wa&&(o=bn(o,r),i=i&&!1!==o)}return i}function bn(t,e){var n=t.listener,r=t.Wa||t.src;return t.Qa&&vn(t),n.call(r,e)}function wn(t,e){if(t.wa)return!0;if(!Xe){if(!e)t:{e=["window","event"];for(var n=u,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new tn(r=e,this),n=!0,!(0>r.keyCode||void 0!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(a){i=!0}(i||void 0==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=yn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=yn(r[i],t,!1,e),n=n&&o}return n}return bn(t,new tn(e,this))}function In(t){return(t=t[hn])instanceof sn?t:null}var _n="__closure_events_fn_"+(1e9*Math.random()>>>0);function Tn(t){return g(t)?t:(t[_n]||(t[_n]=function(e){return t.handleEvent(e)}),t[_n])}function En(){He.call(this),this.v=new sn(this),this.bc=this,this.hb=null}function Sn(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function kn(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function An(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.wa&&a.capture==n){var s=a.listener,u=a.Wa||a.src;a.Qa&&un(t.v,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}function Nn(t,e,n){if(g(t))n&&(t=_(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=_(t.handleEvent,t)}return 2147483647<Number(e)?-1:u.setTimeout(t,e||0)}function On(t){var e=null;return new Te((function(n,r){-1==(e=Nn((function(){n(void 0)}),t))&&r(Error("Failed to schedule timer."))})).o((function(t){throw u.clearTimeout(e),t}))}function Cn(t){if(t.X&&"function"==typeof t.X)return t.X();if("string"===typeof t)return t.split("");if(d(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function Dn(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.X||"function"!=typeof t.X){if(d(t)||"string"===typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function Rn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Rn)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function xn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Pn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Pn(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Pn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}S(En,He),En.prototype[nn]=!0,En.prototype.addEventListener=function(t,e,n,r){fn(this,t,e,n,r)},En.prototype.removeEventListener=function(t,e,n,r){gn(this,t,e,n,r)},En.prototype.dispatchEvent=function(t){var e,n=this.hb;if(n)for(e=[];n;n=n.hb)e.push(n);n=this.bc;var r=t.type||t;if("string"===typeof t)t=new $e(t,n);else if(t instanceof $e)t.target=t.target||n;else{var i=t;bt(t=new $e(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var a=t.b=e[o];i=An(a,r,!0,t)&&i}if(i=An(a=t.b=n,r,!0,t)&&i,i=An(a,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=An(a=t.b=e[o],r,!1,t)&&i;return i},En.prototype.Da=function(){if(En.bb.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)an(n[r]);delete e.a[t],e.b--}}this.hb=null},(t=Rn.prototype).X=function(){xn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.Y=function(){return xn(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return Pn(this.b,t)?this.b[t]:e},t.set=function(t,e){Pn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Ln=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Mn(t,e){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,t instanceof Mn?(this.i=void 0!==e?e:t.i,jn(this,t.c),this.l=t.l,this.a=t.a,Fn(this,t.g),this.f=t.f,Un(this,or(t.b)),this.h=t.h):t&&(n=String(t).match(Ln))?(this.i=!!e,jn(this,n[1]||"",!0),this.l=Kn(n[2]||""),this.a=Kn(n[3]||"",!0),Fn(this,n[4]),this.f=Kn(n[5]||"",!0),Un(this,n[6]||"",!0),this.h=Kn(n[7]||"")):(this.i=!!e,this.b=new $n(null,this.i))}function jn(t,e,n){t.c=n?Kn(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function Fn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.g=e}else t.g=null}function Un(t,e,n){e instanceof $n?(t.b=e,function(t,e){e&&!t.f&&(tr(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(nr(this,e),ir(this,n,t))}),t)),t.f=e}(t.b,t.i)):(n||(e=Hn(e,Qn)),t.b=new $n(e,t.i))}function Vn(t,e,n){t.b.set(e,n)}function qn(t,e){return t.b.get(e)}function Bn(t){return t instanceof Mn?new Mn(t):new Mn(t,void 0)}function Gn(t,e,n,r){var i=new Mn(null,void 0);return t&&jn(i,t),e&&(i.a=e),n&&Fn(i,n),r&&(i.f=r),i}function Kn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Hn(t,e,n){return"string"===typeof t?(t=encodeURI(t).replace(e,zn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function zn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Mn.prototype.toString=function(){var t=[],e=this.c;e&&t.push(Hn(e,Wn,!0),":");var n=this.a;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(Hn(e,Wn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(Hn(n,"/"==n.charAt(0)?Xn:Zn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",Hn(n,Yn)),t.join("")},Mn.prototype.resolve=function(t){var e=new Mn(this),n=!!t.c;n?jn(e,t.c):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r=t.f;if(n)Fn(e,t.g);else if(n=!!t.f){if("/"!=r.charAt(0))if(this.a&&!this.f)r="/"+r;else{var i=e.f.lastIndexOf("/");-1!=i&&(r=e.f.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(ht(i,"./")||ht(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?e.f=r:n=""!==t.b.toString(),n?Un(e,or(t.b)):n=!!t.h,n&&(e.h=t.h),e};var Wn=/[#\/\?@]/g,Zn=/[#\?:]/g,Xn=/[#\?]/g,Qn=/[#\?@]/g,Yn=/#/g;function $n(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function tr(t){t.a||(t.a=new Rn,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function er(t){var e=Dn(t);if("undefined"==typeof e)throw Error("Keys are undefined");var n=new $n(null,void 0);t=Cn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?ir(n,i,o):n.add(i,o)}return n}function nr(t,e){tr(t),e=ar(t,e),Pn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Pn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&xn(t)))}function rr(t,e){return tr(t),e=ar(t,e),Pn(t.a.b,e)}function ir(t,e,n){nr(t,e),0<n.length&&(t.c=null,t.a.set(ar(t,e),tt(n)),t.b+=n.length)}function or(t){var e=new $n;return e.c=t.c,t.a&&(e.a=new Rn(t.a),e.b=t.b),e}function ar(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function sr(t){var e=[];return cr(new ur,t,e),e.join("")}function ur(){}function cr(t,e,n){if(null==e)n.push("null");else{if("object"==typeof e){if(Array.isArray(e)){var r=e;e=r.length,n.push("[");for(var i="",o=0;o<e;o++)n.push(i),cr(t,r[o],n),i=",";return void n.push("]")}if(!(e instanceof String||e instanceof Number||e instanceof Boolean)){for(r in n.push("{"),i="",e)Object.prototype.hasOwnProperty.call(e,r)&&("function"!=typeof(o=e[r])&&(n.push(i),fr(r,n),n.push(":"),cr(t,o,n),i=","));return void n.push("}")}e=e.valueOf()}switch(typeof e){case"string":fr(e,n);break;case"number":n.push(isFinite(e)&&!isNaN(e)?String(e):"null");break;case"boolean":n.push(String(e));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof e)}}}(t=$n.prototype).add=function(t,e){tr(this),this.c=null,t=ar(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){tr(this),this.a.forEach((function(n,r){z(n,(function(n){t.call(e,n,r,this)}),this)}),this)},t.Y=function(){tr(this);for(var t=this.a.X(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.X=function(t){tr(this);var e=[];if("string"===typeof t)rr(this,t)&&(e=$(e,this.a.get(ar(this,t))));else{t=this.a.X();for(var n=0;n<t.length;n++)e=$(e,t[n])}return e},t.set=function(t,e){return tr(this),this.c=null,rr(this,t=ar(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.X(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.X(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};var hr={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},lr=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function fr(t,e){e.push('"',t.replace(lr,(function(t){var e=hr[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),hr[t]=e),e})),'"')}function pr(){var t=xr();return Xt&&!!ce&&11==ce||/Edge\/\d+/.test(t)}function dr(){return u.window&&u.window.location.href||self&&self.location&&self.location.href||""}function gr(t,e){e=e||u.window;var n="about:blank";t&&(n=Pt(Ft(t)||qt)),e.location.href=n}function vr(t,e){var n,r=[];for(n in t)n in e?typeof t[n]!=typeof e[n]?r.push(n):"object"==typeof t[n]&&null!=t[n]&&null!=e[n]?0<vr(t[n],e[n]).length&&r.push(n):t[n]!==e[n]&&r.push(n):r.push(n);for(n in e)n in t||r.push(n);return r}function mr(t){return!!((t=(t||xr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function yr(t){t=t||u.window;try{t.close()}catch(e){}}function br(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(a in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=xr().toLowerCase(),r&&(e.target=r,ht(n,"crios/")&&(e.target="_blank")),Cr(xr())==Nr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof xt?n:Ft("undefined"!=typeof n.href?n.href:String(n))||qt,n=t.target||n.target,i=[],t)switch(a){case"width":case"height":case"top":case"left":i.push(a+"="+t[a]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(a+"="+(t[a]?1:0))}var a=i.join(",");if((dt("iPhone")&&!dt("iPod")&&!dt("iPad")||dt("iPad")||dt("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(wt(a=me(document,"A"),"HTMLAnchorElement"),e=e instanceof xt?e:Ut(e),a.href=Pt(e),a.setAttribute("target",n),t.noreferrer&&a.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),a.dispatchEvent(t),a={}):t.noreferrer?(a=Kt("",r,n,a),t=Pt(e),a&&(Yt&&ht(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),a.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+zt(t)+'">',t=new Bt(t=(r=kt())?r.createHTML(t):t,null,Gt),r=a.document)&&(r.write(function(t){return t instanceof Bt&&t.constructor===Bt?t.a:(F("expected object of type SafeHtml, got '"+t+"' of type "+p(t)),"type_error:SafeHtml")}(t)),r.close())):(a=Kt(e,r,n,a))&&t.noopener&&(a.opener=null),a)try{a.focus()}catch(s){}return a}var wr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ir=/^[^@]+@[^@]+$/;function _r(){var t=null;return new Te((function(e){"complete"==u.document.readyState?e():(t=function(){e()},dn(window,"load",t))})).o((function(e){throw gn(window,"load",t),e}))}function Tr(t){return t=t||xr(),!("file:"!==Fr()&&"ionic:"!==Fr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function Er(){var t=u.window;try{return!(!t||t==t.top)}catch(e){return!1}}function Sr(){return"undefined"!==typeof u.WorkerGlobalScope&&"function"===typeof u.importScripts}function kr(){return o.Z.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":o.Z.INTERNAL.hasOwnProperty("node")?"Node":Sr()?"Worker":"Browser"}function Ar(){var t=kr();return"ReactNative"===t||"Node"===t}var Nr="Firefox",Or="Chrome";function Cr(t){var e=t.toLowerCase();return ht(e,"opera/")||ht(e,"opr/")||ht(e,"opios/")?"Opera":ht(e,"iemobile")?"IEMobile":ht(e,"msie")||ht(e,"trident/")?"IE":ht(e,"edge/")?"Edge":ht(e,"firefox/")?Nr:ht(e,"silk/")?"Silk":ht(e,"blackberry")?"Blackberry":ht(e,"webos")?"Webos":!ht(e,"safari/")||ht(e,"chrome/")||ht(e,"crios/")||ht(e,"android")?!ht(e,"chrome/")&&!ht(e,"crios/")||ht(e,"edge/")?ht(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":Or:"Safari"}var Dr={md:"FirebaseCore-web",od:"FirebaseUI-web"};function Rr(t,e){e=e||[];var n,r=[],i={};for(n in Dr)i[Dr[n]]=!0;for(n=0;n<e.length;n++)"undefined"!==typeof i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=kr())?r=Cr(i=xr()):"Worker"===r&&(r=Cr(i=xr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function xr(){return u.navigator&&u.navigator.userAgent||""}function Pr(t,e){t=t.split("."),e=e||u;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function Lr(){try{var t=u.localStorage,e=Gr();if(t)return t.setItem(e,"1"),t.removeItem(e),!pr()||!!u.indexedDB}catch(n){return Sr()&&!!u.indexedDB}return!1}function Mr(){return(jr()||"chrome-extension:"===Fr()||Tr())&&!Ar()&&Lr()&&!Sr()}function jr(){return"http:"===Fr()||"https:"===Fr()}function Fr(){return u.location&&u.location.protocol||null}function Ur(t){return!mr(t=t||xr())&&Cr(t)!=Nr}function Vr(t){return"undefined"===typeof t?null:sr(t)}function qr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function Br(t){if(null!==t)return JSON.parse(t)}function Gr(t){return t||Math.floor(1e9*Math.random()).toString()}function Kr(t){return"Safari"!=Cr(t=t||xr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Hr(){var t=u.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function zr(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=xr(),e=kr(),this.b=mr(t)||"ReactNative"===e}function Jr(){var t=u.document;return!t||"undefined"===typeof t.visibilityState||"visible"==t.visibilityState}function Wr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(n){}return null}function Zr(){return!(!Pr("fireauth.oauthhelper",u)&&!Pr("fireauth.iframe",u))}zr.prototype.get=function(){var t=u.navigator;return!t||"boolean"!==typeof t.onLine||!jr()&&"chrome-extension:"!==Fr()&&"undefined"===typeof t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Xr,Qr={};function Yr(t){Qr[t]||(Qr[t]=!0,"undefined"!==typeof console&&"function"===typeof console.warn&&console.warn(t))}try{var $r={};Object.defineProperty($r,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty($r,"abcd",{configurable:!0,enumerable:!0,value:2}),Xr=2==$r.abcd}catch(da){Xr=!1}function ti(t,e,n){Xr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function ei(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&ti(t,n,e[n])}function ni(t){var e={};return ei(e,t),e}function ri(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)ti(e,n,ri(t[n]));return e}function ii(t){var e=t&&(t[ci]?"phone":null);if(!(e&&t&&t[ui]))throw new N("internal-error","Internal assert: invalid MultiFactorInfo object");ti(this,"uid",t[ui]),ti(this,"displayName",t[ai]||null);var n=null;t[si]&&(n=new Date(t[si]).toUTCString()),ti(this,"enrollmentTime",n),ti(this,"factorId",e)}function oi(t){try{var e=new hi(t)}catch(n){e=null}return e}ii.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var ai="displayName",si="enrolledAt",ui="mfaEnrollmentId",ci="phoneInfo";function hi(t){ii.call(this,t),ti(this,"phoneNumber",t[ci])}function li(t){var e={},n=t[gi],r=t[mi],i=t[yi];if(t=oi(t[vi]),!i||i!=pi&&i!=di&&!n||i==di&&!r||i==fi&&!t)throw Error("Invalid checkActionCode response!");i==di?(e[wi]=n||null,e[_i]=n||null,e[bi]=r):(e[wi]=r||null,e[_i]=r||null,e[bi]=n||null),e[Ii]=t||null,ti(this,Ei,i),ti(this,Ti,ri(e))}S(hi,ii),hi.prototype.w=function(){var t=hi.bb.w.call(this);return t.phoneNumber=this.phoneNumber,t};var fi="REVERT_SECOND_FACTOR_ADDITION",pi="EMAIL_SIGNIN",di="VERIFY_AND_CHANGE_EMAIL",gi="email",vi="mfaInfo",mi="newEmail",yi="requestType",bi="email",wi="fromEmail",Ii="multiFactorInfo",_i="previousEmail",Ti="data",Ei="operation";function Si(t){var e=qn(t=Bn(t),ki)||null,n=qn(t,Ai)||null,r=qn(t,Ci)||null;if(r=r&&Ri[r]||null,!e||!n||!r)throw new N("argument-error",ki+", "+Ai+"and "+Ci+" are required in a valid action code URL.");ei(this,{apiKey:e,operation:r,code:n,continueUrl:qn(t,Ni)||null,languageCode:qn(t,Oi)||null,tenantId:qn(t,Di)||null})}var ki="apiKey",Ai="oobCode",Ni="continueUrl",Oi="languageCode",Ci="mode",Di="tenantId",Ri={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:fi,signIn:pi,verifyAndChangeEmail:di,verifyEmail:"VERIFY_EMAIL"};function xi(t){try{return new Si(t)}catch(e){return null}}function Pi(t){var e=t[Ui];if("undefined"===typeof e)throw new N("missing-continue-uri");if("string"!==typeof e||"string"===typeof e&&!e.length)throw new N("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[Li];if(n&&"object"===typeof n){e=n[Bi];var r=n[Vi];if(n=n[qi],"string"===typeof e&&e.length){if(this.a=e,"undefined"!==typeof r&&"boolean"!==typeof r)throw new N("argument-error",Vi+" property must be a boolean when specified.");if(this.g=!!r,"undefined"!==typeof n&&("string"!==typeof n||"string"===typeof n&&!n.length))throw new N("argument-error",qi+" property must be a non empty string when specified.");this.b=n||null}else{if("undefined"!==typeof e)throw new N("argument-error",Bi+" property must be a non empty string when specified.");if("undefined"!==typeof r||"undefined"!==typeof n)throw new N("missing-android-pkg-name")}}else if("undefined"!==typeof n)throw new N("argument-error",Li+" property must be a non null object when specified.");if(this.f=null,(e=t[Fi])&&"object"===typeof e){if("string"===typeof(e=e[Gi])&&e.length)this.f=e;else if("undefined"!==typeof e)throw new N("argument-error",Gi+" property must be a non empty string when specified.")}else if("undefined"!==typeof e)throw new N("argument-error",Fi+" property must be a non null object when specified.");if("undefined"!==typeof(e=t[ji])&&"boolean"!==typeof e)throw new N("argument-error",ji+" property must be a boolean when specified.");if(this.c=!!e,"undefined"!==typeof(t=t[Mi])&&("string"!==typeof t||"string"===typeof t&&!t.length))throw new N("argument-error",Mi+" property must be a non empty string when specified.");this.i=t||null}var Li="android",Mi="dynamicLinkDomain",ji="handleCodeInApp",Fi="iOS",Ui="url",Vi="installApp",qi="minimumVersion",Bi="packageName",Gi="bundleId";function Ki(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var Hi=null;function zi(t){var e=[];return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=Hi[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!Hi){Hi={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Hi[o]&&(Hi[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;e(i<<2|o>>4),64!=a&&(e(o<<4&240|a>>2),64!=s&&e(a<<6&192|s))}}(t,(function(t){e.push(t)})),e}function Ji(t){var e=Zi(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.h=t,this.a=e.exp,this.i=e.sub,t=Date.now()/1e3,this.g=e.iat||(t>this.a?this.a:t),this.b=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.c=!!e.is_anonymous||"anonymous"==this.b}function Wi(t){try{return new Ji(t)}catch(e){return null}}function Zi(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{var r=zi(t);for(t=[],n=e=0;e<r.length;){var i=r[e++];if(128>i)t[n++]=String.fromCharCode(i);else if(191<i&&224>i){var o=r[e++];t[n++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&365>i){o=r[e++];var a=r[e++],s=((7&i)<<18|(63&o)<<12|(63&a)<<6|63&r[e++])-65536;t[n++]=String.fromCharCode(55296+(s>>10)),t[n++]=String.fromCharCode(56320+(1023&s))}else o=r[e++],a=r[e++],t[n++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}return JSON.parse(t.join(""))}catch(k){}return null}Ji.prototype.T=function(){return this.f},Ji.prototype.l=function(){return this.c},Ji.prototype.toString=function(){return this.h};var Xi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Qi=["client_id","response_type","scope","redirect_uri","state"],Yi={nd:{Ja:"locale",va:700,ua:600,fa:"facebook.com",Ya:Qi},pd:{Ja:null,va:500,ua:750,fa:"github.com",Ya:Qi},qd:{Ja:"hl",va:515,ua:680,fa:"google.com",Ya:Qi},wd:{Ja:"lang",va:485,ua:705,fa:"twitter.com",Ya:Xi},kd:{Ja:"locale",va:640,ua:600,fa:"apple.com",Ya:[]}};function $i(t){for(var e in Yi)if(Yi[e].fa==t)return Yi[e];return null}function to(t){var e={};e["facebook.com"]=oo,e["google.com"]=so,e["github.com"]=ao,e["twitter.com"]=uo;var n=t&&t[no];try{if(n)return e[n]?new e[n](t):new io(t);if("undefined"!==typeof t[eo])return new ro(t)}catch(r){}return null}var eo="idToken",no="providerId";function ro(t){var e=t[no];if(!e&&t[eo]){var n=Wi(t[eo]);n&&n.b&&(e=n.b)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,"undefined"!==typeof t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),ti(this,"providerId",e),ti(this,"isNewUser",n)}function io(t){ro.call(this,t),ti(this,"profile",ri((t=Br(t.rawUserInfo||"{}"))||{}))}function oo(t){if(io.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function ao(t){if(io.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");ti(this,"username",this.profile&&this.profile.login||null)}function so(t){if(io.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function uo(t){if(io.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");ti(this,"username",t.screenName||null)}function co(t){var e=Bn(t),n=qn(e,"link"),r=qn(Bn(n),"link");return e=qn(e,"deep_link_id"),qn(Bn(e),"link")||e||r||n||t}function ho(t,e){if(!t&&!e)throw new N("internal-error","Internal assert: no raw session string available");if(t&&e)throw new N("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?lo:fo}S(io,ro),S(oo,io),S(ao,io),S(so,io),S(uo,io);var lo="enroll",fo="signin";function po(){}function go(t,e){return t.then((function(t){if(t[is]){var n=Wi(t[is]);if(!n||e!=n.i)throw new N("user-mismatch");return t}throw new N("user-mismatch")})).o((function(t){throw t&&t.code&&t.code==D+"user-not-found"?new N("user-mismatch"):t}))}function vo(t,e){if(!e)throw new N("internal-error","failed to construct a credential");this.a=e,ti(this,"providerId",t),ti(this,"signInMethod",t)}function mo(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function yo(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new vo(t.providerId,t.pendingToken)}catch(e){}return null}function bo(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&ti(this,"idToken",e.idToken),e.accessToken&&ti(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&ti(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new N("internal-error","failed to construct a credential");ti(this,"accessToken",e.oauthToken),ti(this,"secret",e.oauthTokenSecret)}ti(this,"providerId",t),ti(this,"signInMethod",n)}function wo(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:er(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function Io(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new bo(t.providerId,e,t.signInMethod)}catch(n){}}return null}function _o(t,e){this.Qc=e||[],ei(this,{providerId:t,isOAuthProvider:!0}),this.Jb={},this.qb=($i(t)||{}).Ja||null,this.pb=null}function To(t){if("string"!==typeof t||0!=t.indexOf("saml."))throw new N("argument-error",'SAML provider IDs must be prefixed with "saml."');_o.call(this,t,[])}function Eo(t){_o.call(this,t,Qi),this.a=[]}function So(){Eo.call(this,"facebook.com")}function ko(t){if(!t)throw new N("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return v(t)&&(e=t.accessToken),(new So).credential({accessToken:e})}function Ao(){Eo.call(this,"github.com")}function No(t){if(!t)throw new N("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return v(t)&&(e=t.accessToken),(new Ao).credential({accessToken:e})}function Oo(){Eo.call(this,"google.com"),this.Ca("profile")}function Co(t,e){var n=t;return v(t)&&(n=t.idToken,e=t.accessToken),(new Oo).credential({idToken:n,accessToken:e})}function Do(){_o.call(this,"twitter.com",Xi)}function Ro(t,e){var n=t;if(v(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new N("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new bo("twitter.com",n,"twitter.com")}function xo(t,e,n){this.a=t,this.f=e,ti(this,"providerId","password"),ti(this,"signInMethod",n===Lo.EMAIL_LINK_SIGN_IN_METHOD?Lo.EMAIL_LINK_SIGN_IN_METHOD:Lo.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Po(t){return t&&t.email&&t.password?new xo(t.email,t.password,t.signInMethod):null}function Lo(){ei(this,{providerId:"password",isOAuthProvider:!1})}function Mo(t,e){if(!(e=jo(e)))throw new N("argument-error","Invalid email link!");return new xo(t,e.code,Lo.EMAIL_LINK_SIGN_IN_METHOD)}function jo(t){return(t=xi(t=co(t)))&&t.operation===pi?t:null}function Fo(t){if(!(t.fb&&t.eb||t.La&&t.ea))throw new N("internal-error");this.a=t,ti(this,"providerId","phone"),this.fa="phone",ti(this,"signInMethod","phone")}function Uo(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return z(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){t[n]&&(e[n]=t[n])})),new Fo(e)}return null}function Vo(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.fb,code:t.a.eb}}function qo(t){try{this.a=t||o.Z.auth()}catch(e){throw new N("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}ei(this,{providerId:"phone",isOAuthProvider:!1})}function Bo(t,e){if(!t)throw new N("missing-verification-id");if(!e)throw new N("missing-verification-code");return new Fo({fb:t,eb:e})}function Go(t){if(t.temporaryProof&&t.phoneNumber)return new Fo({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,a=t&&t.pendingToken;try{switch(e){case"google.com":return Co(o,n);case"facebook.com":return ko(n);case"github.com":return No(n);case"twitter.com":return Ro(n,r);default:return n||r||o||a?a?0==e.indexOf("saml.")?new vo(e,a):new bo(e,{pendingToken:a,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new Eo(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(s){return null}}function Ko(t){if(!t.isOAuthProvider)throw new N("invalid-oauth-provider")}function Ho(t,e,n,r,i,o,a){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=a||null,this.a=i||null,!this.g&&!this.a)throw new N("invalid-auth-event");if(this.g&&this.a)throw new N("invalid-auth-event");if(this.g&&!this.f)throw new N("invalid-auth-event")}function zo(t){return(t=t||{}).type?new Ho(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&O(t.error),t.postBody,t.tenantId):null}function Jo(){this.b=null,this.a=[]}ho.prototype.Ha=function(){return this.a?Ce(this.a):Ce(this.b)},ho.prototype.w=function(){return this.type==lo?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},po.prototype.ka=function(){},po.prototype.b=function(){},po.prototype.c=function(){},po.prototype.w=function(){},vo.prototype.ka=function(t){return ks(t,mo(this))},vo.prototype.b=function(t,e){var n=mo(this);return n.idToken=e,As(t,n)},vo.prototype.c=function(t,e){return go(Ns(t,mo(this)),e)},vo.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},bo.prototype.ka=function(t){return ks(t,wo(this))},bo.prototype.b=function(t,e){var n=wo(this);return n.idToken=e,As(t,n)},bo.prototype.c=function(t,e){return go(Ns(t,wo(this)),e)},bo.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},_o.prototype.Ka=function(t){return this.Jb=mt(t),this},S(To,_o),S(Eo,_o),Eo.prototype.Ca=function(t){return X(this.a,t)||this.a.push(t),this},Eo.prototype.Rb=function(){return tt(this.a)},Eo.prototype.credential=function(t,e){var n;if(!(n=v(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new N("argument-error","credential failed: must provide the ID token and/or the access token.");return new bo(this.providerId,n,this.providerId)},S(So,Eo),ti(So,"PROVIDER_ID","facebook.com"),ti(So,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),S(Ao,Eo),ti(Ao,"PROVIDER_ID","github.com"),ti(Ao,"GITHUB_SIGN_IN_METHOD","github.com"),S(Oo,Eo),ti(Oo,"PROVIDER_ID","google.com"),ti(Oo,"GOOGLE_SIGN_IN_METHOD","google.com"),S(Do,_o),ti(Do,"PROVIDER_ID","twitter.com"),ti(Do,"TWITTER_SIGN_IN_METHOD","twitter.com"),xo.prototype.ka=function(t){return this.signInMethod==Lo.EMAIL_LINK_SIGN_IN_METHOD?cu(t,Ms,{email:this.a,oobCode:this.f}):cu(t,iu,{email:this.a,password:this.f})},xo.prototype.b=function(t,e){return this.signInMethod==Lo.EMAIL_LINK_SIGN_IN_METHOD?cu(t,js,{idToken:e,email:this.a,oobCode:this.f}):cu(t,Xs,{idToken:e,email:this.a,password:this.f})},xo.prototype.c=function(t,e){return go(this.ka(t),e)},xo.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},ei(Lo,{PROVIDER_ID:"password"}),ei(Lo,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),ei(Lo,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Fo.prototype.ka=function(t){return t.gb(Vo(this))},Fo.prototype.b=function(t,e){var n=Vo(this);return n.idToken=e,cu(t,au,n)},Fo.prototype.c=function(t,e){var n=Vo(this);return n.operation="REAUTH",go(t=cu(t,su,n),e)},Fo.prototype.w=function(){var t={providerId:"phone"};return this.a.fb&&(t.verificationId=this.a.fb),this.a.eb&&(t.verificationCode=this.a.eb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},qo.prototype.gb=function(t,e){var n=this.a.a;return Ce(e.verify()).then((function(r){if("string"!==typeof r)throw new N("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");if("recaptcha"===e.type){var i,o=v(t)?t.session:null,a=v(t)?t.phoneNumber:t;return i=o&&o.type==lo?o.Ha().then((function(t){return function(t,e){return cu(t,Ys,e).then((function(t){return t.phoneSessionInfo.sessionInfo}))}(n,{idToken:t,phoneEnrollmentInfo:{phoneNumber:a,recaptchaToken:r}})})):o&&o.type==fo?o.Ha().then((function(e){return function(t,e){return cu(t,$s,e).then((function(t){return t.phoneResponseInfo.sessionInfo}))}(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})})):function(t,e){return cu(t,Ws,e)}(n,{phoneNumber:a,recaptchaToken:r}),i.then((function(t){return"function"===typeof e.reset&&e.reset(),t}),(function(t){throw"function"===typeof e.reset&&e.reset(),t}))}throw new N("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}))},ei(qo,{PROVIDER_ID:"phone"}),ei(qo,{PHONE_SIGN_IN_METHOD:"phone"}),Ho.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},Ho.prototype.T=function(){return this.h},Ho.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Wo,Zo=null;function Xo(t){var e="unauthorized-domain",n=void 0,r=Bn(t);t=r.a,"chrome-extension"==(r=r.c)?n=Ht("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=Ht("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",N.call(this,e,n)}function Qo(t,e,n){N.call(this,t,n),(t=e||{}).Kb&&ti(this,"email",t.Kb),t.ea&&ti(this,"phoneNumber",t.ea),t.credential&&ti(this,"credential",t.credential),t.$b&&ti(this,"tenantId",t.$b)}function Yo(t){if(t.code){var e=t.code||"";0==e.indexOf(D)&&(e=e.substring(D.length));var n={credential:Go(t),$b:t.tenantId};if(t.email)n.Kb=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new N(e,t.message||void 0);return new Qo(e,n,t.message)}return null}function $o(){}function ta(t){return t.c||(t.c=t.b())}function ea(){}function na(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(zp){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function ra(){}function ia(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=_(this.qc,this),this.a.onerror=_(this.Tb,this),this.a.onprogress=_(this.rc,this),this.a.ontimeout=_(this.vc,this)}function oa(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function aa(t,e,n){this.reset(t,e,n,void 0,void 0)}S(Xo,N),S(Qo,N),Qo.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&bt(t,e),t},Qo.prototype.toJSON=function(){return this.w()},$o.prototype.c=null,S(ea,$o),ea.prototype.a=function(){var t=na(this);return t?new ActiveXObject(t):new XMLHttpRequest},ea.prototype.b=function(){var t={};return na(this)&&(t[0]=!0,t[1]=!0),t},Wo=new ea,S(ra,$o),ra.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new ia;throw Error("Unsupported browser")},ra.prototype.b=function(){return{}},(t=ia.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,oa(this,4)},t.Tb=function(){this.status=500,this.response=this.responseText="",oa(this,4)},t.vc=function(){this.Tb()},t.rc=function(){this.status=200,oa(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},aa.prototype.a=null;function sa(t){this.f=t,this.b=this.c=this.a=null}function ua(t,e){this.name=t,this.value=e}aa.prototype.reset=function(t,e,n,r,i){"number"==typeof i||0,r||E(),delete this.a},ua.prototype.toString=function(){return this.name};var ca=new ua("SEVERE",1e3),ha=new ua("WARNING",900),la=new ua("CONFIG",700),fa=new ua("FINE",500);function pa(t){return t.c?t.c:t.a?pa(t.a):(F("Root logger has no level set."),null)}sa.prototype.log=function(t,e,n){if(t.value>=pa(this).value)for(g(e)&&(e=e()),t=new aa(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var da,ga={},va=null;function ma(t){var e;if(va||(va=new sa(""),ga[""]=va,va.c=la),!(e=ga[t])){e=new sa(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=ma(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,ga[t]=e}return e}function ya(t,e){t&&t.log(fa,e,void 0)}function ba(t){this.f=t}function wa(t){En.call(this),this.u=t,this.h=void 0,this.readyState=Ia,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=ma("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}S(ba,$o),ba.prototype.a=function(){return new wa(this.f)},ba.prototype.b=(da={},function(){return da}),S(wa,En);var Ia=0;function _a(t){t.c.read().then(t.pc.bind(t)).catch(t.Va.bind(t))}function Ta(t){t.readyState=4,t.g=null,t.c=null,t.m=null,Ea(t)}function Ea(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function Sa(t){En.call(this),this.headers=new Rn,this.D=t||null,this.c=!1,this.C=this.a=null,this.h=this.P=this.l="",this.f=this.N=this.i=this.J=!1,this.g=0,this.s=null,this.m=ka,this.u=this.S=!1}(t=wa.prototype).open=function(t,e){if(this.readyState!=Ia)throw this.abort(),Error("Error reopening a connection");this.s=t,this.f=e,this.readyState=1,Ea(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.uc.bind(this),this.Va.bind(this))},t.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,Ta(this)),this.readyState=Ia},t.uc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,Ea(this)),this.a&&(this.readyState=3,Ea(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.sc.bind(this),this.Va.bind(this)):"undefined"!==typeof u.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,_a(this)):t.text().then(this.tc.bind(this),this.Va.bind(this)))))},t.pc=function(t){if(this.a){var e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?Ta(this):Ea(this),3==this.readyState&&_a(this)}},t.tc=function(t){this.a&&(this.response=this.responseText=t,Ta(this))},t.sc=function(t){this.a&&(this.response=t,Ta(this))},t.Va=function(t){var e=this.i;e&&e.log(ha,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&Ta(this)},t.setRequestHeader=function(t,e){this.l.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.i)&&t.log(ha,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.i;return t&&t.log(ha,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(wa.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),S(Sa,En);var ka="";Sa.prototype.b=ma("goog.net.XhrIo");var Aa=/^https?$/i,Na=["POST","PUT"];function Oa(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.P=n,t.J=!1,t.c=!0,t.a=t.D?t.D.a():Wo.a(),t.C=t.D?ta(t.D):ta(Wo),t.a.onreadystatechange=_(t.Wb,t);try{ya(t.b,Fa(t,"Opening Xhr")),t.N=!0,t.a.open(n,String(e),!0),t.N=!1}catch(a){return ya(t.b,Fa(t,"Error opening Xhr: "+a.message)),void Da(t,a)}e=r||"";var o=new Rn(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(d(t)||"string"===typeof t)z(t,e,void 0);else for(var n=Dn(t),r=Cn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,(function(t,e){o.set(e,t)})),i=function(t){t:{for(var e=Ca,n=t.length,r="string"===typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"===typeof t?t.charAt(e):t[e]}(o.Y()),r=u.FormData&&e instanceof u.FormData,!X(Na,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(t,e){this.a.setRequestHeader(e,t)}),t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.S&&(t.a.withCredentials=t.S);try{La(t),0<t.g&&(t.u=function(t){return Xt&&se(9)&&"number"===typeof t.timeout&&void 0!==t.ontimeout}(t.a),ya(t.b,Fa(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.u)),t.u?(t.a.timeout=t.g,t.a.ontimeout=_(t.Ma,t)):t.s=Nn(t.Ma,t.g,t)),ya(t.b,Fa(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(a){ya(t.b,Fa(t,"Send error: "+a.message)),Da(t,a)}}function Ca(t){return"content-type"==t.toLowerCase()}function Da(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,Ra(t),Pa(t)}function Ra(t){t.J||(t.J=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function xa(t){if(t.c&&"undefined"!=typeof s)if(t.C[1]&&4==Ma(t)&&2==ja(t))ya(t.b,Fa(t,"Local request error detected and ignored"));else if(t.i&&4==Ma(t))Nn(t.Wb,0,t);else if(t.dispatchEvent("readystatechange"),4==Ma(t)){ya(t.b,Fa(t,"Request complete")),t.c=!1;try{var e,n=ja(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.l).match(Ln)[1]||null;if(!o&&u.self&&u.self.location){var a=u.self.location.protocol;o=a.substr(0,a.length-1)}i=!Aa.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var c=2<Ma(t)?t.a.statusText:""}catch(h){ya(t.b,"Can not get status: "+h.message),c=""}t.h=c+" ["+ja(t)+"]",Ra(t)}}finally{Pa(t)}}}function Pa(t,e){if(t.a){La(t);var n=t.a,r=t.C[0]?f:null;t.a=null,t.C=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(zp){(t=t.b)&&t.log(ca,"Problem encountered resetting onreadystatechange: "+zp.message,void 0)}}}function La(t){t.a&&t.u&&(t.a.ontimeout=null),t.s&&(u.clearTimeout(t.s),t.s=null)}function Ma(t){return t.a?t.a.readyState:0}function ja(t){try{return 2<Ma(t)?t.a.status:-1}catch(e){return-1}}function Fa(t,e){return e+" ["+t.P+" "+t.l+" "+ja(t)+"]"}function Ua(t){var e=Xa;this.g=[],this.u=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function Va(t,e,n){t.a=!0,t.c=n,t.f=!e,Ka(t)}function qa(t){if(t.a){if(!t.v)throw new Ha(t);t.v=!1}}function Ba(t,e,n,r){t.g.push([e,n,r]),t.a&&Ka(t)}function Ga(t){return Z(t.g,(function(t){return g(t[1])}))}function Ka(t){if(t.h&&t.a&&Ga(t)){var e=t.h,n=Wa[e];n&&(u.clearTimeout(n.a),delete Wa[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],a=i[1];if(i=i[2],o=t.f?a:o)try{var s=o.call(i||t.s,e);void 0!==s&&(t.f=t.f&&(s==e||s instanceof Error),t.c=e=s),(L(e)||"function"===typeof u.Promise&&e instanceof u.Promise)&&(r=!0,t.i=!0)}catch(c){e=c,t.f=!0,Ga(t)||(n=!0)}}t.c=e,r&&(s=_(t.m,t,!0),r=_(t.m,t,!1),e instanceof Ua?(Ba(e,s,r),e.C=!0):e.then(s,r)),n&&(e=new Ja(e),Wa[e.a]=e,t.h=e.a)}function Ha(){M.call(this)}function za(){M.call(this)}function Ja(t){this.a=u.setTimeout(_(this.c,this),0),this.b=t}(t=Sa.prototype).Ma=function(){"undefined"!=typeof s&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",ya(this.b,Fa(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(ya(this.b,Fa(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Pa(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Pa(this,!0)),Sa.bb.Da.call(this)},t.Wb=function(){this.ya||(this.N||this.i||this.f?xa(this):this.Jc())},t.Jc=function(){xa(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case ka:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(ca,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(e){return ya(this.b,"Can not get response: "+e.message),null}},Ua.prototype.cancel=function(t){if(this.a)this.c instanceof Ua&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(t=new za(this),qa(this),Va(this,!1,t))}},Ua.prototype.m=function(t,e){this.i=!1,Va(this,t,e)},Ua.prototype.then=function(t,e,n){var r,i,o=new Te((function(t,e){r=t,i=e}));return Ba(this,r,(function(t){t instanceof za?o.cancel():i(t)})),o.then(t,e,n)},Ua.prototype.$goog_Thenable=!0,S(Ha,M),Ha.prototype.message="Deferred has already fired",Ha.prototype.name="AlreadyCalledError",S(za,M),za.prototype.message="Deferred was canceled",za.prototype.name="CanceledError",Ja.prototype.c=function(){throw delete Wa[this.a],this.b};var Wa={};function Za(t){var e={},n=e.document||document,r=Nt(t).toString(),i=me(document,"SCRIPT"),o={Xb:i,Ma:void 0},a=new Ua(o),s=null,c=null!=e.timeout?e.timeout:5e3;return 0<c&&(s=window.setTimeout((function(){Qa(i,!0);var t=new ts($a,"Timeout reached for loading script "+r);qa(a),Va(a,!1,t)}),c),o.Ma=s),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Qa(i,e.xd||!1,s),qa(a),Va(a,!0,null))},i.onerror=function(){Qa(i,!0,s);var t=new ts(Ya,"Error while loading script "+r);qa(a),Va(a,!1,t)},bt(o=e.attributes||{},{type:"text/javascript",charset:"UTF-8"}),fe(i,o),function(t,e){wt(t,"HTMLScriptElement"),t.src=Nt(e),(e=t.ownerDocument&&t.ownerDocument.defaultView)&&e!=u?e=l(e.document):(null===h&&(h=l(u.document)),e=h),e&&t.setAttribute("nonce",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),a}function Xa(){if(this&&this.Xb){var t=this.Xb;t&&"SCRIPT"==t.tagName&&Qa(t,!0,this.Ma)}}function Qa(t,e,n){null!=n&&u.clearTimeout(n),t.onload=f,t.onerror=f,t.onreadystatechange=f,e&&window.setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),0)}var Ya=0,$a=1;function ts(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),M.call(this,n),this.code=t}function es(t){this.f=t}function ns(t,e,n){if(this.c=t,t=e||{},this.l=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||os,this.g=mt(t.secureTokenHeaders||as),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=t.firebaseTimeout||ss,this.a=mt(t.firebaseHeaders||us),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==kr(),!(n=u.XMLHttpRequest||n&&o.Z.INTERNAL.node&&o.Z.INTERNAL.node.XMLHttpRequest)&&!Sr())throw new N("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,Sr()?this.f=new ba(self):Ar()?this.f=new es(n):this.f=new ra,this.b=null}S(ts,M),S(es,$o),es.prototype.a=function(){return new this.f},es.prototype.b=function(){return{}};var rs,is="idToken",os=new zr(3e4,6e4),as={"Content-Type":"application/x-www-form-urlencoded"},ss=new zr(3e4,6e4),us={"Content-Type":"application/json"};function cs(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function hs(t,e){e&&(t.l=ls("https://securetoken.googleapis.com/v1/token",e),t.h=ls("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=ls("https://identitytoolkit.googleapis.com/v2/",e))}function ls(t,e){return t=Bn(t),e=Bn(e.url),t.f=t.a+t.f,jn(t,e.c),t.a=e.a,Fn(t,e.g),t.toString()}function fs(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function ps(t,e,n,r,i,o,a){(function(){var t=xr();return!((t=Cr(t)!=Or?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t)&&(!Xt||!ce||9<ce)})()||Sr()?t=_(t.u,t):(rs||(rs=new Te((function(t,e){!function(t,e){if(((window.gapi||{}).client||{}).request)t();else{u[gs]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){Ba(t,null,e,void 0)}(Za(Ot(ds,{onload:gs})),(function(){e(Error("CORS_UNSUPPORTED"))}))}}(t,e)}))),t=_(t.s,t)),t(e,n,r,i,o,a)}ns.prototype.T=function(){return this.b},ns.prototype.u=function(t,e,n,r,i,o){if(Sr()&&("undefined"===typeof u.fetch||"undefined"===typeof u.Headers||"undefined"===typeof u.Request))throw new N("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var a=new Sa(this.f);if(o){a.g=Math.max(0,o);var s=setTimeout((function(){a.dispatchEvent("timeout")}),o)}Sn(a,"complete",(function(){s&&clearTimeout(s);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return ya(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(k){t=null}e&&e(t)})),kn(a,"ready",(function(){s&&clearTimeout(s),We(this)})),kn(a,"timeout",(function(){s&&clearTimeout(s),We(this),e&&e(null)})),Oa(a,t,n,r,i)};var ds=new It(St,"https://apis.google.com/js/client.js?onload=%{onload}"),gs="__fcb"+Math.floor(1e6*Math.random()).toString();function vs(t,e,n,r,i,o,a){var s=Bn(e+n);Vn(s,"key",t.c),a&&Vn(s,"cb",Date.now().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&Vn(s,c,i[c]);return new Te((function(e,n){ps(t,s.toString(),(function(t){t?t.error?n(lu(t,o||{})):e(t):n(new N("network-request-failed"))}),r,u?void 0:sr(qr(i)),t.a,t.v.get())}))}function ms(t){if("string"!==typeof(t=t.email)||!Ir.test(t))throw new N("invalid-email")}function ys(t){"email"in t&&ms(t)}function bs(t){if(!t[is]){if(t.mfaPendingCredential)throw new N("multi-factor-auth-required",null,mt(t));throw new N("internal-error")}}function ws(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new N("internal-error")}else{if(!t.sessionInfo)throw new N("missing-verification-id");if(!t.code)throw new N("missing-verification-code")}}ns.prototype.s=function(t,e,n,r,i){var o=this;rs.then((function(){window.gapi.client.setApiKey(o.c);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(a),e&&e(t)}})})).o((function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})}))},ns.prototype.Ab=function(){return cu(this,Qs,{})},ns.prototype.Cb=function(t,e){return cu(this,Zs,{idToken:t,email:e})},ns.prototype.Db=function(t,e){return cu(this,Xs,{idToken:t,password:e})};var Is={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function _s(t){if(!t.phoneVerificationInfo)throw new N("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new N("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new N("missing-verification-code")}function Ts(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new N("internal-error")}function Es(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&(rr(t=new $n(t.postBody),"nonce")&&(e.nonce=t.get("nonce")))),e}function Ss(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Yo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Yo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Yo(t)):t.errorMessage&&(e=hu(t.errorMessage)),e)throw e;bs(t)}function ks(t,e){return e.returnIdpCredential=!0,cu(t,tu,e)}function As(t,e){return e.returnIdpCredential=!0,cu(t,nu,e)}function Ns(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,cu(t,eu,e)}function Os(t){if(!t.oobCode)throw new N("invalid-action-code")}(t=ns.prototype).Eb=function(t,e){var n={idToken:t},r=[];return gt(Is,(function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),cu(this,Zs,n)},t.wb=function(t,e){return bt(t={requestType:"PASSWORD_RESET",email:t},e),cu(this,Ks,t)},t.xb=function(t,e){return bt(t={requestType:"EMAIL_SIGNIN",email:t},e),cu(this,qs,t)},t.vb=function(t,e){return bt(t={requestType:"VERIFY_EMAIL",idToken:t},e),cu(this,Bs,t)},t.Fb=function(t,e,n){return bt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),cu(this,Gs,t)},t.gb=function(t){return cu(this,ou,t)},t.ob=function(t,e){return cu(this,Js,{oobCode:t,newPassword:e})},t.Sa=function(t){return cu(this,Ds,{oobCode:t})},t.kb=function(t){return cu(this,Cs,{oobCode:t})};var Cs={endpoint:"setAccountInfo",A:Os,Z:"email",B:!0},Ds={endpoint:"resetPassword",A:Os,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new N("internal-error")},B:!0},Rs={endpoint:"signupNewUser",A:function(t){if(ms(t),!t.password)throw new N("weak-password")},G:bs,V:!0,B:!0},xs={endpoint:"createAuthUri",B:!0},Ps={endpoint:"deleteAccount",O:["idToken"]},Ls={endpoint:"setAccountInfo",O:["idToken","deleteProvider"],A:function(t){if(!Array.isArray(t.deleteProvider))throw new N("internal-error")}},Ms={endpoint:"emailLinkSignin",O:["email","oobCode"],A:ms,G:bs,V:!0,B:!0},js={endpoint:"emailLinkSignin",O:["idToken","email","oobCode"],A:ms,G:bs,V:!0},Fs={endpoint:"accounts/mfaEnrollment:finalize",O:["idToken","phoneVerificationInfo"],A:_s,G:bs,B:!0,Na:!0},Us={endpoint:"accounts/mfaSignIn:finalize",O:["mfaPendingCredential","phoneVerificationInfo"],A:_s,G:bs,B:!0,Na:!0},Vs={endpoint:"getAccountInfo"},qs={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new N("internal-error");ms(t)},Z:"email",B:!0},Bs={endpoint:"getOobConfirmationCode",O:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new N("internal-error")},Z:"email",B:!0},Gs={endpoint:"getOobConfirmationCode",O:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new N("internal-error")},Z:"email",B:!0},Ks={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new N("internal-error");ms(t)},Z:"email",B:!0},Hs={mb:!0,endpoint:"getProjectConfig",Vb:"GET"},zs={mb:!0,endpoint:"getRecaptchaParam",Vb:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new N("internal-error")}},Js={endpoint:"resetPassword",A:Os,Z:"email",B:!0},Ws={endpoint:"sendVerificationCode",O:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},Zs={endpoint:"setAccountInfo",O:["idToken"],A:ys,V:!0},Xs={endpoint:"setAccountInfo",O:["idToken"],A:function(t){if(ys(t),!t.password)throw new N("weak-password")},G:bs,V:!0},Qs={endpoint:"signupNewUser",G:bs,V:!0,B:!0},Ys={endpoint:"accounts/mfaEnrollment:start",O:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new N("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new N("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new N("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new N("internal-error")},B:!0,Na:!0},$s={endpoint:"accounts/mfaSignIn:start",O:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new N("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new N("internal-error")},B:!0,Na:!0},tu={endpoint:"verifyAssertion",A:Ts,Za:Es,G:Ss,V:!0,B:!0},eu={endpoint:"verifyAssertion",A:Ts,Za:Es,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new N("user-not-found");if(t.errorMessage)throw hu(t.errorMessage);bs(t)},V:!0,B:!0},nu={endpoint:"verifyAssertion",A:function(t){if(Ts(t),!t.idToken)throw new N("internal-error")},Za:Es,G:Ss,V:!0},ru={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new N("invalid-custom-token")},G:bs,V:!0,B:!0},iu={endpoint:"verifyPassword",A:function(t){if(ms(t),!t.password)throw new N("wrong-password")},G:bs,V:!0,B:!0},ou={endpoint:"verifyPhoneNumber",A:ws,G:bs,B:!0},au={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new N("internal-error");ws(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Yo(t);bs(t)}},su={Ib:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:ws,G:bs,B:!0},uu={endpoint:"accounts/mfaEnrollment:withdraw",O:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[is]^!!t.refreshToken)throw new N("internal-error")},B:!0,Na:!0};function cu(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(void 0===r||null===r||""===r)return!1}return!0}(n,e.O))return De(new N("internal-error"));var r,i=!!e.Na,o=e.Vb||"POST";return Ce(n).then(e.A).then((function(){return e.V&&(n.returnSecureToken=!0),e.B&&t.b&&"undefined"===typeof n.tenantId&&(n.tenantId=t.b),vs(t,i?t.i:t.h,e.endpoint,o,n,e.Ib,e.mb||!1)})).then((function(t){return r=t,e.Za?e.Za(n,r):r})).then(e.G).then((function(){if(!e.Z)return r;if(!(e.Z in r))throw new N("internal-error");return r[e.Z]}))}function hu(t){return lu({error:{errors:[{message:t}],code:400,message:t}})}function lu(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new N(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",bt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new N(r[i],e);return!e&&t&&(e=Vr(t)),new N("internal-error",e)}function fu(t){this.b=t,this.a=null,this.sb=function(t){return(vu||(vu=new Te((function(t,e){function n(){Hr(),Pr("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Hr(),e(Error("Network Error"))},timeout:du.get()})}if(Pr("gapi.iframes.Iframe"))t();else if(Pr("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();u[r]=function(){Pr("gapi.load")?n():e(Error("Network Error"))},Ce(Za(r=Ot(pu,{onload:r}))).o((function(){e(Error("Network Error"))}))}})).o((function(t){throw vu=null,t})))).then((function(){return new Te((function(e,n){Pr("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:Pr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),gu.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var pu=new It(St,"https://apis.google.com/js/api.js?onload=%{onload}"),du=new zr(3e4,6e4),gu=new zr(5e3,15e3),vu=null;function mu(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,this.g?t=Gn((t=Bn(this.g.url)).c,t.a,t.g,"/emulator/auth/iframe"):t=Gn("https",this.l,null,"/__/auth/iframe"),this.a=t,Vn(this.a,"apiKey",this.h),Vn(this.a,"appName",this.i),this.b=null,this.c=[]}function yu(t,e,n,r,i,o){this.u=t,this.s=e,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function bu(t){try{return o.Z.app(t).auth().Ga()}catch(e){return[]}}function wu(t,e,n,r,i,o){this.s=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function Iu(t){var e=dr();return function(t){return cu(t,Hs,{}).then((function(t){return t.authorizedDomains||[]}))}(t).then((function(t){t:{var n=Bn(e),r=n.c;n=n.a;for(var i=0;i<t.length;i++){var o=t[i],a=n,s=r;if(0==o.indexOf("chrome-extension://")?a=Bn(o).a==a&&"chrome-extension"==s:"http"!=s&&"https"!=s?a=!1:wr.test(o)?a=a==o:(o=o.split(".").join("\\."),a=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)),a){t=!0;break t}}t=!1}if(!t)throw new Xo(dr())}))}function _u(t){return t.m||(t.m=_r().then((function(){if(!t.u){var e=t.c,n=t.i,r=bu(t.b),i=new mu(t.s,t.g,t.b,t.f);i.f=e,i.b=n,i.c=tt(r||[]),t.u=i.toString()}t.v=new fu(t.u),function(t){if(!t.v)throw Error("IfcHandler must be initialized!");!function(t,e){t.sb.then((function(){t.a.register("authEvent",e,Pr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(t.v,(function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=zo(e.authEvent),n=0;n<t.h.length;n++)r=t.h[n](e)||r;return(n={}).status=r?"ACK":"ERROR",Ce(n)}return n.status="ERROR",Ce(n)}))}(t)}))),t.m}function Tu(t){return t.l||(t.C=t.c?Rr(t.c,bu(t.b)):null,t.l=new ns(t.g,P(t.i),t.C),t.f&&hs(t.l,t.f)),t.l}function Eu(t,e,n,r,i,o,a,s,u,c,h,l){return(t=new yu(t,e,n,r,i,l)).l=o,t.g=a,t.i=s,t.b=mt(u||null),t.f=c,t.zb(h).toString()}function Su(t){if(this.a=t||o.Z.INTERNAL.reactNative&&o.Z.INTERNAL.reactNative.AsyncStorage,!this.a)throw new N("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function ku(t){this.b=t,this.a={},this.f=_(this.c,this)}mu.prototype.toString=function(){return this.f?Vn(this.a,"v",this.f):nr(this.a.b,"v"),this.b?Vn(this.a,"eid",this.b):nr(this.a.b,"eid"),this.c.length?Vn(this.a,"fw",this.c.join(",")):nr(this.a.b,"fw"),this.a.toString()},yu.prototype.zb=function(t){return this.h=t,this},yu.prototype.toString=function(){if(this.v){var t=Bn(this.v.url);t=Gn(t.c,t.a,t.g,"/emulator/auth/handler")}else t=Gn("https",this.u,null,"/__/auth/handler");if(Vn(t,"apiKey",this.s),Vn(t,"appName",this.c),Vn(t,"authType",this.m),this.a.isOAuthProvider){var e=this.a;try{var n=o.Z.app(this.c).auth().la()}catch(u){n=null}for(var r in e.pb=n,Vn(t,"providerId",this.a.providerId),e=qr((n=this.a).Jb))e[r]=e[r].toString();r=n.Qc,e=mt(e);for(var i=0;i<r.length;i++){var a=r[i];a in e&&delete e[a]}n.qb&&n.pb&&!e[n.qb]&&(e[n.qb]=n.pb),vt(e)||Vn(t,"customParameters",Vr(e))}if("function"===typeof this.a.Rb&&((n=this.a.Rb()).length&&Vn(t,"scopes",n.join(","))),this.l?Vn(t,"redirectUrl",this.l):nr(t.b,"redirectUrl"),this.g?Vn(t,"eventId",this.g):nr(t.b,"eventId"),this.i?Vn(t,"v",this.i):nr(t.b,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!qn(t,s)&&Vn(t,s,this.b[s]);return this.h?Vn(t,"tid",this.h):nr(t.b,"tid"),this.f?Vn(t,"eid",this.f):nr(t.b,"eid"),(s=bu(this.c)).length&&Vn(t,"fw",s.join(",")),t.toString()},(t=wu.prototype).Pb=function(t,e,n){var r=new N("popup-closed-by-user"),i=new N("web-storage-unsupported"),o=this,a=!1;return this.ma().then((function(){(function(t){var e={type:"webStorageSupport"};return _u(t).then((function(){return function(t,e){return t.sb.then((function(){return new Te((function(n){t.a.send(e.type,e,n,Pr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(t.v,e)})).then((function(t){if(t&&t.length&&"undefined"!==typeof t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(t&&yr(t),e(i),a=!0)}))})).o((function(){})).then((function(){if(!a)return function(t){return new Te((function(e){return function n(){On(2e3).then((function(){if(t&&!t.closed)return n();e()}))}()}))}(t)})).then((function(){if(!a)return On(n).then((function(){e(r)}))}))},t.Yb=function(){var t=xr();return!Ur(t)&&!Kr(t)},t.Ub=function(){return!1},t.Nb=function(t,e,n,r,i,o,a,s){if(!t)return De(new N("popup-blocked"));if(a&&!Ur())return this.ma().o((function(e){yr(t),i(e)})),r(),Ce();this.a||(this.a=Iu(Tu(this)));var u=this;return this.a.then((function(){var e=u.ma().o((function(e){throw yr(t),i(e),e}));return r(),e})).then((function(){(Ko(n),a)||gr(Eu(u.s,u.g,u.b,e,n,null,o,u.c,void 0,u.i,s,u.f),t)})).o((function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t}))},t.Ob=function(t,e,n,r){this.a||(this.a=Iu(Tu(this)));var i=this;return this.a.then((function(){Ko(e),gr(Eu(i.s,i.g,i.b,t,e,dr(),n,i.c,void 0,i.i,r,i.f))})).o((function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t}))},t.ma=function(){var t=this;return _u(this).then((function(){return t.v.sb})).o((function(){throw t.a=null,new N("network-request-failed")}))},t.ac=function(){return!0},t.Ea=function(t){this.h.push(t)},t.Ta=function(t){Y(this.h,(function(e){return e==t}))},(t=Su.prototype).get=function(t){return Ce(this.a.getItem(t)).then((function(t){return t&&Br(t)}))},t.set=function(t,e){return Ce(this.a.setItem(t,Vr(e)))},t.U=function(t){return Ce(this.a.removeItem(t))},t.ca=function(){},t.ia=function(){};var Au,Nu=[];function Ou(t,e,n){vt(t.a)&&t.b.addEventListener("message",t.f),"undefined"===typeof t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function Cu(t){this.a=t}function Du(t){this.c=t,this.b=!1,this.a=[]}function Ru(t,e,n,r){var i,o,a,s,u=n||{},c=null;if(t.b)return De(Error("connection_unavailable"));var h=r?800:50,l="undefined"!==typeof MessageChannel?new MessageChannel:null;return new Te((function(n,r){l?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),l.port1.start(),a=setTimeout((function(){r(Error("unsupported_event"))}),h),o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(a),s=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===t.data.status?(clearTimeout(s),"undefined"!==typeof t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),r(Error("invalid_response"))))},c={messageChannel:l,onMessage:o},t.a.push(c),l.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[l.port2])):r(Error("connection_unavailable"))})).then((function(e){return xu(t,c),e})).o((function(e){throw xu(t,c),e}))}function xu(t,e){if(e){var n=e.messageChannel,r=e.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),Y(t.a,(function(t){return t==e}))}}function Pu(){if(!Fu())throw new N("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=u.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var t=this;Sr()&&self?(this.v=function(){var t=Sr()?self:null;if(z(Nu,(function(n){n.b==t&&(e=n)})),!e){var e=new ku(t);Nu.push(e)}return e}(),Ou(this.v,"keyChanged",(function(e,n){return Gu(t).then((function(e){return 0<e.length&&z(t.a,(function(t){t(e)})),{keyProcessed:X(e,n.key)}}))})),Ou(this.v,"ping",(function(){return Ce(["keyChanged"])}))):function(){var t=u.navigator;return t&&t.serviceWorker?Ce().then((function(){return t.serviceWorker.ready})).then((function(t){return t.active||null})).o((function(){return null})):Ce(null)}().then((function(e){(t.h=e)&&(t.g=new Du(new Cu(e)),Ru(t.g,"ping",null,!0).then((function(e){e[0].fulfilled&&X(e[0].value,"keyChanged")&&(t.s=!0)})).o((function(){})))}))}function Lu(t){return new Te((function(e,n){var r=t.m.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(e){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(e){n(e)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(r):function(t){return new Te((function(e,n){var r=t.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}}))}(t).then((function(){return Lu(t)})).then((function(t){e(t)})).o((function(t){n(t)}))}}))}function Mu(t){return t.i||(t.i=Lu(t)),t.i}function ju(t,e){var n=0;return new Te((function r(i,o){Mu(t).then(e).then(i).o((function(e){if(!(3<++n))return Mu(t).then((function(e){return e.close(),t.i=void 0,r(i,o)})).o((function(t){o(t)}));o(e)}))}))}function Fu(){try{return!!u.indexedDB}catch(da){return!1}}function Uu(t){return t.objectStore("firebaseLocalStorage")}function Vu(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function qu(t){return new Te((function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}}))}function Bu(t,e){return t.g&&t.h&&function(){var t=u.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?Ru(t.g,"keyChanged",{key:e},t.s).then((function(){})).o((function(){})):Ce()}function Gu(t){return Mu(t).then((function(t){var e=Uu(Vu(t,!1));return e.getAll?qu(e.getAll()):new Te((function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}}))})).then((function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=vr(t.c,n),t.c=n}return r}))}function Ku(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Hu(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=Ce().then((function(){if(Fu()){var t=Gr(),r="__sak"+t;return Au||(Au=new Pu),(n=Au).set(r,t).then((function(){return n.get(r)})).then((function(e){if(e!==t)throw Error("indexedDB not supported!");return n.U(r)})).then((function(){return n})).o((function(){return e.c}))}return e.c})).then((function(t){return e.type=t.type,t.ca((function(t){z(e.a,(function(e){e(t)}))})),t}))}function zu(){this.a={},this.type="inMemory"}function Ju(){if(!function(){var t="Node"==kr();if(!(t=Wu()||t&&o.Z.INTERNAL.node&&o.Z.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==kr())throw new N("internal-error","The LocalStorage compatibility library was not found.");throw new N("web-storage-unsupported")}this.a=Wu()||o.Z.INTERNAL.node.localStorage,this.type="localStorage"}function Wu(){try{var t=u.localStorage,e=Gr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function Zu(){this.type="nullStorage"}function Xu(){if(!function(){var t="Node"==kr();if(!(t=Qu()||t&&o.Z.INTERNAL.node&&o.Z.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==kr())throw new N("internal-error","The SessionStorage compatibility library was not found.");throw new N("web-storage-unsupported")}this.a=Qu()||o.Z.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Qu(){try{var t=u.sessionStorage,e=Gr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function Yu(){var t={};t.Browser=ec,t.Node=nc,t.ReactNative=rc,t.Worker=ic,this.a=t[kr()]}ku.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];z(r,(function(e){i.push(Ce().then((function(){return e(t.origin,t.data.data)})))})),xe(i).then((function(r){var i=[];z(r,(function(t){i.push({fulfilled:t.Qb,value:t.value,reason:t.reason?t.reason.message:void 0})})),z(i,(function(t){for(var e in t)"undefined"===typeof t[e]&&delete t[e]})),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})}))}},Cu.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},Du.prototype.close=function(){for(;0<this.a.length;)xu(this,this.a[0]);this.b=!0},(t=Pu.prototype).set=function(t,e){var n=this,r=!1;return ju(this,(function(e){return qu((e=Uu(Vu(e,!0))).get(t))})).then((function(i){return ju(n,(function(o){if(o=Uu(Vu(o,!0)),i)return i.value=e,qu(o.put(i));n.b++,r=!0;var a={};return a.fbase_key=t,a.value=e,qu(o.add(a))}))})).then((function(){return n.c[t]=e,Bu(n,t)})).oa((function(){r&&n.b--}))},t.get=function(t){return ju(this,(function(e){return qu(Uu(Vu(e,!1)).get(t))})).then((function(t){return t&&t.value}))},t.U=function(t){var e=this,n=!1;return ju(this,(function(r){return n=!0,e.b++,qu(Uu(Vu(r,!0)).delete(t))})).then((function(){return delete e.c[t],Bu(e,t)})).oa((function(){n&&e.b--}))},t.ca=function(t){0==this.a.length&&function(t){function e(){t.f=setTimeout((function(){t.l=Gu(t).then((function(e){0<e.length&&z(t.a,(function(t){t(e)}))})).then((function(){e()})).o((function(t){"STOP_EVENT"!=t.message&&e()}))}),800)}Ku(t),e()}(this),this.a.push(t)},t.ia=function(t){Y(this.a,(function(e){return e==t})),0==this.a.length&&Ku(this)},(t=Hu.prototype).get=function(t){return this.b.then((function(e){return e.get(t)}))},t.set=function(t,e){return this.b.then((function(n){return n.set(t,e)}))},t.U=function(t){return this.b.then((function(e){return e.U(t)}))},t.ca=function(t){this.a.push(t)},t.ia=function(t){Y(this.a,(function(e){return e==t}))},(t=zu.prototype).get=function(t){return Ce(this.a[t])},t.set=function(t,e){return this.a[t]=e,Ce()},t.U=function(t){return delete this.a[t],Ce()},t.ca=function(){},t.ia=function(){},(t=Ju.prototype).get=function(t){var e=this;return Ce().then((function(){return Br(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return Ce().then((function(){var r=Vr(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return Ce().then((function(){e.a.removeItem(t)}))},t.ca=function(t){u.window&&fn(u.window,"storage",t)},t.ia=function(t){u.window&&gn(u.window,"storage",t)},(t=Zu.prototype).get=function(){return Ce(null)},t.set=function(){return Ce()},t.U=function(){return Ce()},t.ca=function(){},t.ia=function(){},(t=Xu.prototype).get=function(t){var e=this;return Ce().then((function(){return Br(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return Ce().then((function(){var r=Vr(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return Ce().then((function(){e.a.removeItem(t)}))},t.ca=function(){},t.ia=function(){};var $u,tc,ec={F:Ju,cb:Xu},nc={F:Ju,cb:Xu},rc={F:Su,cb:Zu},ic={F:Ju,cb:Zu},oc={rd:"local",NONE:"none",td:"session"};function ac(){var t=!(Kr(xr())||!Er()),e=Ur(),n=Lr();this.m=t,this.h=e,this.l=n,this.a={},$u||($u=new Yu),t=$u;try{this.g=!pr()&&Zr()||!u.indexedDB?new t.a.F:new Hu(Sr()?new zu:new t.a.F)}catch(r){this.g=new zu,this.h=!0}try{this.i=new t.a.cb}catch(r){this.i=new zu}this.v=new zu,this.f=_(this.Zb,this),this.b={}}function sc(){return tc||(tc=new ac),tc}function uc(t,e){switch(e){case"session":return t.i;case"none":return t.v;default:return t.g}}function cc(t,e){return"firebase:"+t.name+(e?":"+e:"")}function hc(t,e,n){return n=cc(e,n),"local"==e.F&&(t.b[n]=null),uc(t,e.F).U(n)}function lc(t){t.c&&(clearInterval(t.c),t.c=null)}function fc(t){this.a=t,this.b=sc()}(t=ac.prototype).get=function(t,e){return uc(this,t.F).get(cc(t,e))},t.set=function(t,e,n){var r=cc(t,n),i=this,o=uc(this,t.F);return o.set(r,e).then((function(){return o.get(r)})).then((function(e){"local"==t.F&&(i.b[r]=e)}))},t.addListener=function(t,e,n){t=cc(t,e),this.l&&(this.b[t]=u.localStorage.getItem(t)),vt(this.a)&&(uc(this,"local").ca(this.f),this.h||(pr()||!Zr())&&u.indexedDB||!this.l||function(t){lc(t),t.c=setInterval((function(){for(var e in t.a){var n=u.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new tn({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Zb(n))}}),1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=cc(t,e),this.a[t]&&(Y(this.a[t],(function(t){return t==n})),0==this.a[t].length&&delete this.a[t]),vt(this.a)&&(uc(this,"local").ia(this.f),lc(this))},t.Zb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];"undefined"===typeof r&&(r=null);var i=u.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.nb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if("undefined"!==typeof t.a.a?uc(this,"local").ia(this.f):lc(this),this.m)if(n=u.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?u.localStorage.setItem(e,r):u.localStorage.removeItem(e);else if(this.b[e]===r&&"undefined"===typeof t.a.a)return;var o=this;n=function(){"undefined"===typeof t.a.a&&o.b[e]===u.localStorage.getItem(e)||(o.b[e]=u.localStorage.getItem(e),o.nb(e))},Xt&&ce&&10==ce&&u.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else z(t,_(this.nb,this))},t.nb=function(t){this.a[t]&&z(this.a[t],(function(t){t()}))};var pc,dc={name:"authEvent",F:"local"};function gc(){this.a=sc()}function vc(t,e){this.b=mc,this.f=u.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=u.Int32Array?new Int32Array(64):Array(64),void 0===pc&&(pc=u.Int32Array?new Int32Array(Ec):Ec),this.reset()}S(vc,(function(){this.b=-1}));for(var mc=64,yc=mc-1,bc=[],wc=0;wc<yc;wc++)bc[wc]=0;var Ic=$(128,bc);function _c(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+a|0}r=0|t.a[0],i=0|t.a[1];var s=0|t.a[2],u=0|t.a[3],c=0|t.a[4],h=0|t.a[5],l=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((a=(a=c&h^~c&l)+(0|pc[e])|0)+(0|n[e])|0)|0,o=l,l=h,h=c,c=u+a|0,u=s,s=i,i=r,r=a+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+s|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+h|0,t.a[6]=t.a[6]+l|0,t.a[7]=t.a[7]+o|0}function Tc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"===typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(_c(t),i=0);else{if(!d(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(_c(t),i=0)}}t.c=i,t.g+=n}vc.prototype.reset=function(){this.g=this.c=0,this.a=u.Int32Array?new Int32Array(this.h):tt(this.h)};var Ec=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Sc(){vc.call(this,8,kc)}S(Sc,vc);var kc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function Ac(t,e,n,r,i,o){this.v=t,this.i=e,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=e+":"+n,this.C=new gc,this.g=new fc(this.h),this.f=null,this.b=[],this.a=this.c=null}function Nc(t){return new N("invalid-cordova-configuration",t)}function Oc(t){var e=new Sc;Tc(e,t),t=[];var n=8*e.g;56>e.c?Tc(e,Ic,56-e.c):Tc(e,Ic,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(_c(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return W(t,(function(t){return 1<(t=t.toString(16)).length?t:"0"+t})).join("")}(t)}function Cc(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(r){}}function Dc(t){return t.f||(t.f=t.ma().then((function(){return new Te((function(e){t.Ea((function n(r){return e(r),t.Ta(n),!1})),function(t){function e(e){r=!0,i&&i.cancel(),Rc(t).then((function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=co(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"===typeof(o=Br(qn(o=Bn(i),"firebaseError")||null))?O(o):null)?new Ho(r.c,r.b,null,null,o,null,r.T()):new Ho(r.c,r.b,i,r.f,null,null,r.T())),i=o||n}Cc(t,i)}))}var n=new Ho("unknown",null,null,null,new N("no-auth-event")),r=!1,i=On(500).then((function(){return Rc(t).then((function(){r||Cc(t,n)}))})),o=u.handleOpenURL;u.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(Pr("BuildInfo.packageName",u).toLowerCase()+"://")&&e({url:t}),"function"===typeof o)try{o(t)}catch(n){console.error(n)}},Zo||(Zo=new Jo),function(t){var e=Zo;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"===typeof(t=Pr("universalLinks.subscribe",u))&&t(null,e.b))}(e)}(t)}))}))),t.f}function Rc(t){var e=null;return function(t){return t.b.get(dc,t.a).then((function(t){return zo(t)}))}(t.g).then((function(n){return e=n,hc((n=t.g).b,dc,n.a)})).then((function(){return e}))}function xc(t){this.a=t,this.b=sc()}(t=Ac.prototype).ma=function(){return this.Ia?this.Ia:this.Ia=(Tr(void 0)?_r().then((function(){return new Te((function(t,e){var n=u.document,r=setTimeout((function(){e(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),t()}),!1)}))})):De(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!==typeof Pr("universalLinks.subscribe",u))throw Nc("cordova-universal-links-plugin-fix is not installed");if("undefined"===typeof Pr("BuildInfo.packageName",u))throw Nc("cordova-plugin-buildinfo is not installed");if("function"!==typeof Pr("cordova.plugins.browsertab.openUrl",u))throw Nc("cordova-plugin-browsertab is not installed");if("function"!==typeof Pr("cordova.InAppBrowser.open",u))throw Nc("cordova-plugin-inappbrowser is not installed")}),(function(){throw new N("cordova-not-ready")}))},t.Pb=function(t,e){return e(new N("operation-not-supported-in-this-environment")),Ce()},t.Nb=function(){return De(new N("operation-not-supported-in-this-environment"))},t.ac=function(){return!1},t.Yb=function(){return!0},t.Ub=function(){return!0},t.Ob=function(t,e,n,r){if(this.c)return De(new N("redirect-operation-pending"));var i=this,o=u.document,a=null,s=null,c=null,h=null;return this.c=Ce().then((function(){return Ko(e),Dc(i)})).then((function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),a=new Ho(e,r,null,o,new N("no-auth-event"),null,i),s=Pr("BuildInfo.packageName",u);if("string"!==typeof s)throw new N("invalid-cordova-configuration");var c=Pr("BuildInfo.displayName",u),h={};if(xr().toLowerCase().match(/iphone|ipad|ipod/))h.ibi=s;else{if(!xr().toLowerCase().match(/android/))return De(new N("operation-not-supported-in-this-environment"));h.apn=s}c&&(h.appDisplayName=c),o=Oc(o),h.sessionId=o;var l=Eu(t.v,t.i,t.l,e,n,null,r,t.m,h,t.u,i,t.s);return t.ma().then((function(){var e=t.h;return t.C.a.set(dc,a.w(),e)})).then((function(){var e=Pr("cordova.plugins.browsertab.isAvailable",u);if("function"!==typeof e)throw new N("invalid-cordova-configuration");var n=null;e((function(e){if(e){if("function"!==typeof(n=Pr("cordova.plugins.browsertab.openUrl",u)))throw new N("invalid-cordova-configuration");n(l)}else{if("function"!==typeof(n=Pr("cordova.InAppBrowser.open",u)))throw new N("invalid-cordova-configuration");e=xr(),t.a=n(l,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,t,e,n,r)})).then((function(){return new Te((function(t,e){s=function(){var e=Pr("cordova.plugins.browsertab.close",u);return t(),"function"===typeof e&&e(),i.a&&"function"===typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(s),c=function(){a||(a=On(2e3).then((function(){e(new N("redirect-cancelled-by-user"))})))},h=function(){Jr()&&c()},o.addEventListener("resume",c,!1),xr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",h,!1)})).o((function(t){return Rc(i).then((function(){throw t}))}))})).oa((function(){c&&o.removeEventListener("resume",c,!1),h&&o.removeEventListener("visibilitychange",h,!1),a&&a.cancel(),s&&i.Ta(s),i.c=null}))},t.Ea=function(t){this.b.push(t),Dc(this).o((function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new Ho("unknown",null,null,null,new N("no-auth-event")),t(e))}))},t.Ta=function(t){Y(this.b,(function(e){return e==t}))};var Pc={name:"pendingRedirect",F:"session"};function Lc(t){return hc(t.b,Pc,t.a)}function Mc(t,e,n,r){this.i={},this.u=0,this.D=t,this.v=e,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=_(this.s,this),this.b=new Qc,this.C=new nh,this.g=new xc(Zc(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=jc(this.D,this.v,this.m,C,this.J)}function jc(t,e,n,r,i){var a=o.Z.SDK_VERSION||null;return Tr()?new Ac(t,e,n,a,r,i):new wu(t,e,n,a,r,i)}function Fc(t){t.f||(t.f=!0,t.a.Ea(t.l));var e=t.a;return t.a.ma().o((function(n){throw t.a==e&&t.reset(),n}))}function Uc(t){t.a.Yb()&&Fc(t).o((function(e){var n=new Ho("unknown",null,null,null,new N("operation-not-supported-in-this-environment"));Hc(e)&&t.s(n)})),t.a.Ub()||Yc(t.b)}function Vc(t,e){X(t.h,e)||t.h.push(e),t.f||function(t){return t.b.get(Pc,t.a).then((function(t){return"pending"==t}))}(t.g).then((function(e){e?Lc(t.g).then((function(){Fc(t).o((function(e){var n=new Ho("unknown",null,null,null,new N("operation-not-supported-in-this-environment"));Hc(e)&&t.s(n)}))})):Uc(t)})).o((function(){Uc(t)}))}function qc(t,e){Y(t.h,(function(t){return t==e}))}Mc.prototype.reset=function(){this.f=!1,this.a.Ta(this.l),this.a=jc(this.D,this.v,this.m,null,this.J),this.i={}},Mc.prototype.s=function(t){if(!t)throw new N("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Gb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=Date.now())),e=!0;break}}return Yc(this.b),e};var Bc=new zr(2e3,1e4),Gc=new zr(3e4,6e4);function Kc(t,e,n,r,i,o,a){return t.a.Nb(e,n,r,(function(){t.f||(t.f=!0,t.a.Ea(t.l))}),(function(){t.reset()}),i,o,a)}function Hc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function zc(t,e,n,r,i){var o;return function(t){return t.b.set(Pc,"pending",t.a)}(t.g).then((function(){return t.a.Ob(e,n,r,i).o((function(e){if(Hc(e))throw new N("operation-not-supported-in-this-environment");return o=e,Lc(t.g).then((function(){throw o}))})).then((function(){return t.a.ac()?new Te((function(){})):Lc(t.g).then((function(){return t.ra()})).then((function(){})).o((function(){}))}))}))}function Jc(t,e,n,r,i){return t.a.Pb(r,(function(t){e.na(n,null,t,i)}),Bc.get())}Mc.prototype.ra=function(){return this.b.ra()};var Wc={};function Zc(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function Xc(t,e,n,r){var i=Zc(e,n,r);return Wc[i]||(Wc[i]=new Mc(t,e,n,r)),Wc[i]}function Qc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Yc(t){t.g||(t.g=!0,eh(t,!1,null,null))}function $c(t){t.g&&!t.i&&eh(t,!1,null,null)}function th(t,e){if(t.b=function(){return Ce(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function eh(t,e,n,r){e?r?function(t,e){if(t.b=function(){return De(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):th(t,n):th(t,{user:null}),t.f=[],t.c=[]}function nh(){}function rh(){this.jb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.jb},set:function(t){this.jb=t},enumerable:!1})}function ih(t,e){this.a=e,ti(this,"verificationId",t)}function oh(t,e,n,r){return new qo(t).gb(e,n).then((function(t){return new ih(t,r)}))}function ah(t){var e=Zi(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new N("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");ei(this,{token:t,expirationTime:Wr(1e3*e.exp),authTime:Wr(1e3*e.auth_time),issuedAtTime:Wr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function sh(t,e,n){var r=e&&e[ch];if(!r)throw new N("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=mt(e),this.g=n,this.c=new ho(null,r),this.b=[];var i=this;z(e[uh]||[],(function(t){(t=oi(t))&&i.b.push(t)})),ti(this,"auth",this.a),ti(this,"session",this.c),ti(this,"hints",this.b)}Qc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Qc.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(eh(this,!0,null,t.a),Ce()):e.Fa(n,r)?function(t,e,n){n=n.Fa(e.c,e.b);var r=e.g,i=e.f,o=e.i,a=e.T(),s=!!e.c.match(/Redirect$/);n(r,i,a,o).then((function(e){eh(t,s,e,null)})).o((function(e){eh(t,s,null,e)}))}(this,t,e):De(new N("invalid-auth-event")):(eh(this,!1,null,null),Ce())}else De(new N("invalid-auth-event"))},Qc.prototype.ra=function(){var t=this;return new Te((function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new N("timeout");t.a&&t.a.cancel(),t.a=On(Gc.get()).then((function(){t.b||(t.g=!0,eh(t,!0,null,e))}))}(t))}))},nh.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.na(t.c,null,t.a,t.b),Ce()):e.Fa(n,r)?function(t,e){var n=t.b,r=t.c;e.Fa(r,n)(t.g,t.f,t.T(),t.i).then((function(t){e.na(r,t,null,n)})).o((function(t){e.na(r,null,t,n)}))}(t,e):De(new N("invalid-auth-event"))}else De(new N("invalid-auth-event"))},ih.prototype.confirm=function(t){return t=Bo(this.verificationId,t),this.a(t)};var uh="mfaInfo",ch="mfaPendingCredential";function hh(t,e,n,r){N.call(this,"multi-factor-auth-required",r,e),this.b=new sh(t,e,n),ti(this,"resolver",this.b)}function lh(t,e,n){if(t&&v(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new hh(e,t.serverResponse,n,t.message)}catch(r){}return null}function fh(){}function ph(t){ti(this,"factorId",t.fa),this.a=t}function dh(t){if(ph.call(this,t),this.a.fa!=qo.PROVIDER_ID)throw new N("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function gh(t,e){for(var n in $e.call(this,t),e)this[n]=e[n]}function vh(t,e){this.a=t,this.b=[],this.c=_(this.yc,this),fn(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&z(e.multiFactor.enrolledFactors,(function(t){var e=null,r={};if(t){t.uid&&(r[ui]=t.uid),t.displayName&&(r[ai]=t.displayName),t.enrollmentTime&&(r[si]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[ci]=t.phoneNumber);try{e=new hi(r)}catch(i){}t=e}else t=null;t&&n.push(t)})),mh(this,n)}function mh(t,e){t.b=e,ti(t,"enrolledFactors",e)}function yh(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function bh(t,e){t.stop(),t.b=On(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(t,e)).then((function(){return function(){var t=u.document,e=null;return Jr()||!t?Ce():new Te((function(n){e=function(){Jr()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)})).o((function(n){throw t.removeEventListener("visibilitychange",e,!1),n}))}()})).then((function(){return t.h()})).then((function(){bh(t,!0)})).o((function(e){t.i(e)&&bh(t,!1)}))}function wh(t){this.f=t,this.b=this.a=null,this.c=Date.now()}function Ih(t,e){"undefined"===typeof e&&(t.b?e=(e=t.b).a-e.g:e=0),t.c=Date.now()+1e3*e}function _h(t,e){t.b=Wi(e[is]||""),t.a=e.refreshToken,Ih(t,"undefined"!==typeof(e=e.expiresIn)?Number(e):void 0)}function Th(t,e){return function(t,e){return new Te((function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?ps(t,t.l+"?key="+encodeURIComponent(t.c),(function(t){t?t.error?r(lu(t)):t.access_token&&t.refresh_token?n(t):r(new N("internal-error")):r(new N("network-request-failed"))}),"POST",er(e).toString(),t.g,t.m.get()):r(new N("internal-error"))}))}(t.f,e).then((function(e){return t.b=Wi(e.access_token),t.a=e.refresh_token,Ih(t,e.expires_in),{accessToken:t.b.toString(),refreshToken:t.a}})).o((function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e}))}function Eh(t,e){this.a=t||null,this.b=e||null,ei(this,{lastSignInTime:Wr(e||null),creationTime:Wr(t||null)})}function Sh(t,e,n,r,i,o){ei(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function kh(t,e,n){this.N=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null;var r=o.Z.SDK_VERSION?Rr(o.Z.SDK_VERSION):null;this.a=new ns(this.l,P(C),r),(this.u=t.emulatorConfig||null)&&hs(this.a,this.u),this.h=new wh(this.a),Lh(this,e[is]),_h(this.h,e),ti(this,"refreshToken",this.h.a),Fh(this,n||{}),En.call(this),this.P=!1,this.s&&Mr()&&(this.b=Xc(this.s,this.l,this.m,this.u)),this.W=[],this.i=null,this.D=function(t){return new yh((function(){return t.I(!0)}),(function(t){return!(!t||"auth/network-request-failed"!=t.code)}),(function(){var e=t.h.c-Date.now()-3e5;return 0<e?e:0}))}(this),this.ba=_(this.ib,this);var i=this;this.za=null,this.Pa=function(t){i.xa(t.h)},this.qa=null,this.Ba=function(t){Ah(i,t.c)},this.$=null,this.aa=[],this.Oa=function(t){Ch(i,t.f)},this.ja=null,this.S=new vh(this,n),ti(this,"multiFactor",this.S)}function Ah(t,e){t.u=e,hs(t.a,e),t.b&&(e=t.b,t.b=Xc(t.s,t.l,t.m,t.u),t.P&&(qc(e,t),Vc(t.b,t)))}function Nh(t,e){t.qa&&gn(t.qa,"languageCodeChanged",t.Pa),(t.qa=e)&&fn(e,"languageCodeChanged",t.Pa)}function Oh(t,e){t.$&&gn(t.$,"emulatorConfigChanged",t.Ba),(t.$=e)&&fn(e,"emulatorConfigChanged",t.Ba)}function Ch(t,e){t.aa=e,fs(t.a,o.Z.SDK_VERSION?Rr(o.Z.SDK_VERSION,t.aa):null)}function Dh(t,e){t.ja&&gn(t.ja,"frameworkChanged",t.Oa),(t.ja=e)&&fn(e,"frameworkChanged",t.Oa)}function Rh(t){try{return o.Z.app(t.m).auth()}catch(e){throw new N("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function xh(t){t.J||t.D.b||(t.D.start(),gn(t,"tokenChanged",t.ba),fn(t,"tokenChanged",t.ba))}function Ph(t){gn(t,"tokenChanged",t.ba),t.D.stop()}function Lh(t,e){t.Aa=e,ti(t,"_lat",e)}function Mh(t){for(var e=[],n=0;n<t.W.length;n++)e.push(t.W[n](t));return xe(e).then((function(){return t}))}function jh(t){t.b&&!t.P&&(t.P=!0,Vc(t.b,t))}function Fh(t,e){ei(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new Eh(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function Uh(){}function Vh(t){return Ce().then((function(){if(t.J)throw new N("app-deleted")}))}function qh(t){return W(t.providerData,(function(t){return t.providerId}))}function Bh(t,e){e&&(Gh(t,e.providerId),t.providerData.push(e))}function Gh(t,e){Y(t.providerData,(function(t){return t.providerId==e}))}function Kh(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&ti(t,e,n)}function Hh(t,e){t!=e&&(ei(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),e.metadata?ti(t,"metadata",function(t){return new Eh(t.a,t.b)}(e.metadata)):ti(t,"metadata",new Eh),z(e.providerData,(function(e){Bh(t,e)})),function(t,e){t.b=e.b,t.a=e.a,t.c=e.c}(t.h,e.h),ti(t,"refreshToken",t.h.a),mh(t.S,e.S.b))}function zh(t){return t.I().then((function(e){var n=t.isAnonymous;return function(t,e){return cu(t.a,Vs,{idToken:e}).then(_(t.Kc,t))}(t,e).then((function(){return n||Kh(t,"isAnonymous",!1),e}))}))}function Jh(t,e){e[is]&&t.Aa!=e[is]&&(_h(t.h,e),t.dispatchEvent(new gh("tokenChanged")),Lh(t,e[is]),Kh(t,"refreshToken",t.h.a))}function Wh(t,e){return zh(t).then((function(){if(X(qh(t),e))return Mh(t).then((function(){throw new N("provider-already-linked")}))}))}function Zh(t,e,n){return ni({user:t,credential:Go(e),additionalUserInfo:e=to(e),operationType:n})}function Xh(t,e){return Jh(t,e),t.reload().then((function(){return t}))}function Qh(t,e,n,r,i){if(!Mr())return De(new N("operation-not-supported-in-this-environment"));if(t.i&&!i)return De(t.i);var a=$i(n.providerId),s=Gr(t.uid+":::"),u=null;(!Ur()||Er())&&t.s&&n.isOAuthProvider&&(u=Eu(t.s,t.l,t.m,e,n,null,s,o.Z.SDK_VERSION||null,null,null,t.tenantId,t.u));var c=br(u,a&&a.va,a&&a.ua);return r=r().then((function(){if($h(t),!i)return t.I().then((function(){}))})).then((function(){return Kc(t.b,c,e,n,s,!!u,t.tenantId)})).then((function(){return new Te((function(n,r){t.na(e,null,new N("cancelled-popup-request"),t.g||null),t.f=n,t.C=r,t.g=s,t.c=Jc(t.b,t,e,c,s)}))})).then((function(t){return c&&yr(c),t?ni(t):null})).o((function(t){throw c&&yr(c),t})),tl(t,r,i)}function Yh(t,e,n,r,i){if(!Mr())return De(new N("operation-not-supported-in-this-environment"));if(t.i&&!i)return De(t.i);var o=null,a=Gr(t.uid+":::");return r=r().then((function(){if($h(t),!i)return t.I().then((function(){}))})).then((function(){return t.ga=a,Mh(t)})).then((function(e){return t.ha&&(e=(e=t.ha).b.set(rl,t.w(),e.a)),e})).then((function(){return zc(t.b,e,n,a,t.tenantId)})).o((function(e){if(o=e,t.ha)return il(t.ha);throw o})).then((function(){if(o)throw o})),tl(t,r,i)}function $h(t){if(!t.b||!t.P){if(t.b&&!t.P)throw new N("internal-error");throw new N("auth-domain-config-required")}}function tl(t,e,n){var r=function(t,e,n){return t.i&&!n?(e.cancel(),De(t.i)):e.o((function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.i||t.dispatchEvent(new gh("userInvalidated")),t.i=e),e}))}(t,e,n);return t.N.push(r),r.oa((function(){Q(t.N,r)})),r.o((function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=lh(e.w(),Rh(t),_(t.jc,t))),n||e}))}function el(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[is]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=t.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new kh(e,n,t);return t.providerData&&z(t.providerData,(function(t){t&&Bh(i,ni(t))})),t.redirectEventId&&(i.ga=t.redirectEventId),i}function nl(t){this.a=t,this.b=sc()}sh.prototype.Rc=function(t){var e=this;return t.tb(this.a.a,this.c).then((function(t){var n=mt(e.f);return delete n[uh],delete n[ch],bt(n,t),e.g(n)}))},S(hh,N),fh.prototype.tb=function(t,e,n){return e.type==lo?function(t,e,n,r){return n.Ha().then((function(n){return n={idToken:n},"undefined"!==typeof r&&(n.displayName=r),bt(n,{phoneVerificationInfo:Vo(t.a)}),cu(e,Fs,n)}))}(this,t,e,n):function(t,e,n){return n.Ha().then((function(n){return bt(n={mfaPendingCredential:n},{phoneVerificationInfo:Vo(t.a)}),cu(e,Us,n)}))}(this,t,e)},S(ph,fh),S(dh,ph),S(gh,$e),(t=vh.prototype).yc=function(t){mh(this,function(t){var e=[];return z(t.mfaInfo||[],(function(t){(t=oi(t))&&e.push(t)})),e}(t.hd))},t.Sb=function(){return this.a.I().then((function(t){return new ho(t,null)}))},t.fc=function(t,e){var n=this,r=this.a.a;return this.Sb().then((function(n){return t.tb(r,n,e)})).then((function(t){return Jh(n.a,t),n.a.reload()}))},t.bd=function(t){var e=this,n="string"===typeof t?t:t.uid,r=this.a.a;return this.a.I().then((function(t){return cu(r,uu,{idToken:t,mfaEnrollmentId:n})})).then((function(t){var r=J(e.b,(function(t){return t.uid!=n}));return mh(e,r),Jh(e.a,t),e.a.reload().o((function(t){if("auth/user-token-expired"!=t.code)throw t}))}))},t.w=function(){return{multiFactor:{enrolledFactors:W(this.b,(function(t){return t.w()}))}}},yh.prototype.start=function(){this.a=this.c,bh(this,!0)},yh.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},wh.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},wh.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?De(new N("user-token-expired")):t||!this.b||Date.now()>this.c-3e4?this.a?Th(this,{grant_type:"refresh_token",refresh_token:this.a}):Ce(null):Ce({accessToken:this.b.toString(),refreshToken:this.a})},Eh.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},S(kh,En),kh.prototype.xa=function(t){this.za=t,cs(this.a,t)},kh.prototype.la=function(){return this.za},kh.prototype.Ga=function(){return tt(this.aa)},kh.prototype.ib=function(){this.D.b&&(this.D.stop(),this.D.start())},ti(kh.prototype,"providerId","firebase"),(t=kh.prototype).reload=function(){var t=this;return tl(this,Vh(this).then((function(){return zh(t).then((function(){return Mh(t)})).then(Uh)})))},t.oc=function(t){return this.I(t).then((function(t){return new ah(t)}))},t.I=function(t){var e=this;return tl(this,Vh(this).then((function(){return e.h.getToken(t)})).then((function(t){if(!t)throw new N("internal-error");return t.accessToken!=e.Aa&&(Lh(e,t.accessToken),e.dispatchEvent(new gh("tokenChanged"))),Kh(e,"refreshToken",t.refreshToken),t.accessToken})))},t.Kc=function(t){if(!(t=t.users)||!t.length)throw new N("internal-error");Fh(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?W(t,(function(t){return new Sh(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)})):[]}(t),n=0;n<e.length;n++)Bh(this,e[n]);Kh(this,"isAnonymous",!(this.email&&t.passwordHash)&&!(this.providerData&&this.providerData.length)),this.dispatchEvent(new gh("userReloaded",{hd:t}))},t.Lc=function(t){return Yr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.ub(t)},t.ub=function(t){var e=this,n=null;return tl(this,t.c(this.a,this.uid).then((function(t){return Jh(e,t),n=Zh(e,t,"reauthenticate"),e.i=null,e.reload()})).then((function(){return n})),!0)},t.Cc=function(t){return Yr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.rb(t)},t.rb=function(t){var e=this,n=null;return tl(this,Wh(this,t.providerId).then((function(){return e.I()})).then((function(n){return t.b(e.a,n)})).then((function(t){return n=Zh(e,t,"link"),Xh(e,t)})).then((function(){return n})))},t.Dc=function(t,e){var n=this;return tl(this,Wh(this,"phone").then((function(){return oh(Rh(n),t,e,_(n.rb,n))})))},t.Mc=function(t,e){var n=this;return tl(this,Ce().then((function(){return oh(Rh(n),t,e,_(n.ub,n))})),!0)},t.Cb=function(t){var e=this;return tl(this,this.I().then((function(n){return e.a.Cb(n,t)})).then((function(t){return Jh(e,t),e.reload()})))},t.ed=function(t){var e=this;return tl(this,this.I().then((function(n){return t.b(e.a,n)})).then((function(t){return Jh(e,t),e.reload()})))},t.Db=function(t){var e=this;return tl(this,this.I().then((function(n){return e.a.Db(n,t)})).then((function(t){return Jh(e,t),e.reload()})))},t.Eb=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return Vh(this);var e=this;return tl(this,this.I().then((function(n){return e.a.Eb(n,{displayName:t.displayName,photoUrl:t.photoURL})})).then((function(t){return Jh(e,t),Kh(e,"displayName",t.displayName||null),Kh(e,"photoURL",t.photoUrl||null),z(e.providerData,(function(t){"password"===t.providerId&&(ti(t,"displayName",e.displayName),ti(t,"photoURL",e.photoURL))})),Mh(e)})).then(Uh))},t.cd=function(t){var e=this;return tl(this,zh(this).then((function(n){return X(qh(e),t)?function(t,e,n){return cu(t,Ls,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then((function(t){var n={};return z(t.providerUserInfo||[],(function(t){n[t.providerId]=!0})),z(qh(e),(function(t){n[t]||Gh(e,t)})),n[qo.PROVIDER_ID]||ti(e,"phoneNumber",null),Mh(e)})):Mh(e).then((function(){throw new N("no-such-provider")}))})))},t.delete=function(){var t=this;return tl(this,this.I().then((function(e){return cu(t.a,Ps,{idToken:e})})).then((function(){t.dispatchEvent(new gh("userDeleted"))}))).then((function(){for(var e=0;e<t.N.length;e++)t.N[e].cancel("app-deleted");Nh(t,null),Oh(t,null),Dh(t,null),t.N=[],t.J=!0,Ph(t),ti(t,"refreshToken",null),t.b&&qc(t.b,t)}))},t.Gb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},t.na=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?_(this.Lb,this):"reauthViaPopup"==t&&e==(this.g||null)?_(this.Mb,this):"linkViaRedirect"==t&&(this.ga||null)==e?_(this.Lb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?_(this.Mb,this):null},t.Ec=function(t){var e=this;return Qh(this,"linkViaPopup",t,(function(){return Wh(e,t.providerId).then((function(){return Mh(e)}))}),!1)},t.Nc=function(t){return Qh(this,"reauthViaPopup",t,(function(){return Ce()}),!0)},t.Fc=function(t){var e=this;return Yh(this,"linkViaRedirect",t,(function(){return Wh(e,t.providerId)}),!1)},t.Oc=function(t){return Yh(this,"reauthViaRedirect",t,(function(){return Ce()}),!0)},t.Lb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return tl(this,this.I().then((function(n){return As(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})})).then((function(t){return o=Zh(i,t,"link"),Xh(i,t)})).then((function(){return o})))},t.Mb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return tl(this,Ce().then((function(){return go(Ns(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)})).then((function(t){return o=Zh(i,t,"reauthenticate"),Jh(i,t),i.i=null,i.reload()})).then((function(){return o})),!0)},t.vb=function(t){var e=this,n=null;return tl(this,this.I().then((function(e){return n=e,"undefined"===typeof t||vt(t)?{}:Ki(new Pi(t))})).then((function(t){return e.a.vb(n,t)})).then((function(t){if(e.email!=t)return e.reload()})).then((function(){})))},t.Fb=function(t,e){var n=this,r=null;return tl(this,this.I().then((function(t){return r=t,"undefined"===typeof e||vt(e)?{}:Ki(new Pi(e))})).then((function(e){return n.a.Fb(r,t,e)})).then((function(t){if(n.email!=t)return n.reload()})).then((function(){})))},t.jc=function(t){var e=null,n=this;return tl(this,t=go(Ce(t),n.uid).then((function(t){return e=Zh(n,t,"reauthenticate"),Jh(n,t),n.i=null,n.reload()})).then((function(){return e})),!0)},t.toJSON=function(){return this.w()},t.w=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.h.w(),redirectEventId:this.ga||null};return this.metadata&&bt(t,this.metadata.w()),z(this.providerData,(function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))})),bt(t,this.S.w()),t};var rl={name:"redirectUser",F:"session"};function il(t){return hc(t.b,rl,t.a)}function ol(t){this.a=t,this.b=sc(),this.c=null,this.f=function(t){var e=ul("local"),n=ul("session"),r=ul("none");return function(t,e,n){var r=cc(e,n),i=uc(t,e.F);return t.get(e,n).then((function(o){var a=null;try{a=Br(u.localStorage.getItem(r))}catch(s){}if(a&&!o)return u.localStorage.removeItem(r),t.set(e,a,n);a&&o&&"localStorage"!=i.type&&u.localStorage.removeItem(r)}))}(t.b,e,t.a).then((function(){return t.b.get(n,t.a)})).then((function(i){return i?n:t.b.get(r,t.a).then((function(n){return n?r:t.b.get(e,t.a).then((function(n){return n?e:t.b.get(sl,t.a).then((function(t){return t?ul(t):e}))}))}))})).then((function(e){return t.c=e,al(t,e.F)})).o((function(){t.c||(t.c=e)}))}(this),this.b.addListener(ul("local"),this.a,_(this.g,this))}function al(t,e){var n,r=[];for(n in oc)oc[n]!==e&&r.push(hc(t.b,ul(oc[n]),t.a));return r.push(hc(t.b,sl,t.a)),function(t){return new Te((function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},a=function(t){n(t)},s=0;s<t.length;s++)Re(t[s],T(o,s),a);else e(i)}))}(r)}ol.prototype.g=function(){var t=this,e=ul("local");fl(this,(function(){return Ce().then((function(){return t.c&&"local"!=t.c.F?t.b.get(e,t.a):null})).then((function(n){if(n)return al(t,"local").then((function(){t.c=e}))}))}))};var sl={name:"persistence",F:"session"};function ul(t){return{name:"authUser",F:t}}function cl(t,e){return fl(t,(function(){return t.b.set(t.c,e.w(),t.a)}))}function hl(t){return fl(t,(function(){return hc(t.b,t.c,t.a)}))}function ll(t,e,n){return fl(t,(function(){return t.b.get(t.c,t.a).then((function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),el(t||{})}))}))}function fl(t,e){return t.f=t.f.then(e,e),t.f}function pl(t){if(this.l=!1,ti(this,"settings",new rh),ti(this,"app",t),!_l(this).options||!_l(this).options.apiKey)throw new N("invalid-api-key");t=o.Z.SDK_VERSION?Rr(o.Z.SDK_VERSION):null,this.a=new ns(_l(this).options&&_l(this).options.apiKey,P(C),t),this.P=[],this.s=[],this.N=[],this.Pa=o.Z.INTERNAL.createSubscribe(_(this.zc,this)),this.W=void 0,this.ib=o.Z.INTERNAL.createSubscribe(_(this.Ac,this)),wl(this,null),this.i=new ol(_l(this).options.apiKey+":"+_l(this).name),this.D=new nl(_l(this).options.apiKey+":"+_l(this).name),this.$=kl(this,function(t){var e=_l(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(rl,t.a).then((function(t){return t&&e&&(t.authDomain=e),el(t||{})}))}(t.D,_l(t).options.authDomain).then((function(e){return(t.m=e)&&(e.ha=t.D),il(t.D)}));return kl(t,e)}(t).then((function(){return ll(t.i,e,t.R)})).then((function(e){return e?(e.ha=t.D,t.m&&(t.m.ga||null)==(e.ga||null)?e:e.reload().then((function(){return cl(t.i,e).then((function(){return e}))})).o((function(n){return"auth/network-request-failed"==n.code?e:hl(t.i)}))):null})).then((function(e){wl(t,e||null)}));return kl(t,n)}(this)),this.h=kl(this,function(t){return t.$.then((function(){return yl(t)})).o((function(){})).then((function(){if(!t.l)return t.ja()})).o((function(){})).then((function(){if(!t.l){t.ba=!0;var e=t.i;e.b.addListener(ul("local"),e.a,t.ja)}}))}(this)),this.ba=!1,this.ja=_(this.Zc,this),this.Ba=_(this.da,this),this.qa=_(this.mc,this),this.za=_(this.wc,this),this.Aa=_(this.xc,this),this.b=null,function(t){var e=_l(t).options.authDomain,n=_l(t).options.apiKey;e&&Mr()&&(t.Oa=t.$.then((function(){if(!t.l){if(t.b=Xc(e,n,_l(t).name,t.R),Vc(t.b,t),Tl(t)&&jh(Tl(t)),t.m){jh(t.m);var r=t.m;r.xa(t.la()),Nh(r,t),Ch(r=t.m,t.J),Dh(r,t),Ah(r=t.m,t.R),Oh(r,t),t.m=null}return t.b}})))}(this),this.INTERNAL={},this.INTERNAL.delete=_(this.delete,this),this.INTERNAL.logFramework=_(this.Gc,this),this.u=0,En.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.la()},set:function(t){this.xa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.T()},set:function(t){this.zb(t)},enumerable:!1}),t.S=null,Object.defineProperty(t,"emulatorConfig",{get:function(){if(this.R){var t=Bn(this.R.url);t=ni({protocol:t.c,host:t.a,port:t.g,options:ni({disableWarnings:this.R.ec})})}else t=null;return t},enumerable:!1})}(this),this.J=[],this.R=null}function dl(t){$e.call(this,"languageCodeChanged"),this.h=t}function gl(t){$e.call(this,"emulatorConfigChanged"),this.c=t}function vl(t){$e.call(this,"frameworkChanged"),this.f=t}function ml(t){return t.Oa||De(new N("auth-domain-config-required"))}function yl(t){if(!Mr())return De(new N("operation-not-supported-in-this-environment"));var e=ml(t).then((function(){return t.b.ra()})).then((function(t){return t?ni(t):null}));return kl(t,e)}function bl(t,e){var n={};return n.apiKey=_l(t).options.apiKey,n.authDomain=_l(t).options.authDomain,n.appName=_l(t).name,t.R&&(n.emulatorConfig=t.R),t.$.then((function(){return function(t,e,n,r){var i=new kh(t,e);return n&&(i.ha=n),r&&Ch(i,r),i.reload().then((function(){return i}))}(n,e,t.D,t.Ga())})).then((function(e){return Tl(t)&&e.uid==Tl(t).uid?(Hh(Tl(t),e),t.da(e)):(wl(t,e),jh(e),t.da(e))})).then((function(){Sl(t)}))}function wl(t,e){Tl(t)&&(function(t,e){Y(t.W,(function(t){return t==e}))}(Tl(t),t.Ba),gn(Tl(t),"tokenChanged",t.qa),gn(Tl(t),"userDeleted",t.za),gn(Tl(t),"userInvalidated",t.Aa),Ph(Tl(t))),e&&(e.W.push(t.Ba),fn(e,"tokenChanged",t.qa),fn(e,"userDeleted",t.za),fn(e,"userInvalidated",t.Aa),0<t.u&&xh(e)),ti(t,"currentUser",e),e&&(e.xa(t.la()),Nh(e,t),Ch(e,t.J),Dh(e,t),Ah(e,t.R),Oh(e,t))}function Il(t,e){var n=null,r=null;return kl(t,e.then((function(e){return n=Go(e),r=to(e),bl(t,e)}),(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=lh(e.w(),t,_(t.kc,t))),n||e})).then((function(){return ni({user:Tl(t),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function _l(t){return t.app}function Tl(t){return t.currentUser}function El(t){return Tl(t)&&Tl(t)._lat||null}function Sl(t){if(t.ba){for(var e=0;e<t.s.length;e++)t.s[e]&&t.s[e](El(t));if(t.W!==t.getUid()&&t.N.length)for(t.W=t.getUid(),e=0;e<t.N.length;e++)t.N[e]&&t.N[e](El(t))}}function kl(t,e){return t.P.push(e),e.oa((function(){Q(t.P,e)})),e}function Al(){}function Nl(){this.a={},this.b=1e12}ol.prototype.yb=function(t){var e=null,n=this;return function(t){var e=new N("invalid-persistence-type"),n=new N("unsupported-persistence-type");t:{for(r in oc)if(oc[r]==t){var r=!0;break t}r=!1}if(!r||"string"!==typeof t)throw e;switch(kr()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!Fu()&&"none"!==t)throw n;break;default:if(!Lr()&&"none"!==t)throw n}}(t),fl(this,(function(){return t!=n.c.F?n.b.get(n.c,n.a).then((function(r){return e=r,al(n,t)})).then((function(){if(n.c=ul(t),e)return n.b.set(n.c,e,n.a)})):Ce()}))},S(pl,En),S(dl,$e),S(gl,$e),S(vl,$e),(t=pl.prototype).yb=function(t){return kl(this,t=this.i.yb(t))},t.xa=function(t){this.aa===t||this.l||(this.aa=t,cs(this.a,this.aa),this.dispatchEvent(new dl(this.la())))},t.la=function(){return this.aa},t.fd=function(){var t=u.navigator;this.xa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.gd=function(t,e){if(!this.R){if(!/^https?:\/\//.test(t))throw new N("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");(function(t){"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),u.document&&!t&&_r().then((function(){var t=u.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#b50000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),u.document.body.appendChild(t)}))})(e=!!e&&!!e.disableWarnings),this.R={url:t,ec:e},this.settings.jb=!0,hs(this.a,this.R),this.dispatchEvent(new gl(this.R))}},t.Gc=function(t){this.J.push(t),fs(this.a,o.Z.SDK_VERSION?Rr(o.Z.SDK_VERSION,this.J):null),this.dispatchEvent(new vl(this.J))},t.Ga=function(){return tt(this.J)},t.zb=function(t){this.S===t||this.l||(this.S=t,this.a.b=this.S)},t.T=function(){return this.S},t.toJSON=function(){return{apiKey:_l(this).options.apiKey,authDomain:_l(this).options.authDomain,appName:_l(this).name,currentUser:Tl(this)&&Tl(this).w()}},t.Gb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.na=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?_(this.ic,this):null},t.ic=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then((function(){return Il(i,ks(i.a,o))}))},t.Xc=function(t){if(!Mr())return De(new N("operation-not-supported-in-this-environment"));var e=this,n=$i(t.providerId),r=Gr(),i=null;(!Ur()||Er())&&_l(this).options.authDomain&&t.isOAuthProvider&&(i=Eu(_l(this).options.authDomain,_l(this).options.apiKey,_l(this).name,"signInViaPopup",t,null,r,o.Z.SDK_VERSION||null,null,null,this.T(),this.R));var a=br(i,n&&n.va,n&&n.ua);return kl(this,n=ml(this).then((function(n){return Kc(n,a,"signInViaPopup",t,r,!!i,e.T())})).then((function(){return new Te((function(t,n){e.na("signInViaPopup",null,new N("cancelled-popup-request"),e.g),e.f=t,e.C=n,e.g=r,e.c=Jc(e.b,e,"signInViaPopup",a,r)}))})).then((function(t){return a&&yr(a),t?ni(t):null})).o((function(t){throw a&&yr(a),t})))},t.Yc=function(t){if(!Mr())return De(new N("operation-not-supported-in-this-environment"));var e=this,n=ml(this).then((function(){return function(t){return fl(t,(function(){return t.b.set(sl,t.c.F,t.a)}))}(e.i)})).then((function(){return zc(e.b,"signInViaRedirect",t,void 0,e.T())}));return kl(this,n)},t.ra=function(){var t=this;return yl(this).then((function(e){return t.b&&$c(t.b.b),e})).o((function(e){throw t.b&&$c(t.b.b),e}))},t.dd=function(t){if(!t)return De(new N("null-user"));if(this.S!=t.tenantId)return De(new N("tenant-id-mismatch"));var e=this,n={};n.apiKey=_l(this).options.apiKey,n.authDomain=_l(this).options.authDomain,n.appName=_l(this).name;var r=function(t,e,n,r){var i=t.h,o={};return o[is]=i.b&&i.b.toString(),o.refreshToken=i.a,e=new kh(e||{apiKey:t.l,authDomain:t.s,appName:t.m},o),n&&(e.ha=n),r&&Ch(e,r),Hh(e,t),e}(t,n,e.D,e.Ga());return kl(this,this.h.then((function(){if(_l(e).options.apiKey!=t.l)return r.reload()})).then((function(){return Tl(e)&&t.uid==Tl(e).uid?(Hh(Tl(e),t),e.da(t)):(wl(e,r),jh(r),e.da(r))})).then((function(){Sl(e)})))},t.Bb=function(){var t=this;return kl(this,this.h.then((function(){return t.b&&$c(t.b.b),Tl(t)?(wl(t,null),hl(t.i).then((function(){Sl(t)}))):Ce()})))},t.Zc=function(){var t=this;return ll(this.i,_l(this).options.authDomain).then((function(e){if(!t.l){var n;if(n=Tl(t)&&e){n=Tl(t).uid;var r=e.uid;n=void 0!==n&&null!==n&&""!==n&&void 0!==r&&null!==r&&""!==r&&n==r}if(n)return Hh(Tl(t),e),Tl(t).I();(Tl(t)||e)&&(wl(t,e),e&&(jh(e),e.ha=t.D),t.b&&Vc(t.b,t),Sl(t))}}))},t.da=function(t){return cl(this.i,t)},t.mc=function(){Sl(this),this.da(Tl(this))},t.wc=function(){this.Bb()},t.xc=function(){this.Bb()},t.kc=function(t){var e=this;return this.h.then((function(){return Il(e,Ce(t))}))},t.zc=function(t){var e=this;this.addAuthTokenListener((function(){t.next(Tl(e))}))},t.Ac=function(t){var e=this;!function(t,e){t.N.push(e),kl(t,t.h.then((function(){!t.l&&X(t.N,e)&&t.W!==t.getUid()&&(t.W=t.getUid(),e(El(t)))})))}(this,(function(){t.next(Tl(e))}))},t.Ic=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){"function"===typeof t?t(Tl(r)):"function"===typeof t.next&&t.next(Tl(r))})),this.Pa(t,e,n)},t.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){r.W=r.getUid(),"function"===typeof t?t(Tl(r)):"function"===typeof t.next&&t.next(Tl(r))})),this.ib(t,e,n)},t.nc=function(t){var e=this;return kl(this,this.h.then((function(){return Tl(e)?Tl(e).I(t).then((function(t){return{accessToken:t}})):null})))},t.Tc=function(t){var e=this;return this.h.then((function(){return Il(e,cu(e.a,ru,{token:t}))})).then((function(t){var n=t.user;return Kh(n,"isAnonymous",!1),e.da(n),t}))},t.Uc=function(t,e){var n=this;return this.h.then((function(){return Il(n,cu(n.a,iu,{email:t,password:e}))}))},t.dc=function(t,e){var n=this;return this.h.then((function(){return Il(n,cu(n.a,Rs,{email:t,password:e}))}))},t.ab=function(t){var e=this;return this.h.then((function(){return Il(e,t.ka(e.a))}))},t.Sc=function(t){return Yr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.ab(t)},t.Ab=function(){var t=this;return this.h.then((function(){var e=Tl(t);if(e&&e.isAnonymous){var n=ni({providerId:null,isNewUser:!1});return ni({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return Il(t,t.a.Ab()).then((function(e){var n=e.user;return Kh(n,"isAnonymous",!0),t.da(n),e}))}))},t.getUid=function(){return Tl(this)&&Tl(this).uid||null},t.cc=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&Tl(this)&&xh(Tl(this))},t.Pc=function(t){var e=this;z(this.s,(function(n){n==t&&e.u--})),0>this.u&&(this.u=0),0==this.u&&Tl(this)&&Ph(Tl(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.s.push(t),kl(this,this.h.then((function(){e.l||X(e.s,t)&&t(El(e))})))},t.removeAuthTokenListener=function(t){Y(this.s,(function(e){return e==t}))},t.delete=function(){this.l=!0;for(var t=0;t<this.P.length;t++)this.P[t].cancel("app-deleted");return this.P=[],this.i&&(t=this.i).b.removeListener(ul("local"),t.a,this.ja),this.b&&(qc(this.b,this),$c(this.b.b)),Promise.resolve()},t.hc=function(t){return kl(this,function(t,e){return cu(t,xs,{identifier:e,continueUri:jr()?dr():"http://localhost"}).then((function(t){return t.signinMethods||[]}))}(this.a,t))},t.Bc=function(t){return!!jo(t)},t.xb=function(t,e){var n=this;return kl(this,Ce().then((function(){var t=new Pi(e);if(!t.c)throw new N("argument-error",ji+" must be true when sending sign in link to email");return Ki(t)})).then((function(e){return n.a.xb(t,e)})).then((function(){})))},t.jd=function(t){return this.Sa(t).then((function(t){return t.data.email}))},t.ob=function(t,e){return kl(this,this.a.ob(t,e).then((function(){})))},t.Sa=function(t){return kl(this,this.a.Sa(t).then((function(t){return new li(t)})))},t.kb=function(t){return kl(this,this.a.kb(t).then((function(){})))},t.wb=function(t,e){var n=this;return kl(this,Ce().then((function(){return"undefined"===typeof e||vt(e)?{}:Ki(new Pi(e))})).then((function(e){return n.a.wb(t,e)})).then((function(){})))},t.Wc=function(t,e){return kl(this,oh(this,t,e,_(this.ab,this)))},t.Vc=function(t,e){var n=this;return kl(this,Ce().then((function(){var r=e||dr(),i=Mo(t,r);if(!(r=jo(r)))throw new N("argument-error","Invalid email link!");if(r.tenantId!==n.T())throw new N("tenant-id-mismatch");return n.ab(i)})))},Al.prototype.render=function(){},Al.prototype.reset=function(){},Al.prototype.getResponse=function(){},Al.prototype.execute=function(){};var Ol=null;function Cl(t,e){return(e=Dl(e))&&t.a[e]||null}function Dl(t){return(t="undefined"===typeof t?1e12:t)?t.toString():null}function Rl(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=le(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():fn(this.f,"click",this.i)}function xl(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function Pl(){}function Ll(){}Nl.prototype.render=function(t,e){return this.a[this.b.toString()]=new Rl(t,e),this.b++},Nl.prototype.reset=function(t){var e=Cl(this,t);t=Dl(t),e&&t&&(e.delete(),delete this.a[t])},Nl.prototype.getResponse=function(t){return(t=Cl(this,t))?t.getResponse():null},Nl.prototype.execute=function(t){(t=Cl(this,t))&&t.execute()},Rl.prototype.getResponse=function(){return xl(this),this.b},Rl.prototype.execute=function(){xl(this);var t=this;this.a||(this.a=setTimeout((function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(r){}t.a=setTimeout((function(){if(t.a=null,t.b=null,n)try{n()}catch(r){}t.h&&t.execute()}),6e4)}),500))},Rl.prototype.delete=function(){xl(this),this.g=!0,clearTimeout(this.a),this.a=null,gn(this.f,"click",this.i)},ti(Pl,"FACTOR_ID","phone"),Ll.prototype.g=function(){return Ol||(Ol=new Nl),Ce(Ol)},Ll.prototype.c=function(){};var Ml=null;function jl(){this.b=u.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Fl=new It(St,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Ul=new zr(3e4,6e4);jl.prototype.g=function(t){var e=this;return new Te((function(n,r){var i=setTimeout((function(){r(new N("network-request-failed"))}),Ul.get());!u.grecaptcha||t!==e.f&&!e.b?(u[e.a]=function(){if(u.grecaptcha){e.f=t;var o=u.grecaptcha.render;u.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(u.grecaptcha)}else clearTimeout(i),r(new N("internal-error"));delete u[e.a]},Ce(Za(Ot(Fl,{onload:e.a,hl:t||""}))).o((function(){clearTimeout(i),r(new N("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(u.grecaptcha))}))},jl.prototype.c=function(){this.b--};var Vl=null;function ql(t,e,n,r,i,o,a){if(ti(this,"type","recaptcha"),this.c=this.f=null,this.J=!1,this.v=e,this.g=null,a?(Ml||(Ml=new Ll),a=Ml):(Vl||(Vl=new jl),a=Vl),this.m=a,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Kl])throw new N("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Hl],!u.document)throw new N("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!le(e)||!this.i&&le(e).hasChildNodes())throw new N("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new ns(t,o||null,i||null),this.u=r||function(){return null};var s=this;this.l=[];var c=this.a[Bl];this.a[Bl]=function(t){if(zl(s,t),"function"===typeof c)c(t);else if("string"===typeof c){var e=Pr(c,u);"function"===typeof e&&e(t)}};var h=this.a[Gl];this.a[Gl]=function(){if(zl(s,null),"function"===typeof h)h();else if("string"===typeof h){var t=Pr(h,u);"function"===typeof t&&t()}}}var Bl="callback",Gl="expired-callback",Kl="sitekey",Hl="size";function zl(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(r){}}function Jl(t,e){return t.h.push(e),e.oa((function(){Q(t.h,e)})),e}function Wl(t){if(t.J)throw new N("internal-error","RecaptchaVerifier instance has been destroyed.")}function Zl(t,e,n){var r=!1;try{this.b=n||o.Z.app()}catch(s){throw new N("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new N("invalid-api-key");n=this.b.options.apiKey;var i=this,a=null;try{a=this.b.auth().Ga()}catch(s){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(s){}a=o.Z.SDK_VERSION?Rr(o.Z.SDK_VERSION,a):null,ql.call(this,n,t,e,(function(){try{var t=i.b.auth().la()}catch(e){t=null}return t}),a,P(C),r)}function Xl(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<e.length;a++)if(e[a].optional)o=!0;else{if(o)throw new N("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],0>i||i>=Ql.length)throw new N("internal-error","Argument validator received an unsupported number of arguments.");n=Ql[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new N("argument-error",t+" failed: "+r)}(t=ql.prototype).Ia=function(){var t=this;return this.f?this.f:this.f=Jl(this,Ce().then((function(){if(jr()&&!Sr())return _r();throw new N("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return t.m.g(t.u())})).then((function(e){return t.g=e,cu(t.s,zs,{})})).then((function(e){t.a[Kl]=e.recaptchaSiteKey})).o((function(e){throw t.f=null,e})))},t.render=function(){Wl(this);var t=this;return Jl(this,this.Ia().then((function(){if(null===t.c){var e=t.v;if(!t.i){var n=le(e);e=function(t,e,n){var r=arguments,i=document,o=String(r[0]),a=r[1];if(!he&&a&&(a.name||a.type)){if(o=["<",o],a.name&&o.push(' name="',zt(a.name),'"'),a.type){o.push(' type="',zt(a.type),'"');var s={};bt(s,a),delete s.type,a=s}o.push(">"),o=o.join("")}return o=me(i,o),a&&("string"===typeof a?o.className=a:Array.isArray(a)?o.className=a.join(" "):fe(o,a)),2<r.length&&ve(i,o,r),o}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c})))},t.verify=function(){Wl(this);var t=this;return Jl(this,this.render().then((function(e){return new Te((function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(function(t,e){Y(t.l,(function(t){return t==e}))}(t,i),n(e))};t.l.push(i),t.i&&t.g.execute(t.c)}}))})))},t.reset=function(){Wl(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){Wl(this),this.J=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=le(this.v);for(var e;e=t.firstChild;)t.removeChild(e)}},S(Zl,ql);var Ql="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Yl(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:function(t){return"string"===typeof t}}}function $l(t,e){return{name:t||"",K:"a boolean",optional:!!e,M:function(t){return"boolean"===typeof t}}}function tf(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:v}}function ef(t,e){return{name:t||"",K:"a function",optional:!!e,M:function(t){return"function"===typeof t}}}function nf(t,e){return{name:t||"",K:"null",optional:!!e,M:function(t){return null===t}}}function rf(t){return{name:t?t+"Credential":"credential",K:t?"a valid "+t+" credential":"a valid credential",optional:!1,M:function(e){if(!e)return!1;var n=!t||e.providerId===t;return!(!e.ka||!n)}}}function of(t,e){return v(t)&&"string"===typeof t.type&&t.type===e&&"function"===typeof t.Ha}function af(t){return v(t)&&"string"===typeof t.uid}function sf(t,e,n,r){return{name:n||"",K:t.K+" or "+e.K,optional:!!r,M:function(n){return t.M(n)||e.M(n)}}}function uf(t,e){for(var n in e){var r=e[n].name;t[r]=lf(r,t[n],e[n].j)}}function cf(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:T((function(t){return this[t]}),n),set:T((function(t,e,n,r){Xl(t,[n],[r],!0),this[e]=r}),r,n,e[n].lb),enumerable:!0})}}function hf(t,e,n,r){t[e]=lf(e,n,r)}function lf(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Xl(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}uf(pl.prototype,{kb:{name:"applyActionCode",j:[Yl("code")]},Sa:{name:"checkActionCode",j:[Yl("code")]},ob:{name:"confirmPasswordReset",j:[Yl("code"),Yl("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Yl("email"),Yl("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[Yl("email")]},ra:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[Yl("emailLink")]},Hc:{name:"onAuthStateChanged",j:[sf(tf(),ef(),"nextOrObserver"),ef("opt_error",!0),ef("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[sf(tf(),ef(),"nextOrObserver"),ef("opt_error",!0),ef("opt_completed",!0)]},wb:{name:"sendPasswordResetEmail",j:[Yl("email"),sf(tf("opt_actionCodeSettings",!0),nf(null,!0),"opt_actionCodeSettings",!0)]},xb:{name:"sendSignInLinkToEmail",j:[Yl("email"),tf("actionCodeSettings")]},yb:{name:"setPersistence",j:[Yl("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[rf()]},Ab:{name:"signInAnonymously",j:[]},ab:{name:"signInWithCredential",j:[rf()]},Tc:{name:"signInWithCustomToken",j:[Yl("token")]},Uc:{name:"signInWithEmailAndPassword",j:[Yl("email"),Yl("password")]},Vc:{name:"signInWithEmailLink",j:[Yl("email"),Yl("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[Yl("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!==typeof t.type||"function"!==typeof t.verify)}}]},Xc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Yc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},dd:{name:"updateCurrentUser",j:[sf({name:"user",K:"an instance of Firebase User",optional:!1,M:function(t){return!!(t&&t instanceof kh)}},nf(),"user")]},Bb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Yl(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[Yl("url"),tf("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[Yl("code")]}}),cf(pl.prototype,{lc:{name:"languageCode",lb:sf(Yl(),nf(),"languageCode")},ti:{name:"tenantId",lb:sf(Yl(),nf(),"tenantId")}}),pl.Persistence=oc,pl.Persistence.LOCAL="local",pl.Persistence.SESSION="session",pl.Persistence.NONE="none",uf(kh.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[$l("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[$l("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[rf()]},rb:{name:"linkWithCredential",j:[rf()]},Dc:{name:"linkWithPhoneNumber",j:[Yl("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!==typeof t.type||"function"!==typeof t.verify)}}]},Ec:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Fc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[rf()]},ub:{name:"reauthenticateWithCredential",j:[rf()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[Yl("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!==typeof t.type||"function"!==typeof t.verify)}}]},Nc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Oc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},vb:{name:"sendEmailVerification",j:[sf(tf("opt_actionCodeSettings",!0),nf(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Yl(null,!0)]},cd:{name:"unlink",j:[Yl("provider")]},Cb:{name:"updateEmail",j:[Yl("email")]},Db:{name:"updatePassword",j:[Yl("password")]},ed:{name:"updatePhoneNumber",j:[rf("phone")]},Eb:{name:"updateProfile",j:[tf("profile")]},Fb:{name:"verifyBeforeUpdateEmail",j:[Yl("email"),sf(tf("opt_actionCodeSettings",!0),nf(null,!0),"opt_actionCodeSettings",!0)]}}),uf(Nl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),uf(Al.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),uf(Te.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),cf(rh.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",lb:$l("appVerificationDisabledForTesting")}}),uf(ih.prototype,{confirm:{name:"confirm",j:[Yl("verificationCode")]}}),hf(po,"fromJSON",(function(t){t="string"===typeof t?JSON.parse(t):t;for(var e,n=[Io,Po,Uo,yo],r=0;r<n.length;r++)if(e=n[r](t))return e;return null}),[sf(Yl(),tf(),"json")]),hf(Lo,"credential",(function(t,e){return new xo(t,e)}),[Yl("email"),Yl("password")]),uf(xo.prototype,{w:{name:"toJSON",j:[Yl(null,!0)]}}),uf(So.prototype,{Ca:{name:"addScope",j:[Yl("scope")]},Ka:{name:"setCustomParameters",j:[tf("customOAuthParameters")]}}),hf(So,"credential",ko,[sf(Yl(),tf(),"token")]),hf(Lo,"credentialWithLink",Mo,[Yl("email"),Yl("emailLink")]),uf(Ao.prototype,{Ca:{name:"addScope",j:[Yl("scope")]},Ka:{name:"setCustomParameters",j:[tf("customOAuthParameters")]}}),hf(Ao,"credential",No,[sf(Yl(),tf(),"token")]),uf(Oo.prototype,{Ca:{name:"addScope",j:[Yl("scope")]},Ka:{name:"setCustomParameters",j:[tf("customOAuthParameters")]}}),hf(Oo,"credential",Co,[sf(Yl(),sf(tf(),nf()),"idToken"),sf(Yl(),nf(),"accessToken",!0)]),uf(Do.prototype,{Ka:{name:"setCustomParameters",j:[tf("customOAuthParameters")]}}),hf(Do,"credential",Ro,[sf(Yl(),tf(),"token"),Yl("secret",!0)]),uf(Eo.prototype,{Ca:{name:"addScope",j:[Yl("scope")]},credential:{name:"credential",j:[sf(Yl(),sf(tf(),nf()),"optionsOrIdToken"),sf(Yl(),nf(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[tf("customOAuthParameters")]}}),uf(bo.prototype,{w:{name:"toJSON",j:[Yl(null,!0)]}}),uf(vo.prototype,{w:{name:"toJSON",j:[Yl(null,!0)]}}),hf(qo,"credential",Bo,[Yl("verificationId"),Yl("verificationCode")]),uf(qo.prototype,{gb:{name:"verifyPhoneNumber",j:[sf(Yl(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(t){return!!t&&(t.session&&t.phoneNumber?of(t.session,lo)&&"string"===typeof t.phoneNumber:t.session&&t.multiFactorHint?of(t.session,fo)&&af(t.multiFactorHint):t.session&&t.multiFactorUid?of(t.session,fo)&&"string"===typeof t.multiFactorUid:!!t.phoneNumber&&"string"===typeof t.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!==typeof t.type||"function"!==typeof t.verify)}}]}}),uf(Fo.prototype,{w:{name:"toJSON",j:[Yl(null,!0)]}}),uf(N.prototype,{toJSON:{name:"toJSON",j:[Yl(null,!0)]}}),uf(Qo.prototype,{toJSON:{name:"toJSON",j:[Yl(null,!0)]}}),uf(Xo.prototype,{toJSON:{name:"toJSON",j:[Yl(null,!0)]}}),uf(hh.prototype,{toJSON:{name:"toJSON",j:[Yl(null,!0)]}}),uf(sh.prototype,{Rc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.tb}}]}}),uf(vh.prototype,{Sb:{name:"getSession",j:[]},fc:{name:"enroll",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.tb}},Yl("displayName",!0)]},bd:{name:"unenroll",j:[sf({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:af},Yl(),"multiFactorInfoIdentifier")]}}),uf(Zl.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),hf(Si,"parseLink",xi,[Yl("link")]),hf(Pl,"assertion",(function(t){return new dh(t)}),[rf("phone")]),function(){if("undefined"===typeof o.Z||!o.Z.INTERNAL||!o.Z.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:pi,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:fi,VERIFY_AND_CHANGE_EMAIL:di,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:pl,AuthCredential:po,Error:N};hf(t,"EmailAuthProvider",Lo,[]),hf(t,"FacebookAuthProvider",So,[]),hf(t,"GithubAuthProvider",Ao,[]),hf(t,"GoogleAuthProvider",Oo,[]),hf(t,"TwitterAuthProvider",Do,[]),hf(t,"OAuthProvider",Eo,[Yl("providerId")]),hf(t,"SAMLAuthProvider",To,[Yl("providerId")]),hf(t,"PhoneAuthProvider",qo,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof pl)}}]),hf(t,"RecaptchaVerifier",Zl,[sf(Yl(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),tf("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof o.Z.app.App)}}]),hf(t,"ActionCodeURL",Si,[]),hf(t,"PhoneMultiFactorGenerator",Pl,[]),o.Z.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new pl(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC",onInstanceCreated:function(t){t.getProvider("auth-internal").initialize()}}),o.Z.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:_((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:_(t.nc,t),addAuthTokenListener:_(t.cc,t),removeAuthTokenListener:_(t.Pc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),o.Z.registerVersion("@firebase/auth","0.16.8"),o.Z.INTERNAL.extendNamespace({User:kh})}()}.apply("undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var v=n(44589),m=n(14594),y=function(t,e){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},y(t,e)};function b(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var w,I="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},_=_||{},T=I||self;function E(){}function S(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function k(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var A="closure_uid_"+(1e9*Math.random()>>>0),N=0;function O(t,e,n){return t.call.apply(t.bind,arguments)}function C(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function D(t,e,n){return(D=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?O:C).apply(null,arguments)}function R(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function x(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function P(){this.s=this.s,this.o=this.o}var L={};P.prototype.s=!1,P.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var t=function(t){return Object.prototype.hasOwnProperty.call(t,A)&&t[A]||(t[A]=++N)}(this);delete L[t]}},P.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var M=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"===typeof t)return"string"!==typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},j=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"===typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function F(t){return Array.prototype.concat.apply([],arguments)}function U(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function V(t){return/^[\s\xa0]*$/.test(t)}var q,B=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function G(t,e){return-1!=t.indexOf(e)}function K(t,e){return t<e?-1:t>e?1:0}t:{var H=T.navigator;if(H){var z=H.userAgent;if(z){q=z;break t}}q=""}function J(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function W(t){var e={};for(var n in t)e[n]=t[n];return e}var Z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function X(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<Z.length;o++)n=Z[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Q(t){return Q[" "](t),t}Q[" "]=E;var Y,$=G(q,"Opera"),tt=G(q,"Trident")||G(q,"MSIE"),et=G(q,"Edge"),nt=et||tt,rt=G(q,"Gecko")&&!(G(q.toLowerCase(),"webkit")&&!G(q,"Edge"))&&!(G(q,"Trident")||G(q,"MSIE"))&&!G(q,"Edge"),it=G(q.toLowerCase(),"webkit")&&!G(q,"Edge");function ot(){var t=T.document;return t?t.documentMode:void 0}t:{var at="",st=function(){var t=q;return rt?/rv:([^\);]+)(\)|;)/.exec(t):et?/Edge\/([\d\.]+)/.exec(t):tt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):it?/WebKit\/(\S+)/.exec(t):$?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(st&&(at=st?st[1]:""),tt){var ut=ot();if(null!=ut&&ut>parseFloat(at)){Y=String(ut);break t}}Y=at}var ct,ht={};function lt(){return function(t){var e=ht;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}((function(){for(var t=0,e=B(String(Y)).split("."),n=B("9").split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",a=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==o[0].length&&0==a[0].length)break;t=K(0==o[1].length?0:parseInt(o[1],10),0==a[1].length?0:parseInt(a[1],10))||K(0==o[2].length,0==a[2].length)||K(o[2],a[2]),o=o[3],a=a[3]}while(0==t)}return 0<=t}))}if(T.document&&tt){var ft=ot();ct=ft||(parseInt(Y,10)||void 0)}else ct=void 0;var pt=ct,dt=function(){if(!T.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{T.addEventListener("test",E,e),T.removeEventListener("test",E,e)}catch(n){}return t}();function gt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function vt(t,e){if(gt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(rt){t:{try{Q(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"===typeof t.pointerType?t.pointerType:mt[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&vt.Z.h.call(this)}}gt.prototype.h=function(){this.defaultPrevented=!0},x(vt,gt);var mt={2:"touch",3:"pen",4:"mouse"};vt.prototype.h=function(){vt.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var yt="closure_listenable_"+(1e6*Math.random()|0),bt=0;function wt(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=i,this.key=++bt,this.ca=this.fa=!1}function It(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function _t(t){this.src=t,this.g={},this.h=0}function Tt(t,e){var n=e.type;if(n in t.g){var r,i=t.g[n],o=M(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(It(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function Et(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ca&&o.listener==e&&o.capture==!!n&&o.ia==r)return i}return-1}_t.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.g[o])||(t=this.g[o]=[],this.h++);var a=Et(t,e,r,i);return-1<a?(e=t[a],n||(e.fa=!1)):((e=new wt(e,this.src,o,!!r,i)).fa=n,t.push(e)),e};var St="closure_lm_"+(1e6*Math.random()|0),kt={};function At(t,e,n,r,i){if(r&&r.once)return Ot(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)At(t,e[o],n,r,i);return null}return n=Mt(n),t&&t[yt]?t.N(e,n,k(r)?!!r.capture:!!r,i):Nt(t,e,n,!1,r,i)}function Nt(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=k(i)?!!i.capture:!!i,s=Pt(t);if(s||(t[St]=s=new _t(t)),(n=s.add(e,n,r,a,o)).proxy)return n;if(r=function(){function t(n){return e.call(t.src,t.listener,n)}var e=xt;return t}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)dt||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Rt(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Ot(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)Ot(t,e[o],n,r,i);return null}return n=Mt(n),t&&t[yt]?t.O(e,n,k(r)?!!r.capture:!!r,i):Nt(t,e,n,!0,r,i)}function Ct(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Ct(t,e[o],n,r,i);else r=k(r)?!!r.capture:!!r,n=Mt(n),t&&t[yt]?(t=t.i,(e=String(e).toString())in t.g&&(-1<(n=Et(o=t.g[e],n,r,i))&&(It(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.g[e],t.h--)))):t&&(t=Pt(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Et(e,n,r,i)),(n=-1<t?e[t]:null)&&Dt(n))}function Dt(t){if("number"!==typeof t&&t&&!t.ca){var e=t.src;if(e&&e[yt])Tt(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Rt(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Pt(e))?(Tt(n,t),0==n.h&&(n.src=null,e[St]=null)):It(t)}}}function Rt(t){return t in kt?kt[t]:kt[t]="on"+t}function xt(t,e){if(t.ca)t=!0;else{e=new vt(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&Dt(t),t=n.call(r,e)}return t}function Pt(t){return(t=t[St])instanceof _t?t:null}var Lt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Mt(t){return"function"===typeof t?t:(t[Lt]||(t[Lt]=function(e){return t.handleEvent(e)}),t[Lt])}function jt(){P.call(this),this.i=new _t(this),this.P=this,this.I=null}function Ft(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,"string"===typeof e)e=new gt(e,t);else if(e instanceof gt)e.target=e.target||t;else{var i=e;X(e=new gt(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var a=e.g=n[o];i=Ut(a,r,!0,e)&&i}if(i=Ut(a=e.g=t,r,!0,e)&&i,i=Ut(a,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=Ut(a=e.g=n[o],r,!1,e)&&i}function Ut(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.ca&&a.capture==n){var s=a.listener,u=a.ia||a.src;a.fa&&Tt(t.i,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}x(jt,P),jt.prototype[yt]=!0,jt.prototype.removeEventListener=function(t,e,n,r){Ct(this,t,e,n,r)},jt.prototype.M=function(){if(jt.Z.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)It(n[r]);delete e.g[t],e.h--}}this.I=null},jt.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},jt.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var Vt=T.JSON.stringify;function qt(){var t=Zt,e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var Bt,Gt=function(){function t(){this.h=this.g=null}return t.prototype.add=function(t,e){var n=Kt.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n},t}(),Kt=new(function(){function t(t,e){this.i=t,this.j=e,this.h=0,this.g=null}return t.prototype.get=function(){var t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t},t}())((function(){return new Ht}),(function(t){return t.reset()})),Ht=function(){function t(){this.next=this.g=this.h=null}return t.prototype.set=function(t,e){this.h=t,this.g=e,this.next=null},t.prototype.reset=function(){this.next=this.g=this.h=null},t}();function zt(t){T.setTimeout((function(){throw t}),0)}function Jt(t,e){Bt||function(){var t=T.Promise.resolve(void 0);Bt=function(){t.then(Xt)}}(),Wt||(Bt(),Wt=!0),Zt.add(t,e)}var Wt=!1,Zt=new Gt;function Xt(){for(var t;t=qt();){try{t.h.call(t.g)}catch(n){zt(n)}var e=Kt;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Wt=!1}function Qt(t,e){jt.call(this),this.h=t||1,this.g=e||T,this.j=D(this.kb,this),this.l=Date.now()}function Yt(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function $t(t,e,n){if("function"===typeof t)n&&(t=D(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=D(t.handleEvent,t)}return 2147483647<Number(e)?-1:T.setTimeout(t,e||0)}function te(t){t.g=$t((function(){t.g=null,t.i&&(t.i=!1,te(t))}),t.j);var e=t.h;t.h=null,t.m.apply(null,e)}x(Qt,jt),(w=Qt.prototype).da=!1,w.S=null,w.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Ft(this,"tick"),this.da&&(Yt(this),this.start()))}},w.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},w.M=function(){Qt.Z.M.call(this),Yt(this),delete this.g};var ee=function(t){function e(e,n){var r=t.call(this)||this;return r.m=e,r.j=n,r.h=null,r.i=!1,r.g=null,r}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}y(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.l=function(t){this.h=arguments,this.g?this.i=!0:te(this)},e.prototype.M=function(){t.prototype.M.call(this),this.g&&(T.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},e}(P);function ne(t){P.call(this),this.h=t,this.g={}}x(ne,P);var re=[];function ie(t,e,n,r){Array.isArray(n)||(n&&(re[0]=n.toString()),n=re);for(var i=0;i<n.length;i++){var o=At(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function oe(t){J(t.g,(function(t,e){this.g.hasOwnProperty(e)&&Dt(t)}),t),t.g={}}function ae(){this.g=!0}function se(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}return Vt(n)}catch(s){return e}}(t,n)+(r?" "+r:"")}))}ne.prototype.M=function(){ne.Z.M.call(this),oe(this)},ne.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ae.prototype.Aa=function(){this.g=!1},ae.prototype.info=function(){};var ue={},ce=null;function he(){return ce=ce||new jt}function le(t){gt.call(this,ue.Ma,t)}function fe(t){var e=he();Ft(e,new le(e,t))}function pe(t,e){gt.call(this,ue.STAT_EVENT,t),this.stat=e}function de(t){var e=he();Ft(e,new pe(e,t))}function ge(t,e){gt.call(this,ue.Na,t),this.size=e}function ve(t,e){if("function"!==typeof t)throw Error("Fn must not be null and must be a function");return T.setTimeout((function(){t()}),e)}ue.Ma="serverreachability",x(le,gt),ue.STAT_EVENT="statevent",x(pe,gt),ue.Na="timingevent",x(ge,gt);var me={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},ye={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function be(){}function we(t){return t.h||(t.h=t.i())}function Ie(){}be.prototype.h=null;var _e,Te={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Ee(){gt.call(this,"d")}function Se(){gt.call(this,"c")}function ke(){}function Ae(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new ne(this),this.P=Oe,t=nt?125:void 0,this.W=new Qt(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Ne}function Ne(){this.i=null,this.g="",this.h=!1}x(Ee,gt),x(Se,gt),x(ke,be),ke.prototype.g=function(){return new XMLHttpRequest},ke.prototype.i=function(){return{}},_e=new ke;var Oe=45e3,Ce={},De={};function Re(t,e,n){t.K=1,t.v=en(Ze(e)),t.s=n,t.U=!0,xe(t,null)}function xe(t,e){t.F=Date.now(),je(t),t.A=Ze(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),gn(n.h,"t",r),t.C=0,n=t.l.H,t.h=new Ne,t.g=mr(t.l,n?e:null,!t.s),0<t.O&&(t.L=new ee(D(t.Ia,t,t.g),t.O)),ie(t.V,t.g,"readystatechange",t.gb),e=t.H?W(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),fe(1),function(t,e,n,r,i,o){t.info((function(){if(t.g)if(o)for(var a="",s=o.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var h=c[0];c=c[1];var l=h.split("_");a=2<=l.length&&"type"==l[1]?a+(h+"=")+c+"&":a+(h+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+a}))}(t.j,t.u,t.A,t.m,t.X,t.s)}function Pe(t){return!!t.g&&("GET"==t.u&&2!=t.K&&t.l.Ba)}function Le(t,e,n){for(var r,i=!0;!t.I&&t.C<n.length;){if((r=Me(t,n))==De){4==e&&(t.o=4,de(14),i=!1),se(t.j,t.m,null,"[Incomplete Response]");break}if(r==Ce){t.o=4,de(15),se(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}se(t.j,t.m,r,null),Be(t,r)}Pe(t)&&r!=De&&r!=Ce&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,de(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.aa&&(t.aa=!0,(e=t.l).g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),cr(e),e.L=!0,de(11))):(se(t.j,t.m,n,"[Invalid Chunked Response]"),qe(t),Ve(t))}function Me(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?De:(n=Number(e.substring(n,r)),isNaN(n)?Ce:(r+=1)+n>e.length?De:(e=e.substr(r,n),t.C=r+n,e))}function je(t){t.Y=Date.now()+t.P,Fe(t,t.P)}function Fe(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=ve(D(t.eb,t),e)}function Ue(t){t.B&&(T.clearTimeout(t.B),t.B=null)}function Ve(t){0==t.l.G||t.I||fr(t.l,t)}function qe(t){Ue(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,Yt(t.W),oe(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function Be(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||Tn(n.i,t)))if(n.I=t.N,!t.J&&Tn(n.i,t)&&3==n.G){try{var r=n.Ca.g.parse(e)}catch(o){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;lr(n),tr(n)}ur(n),de(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=ve(D(n.ab,n),6e3));if(1>=_n(n.i)&&n.ka){try{n.ka()}catch(o){}n.ka=void 0}}else dr(n,11)}else if((t.J||n.g==t)&&lr(n),!V(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){var o=i[e];if(n.U=o[0],o=o[1],2==n.G)if("c"==o[0]){n.J=o[1],n.la=o[2];var a=o[3];null!=a&&(n.ma=a,n.h.info("VER="+n.ma));var s=o[4];null!=s&&(n.za=s,n.h.info("SVER="+n.za));var u=o[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=t.g;if(c){var h=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(h){var l=r.i;!l.g&&(G(h,"spdy")||G(h,"quic")||G(h,"h2"))&&(l.j=l.l,l.g=new Set,l.h&&(En(l,l.h),l.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,tn(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms"));var p=t;if((r=n).oa=vr(r,r.H?r.la:null,r.W),p.J){Sn(r.i,p);var d=p,g=r.K;g&&d.setTimeout(g),d.B&&(Ue(d),je(d)),r.g=p}else sr(r);0<n.l.length&&rr(n)}else"stop"!=o[0]&&"close"!=o[0]||dr(n,7);else 3==n.G&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?dr(n,7):$n(n):"noop"!=o[0]&&n.j&&n.j.wa(o),n.A=0)}fe(4)}catch(o){}}function Ge(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(S(t)||"string"===typeof t)j(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(S(t)||"string"===typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;r=function(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"===typeof t)return t.split("");if(S(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),i=r.length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Ke(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Ke)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function He(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];ze(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)ze(i,r=t.g[e])||(t.g[n++]=r,i[r]=1),e++;t.g.length=n}}function ze(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(w=Ae.prototype).setTimeout=function(t){this.P=t},w.gb=function(t){t=t.target;var e=this.L;e&&3==Wn(t)?e.l():this.Ia(t)},w.Ia=function(t){try{if(t==this.g)t:{var e=Wn(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>e)&&(3!=e||nt||this.g&&(this.h.h||this.g.ga()||Zn(this.g)))){this.I||4!=e||7==n||fe(8==n||0>=r?3:2),Ue(this);var i=this.g.ba();this.N=i;e:if(Pe(this)){var o=Zn(this.g);t="";var a=o.length,s=4==Wn(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){qe(this),Ve(this);var u="";break e}this.h.i=new T.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,t+=this.h.i.decode(o[n],{stream:s&&n==a-1});o.splice(0,a),this.h.g+=t,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(t,e,n,r,i,o,a){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+a}))}(this.j,this.u,this.A,this.m,this.X,e,i),this.i){if(this.$&&!this.J){e:{if(this.g){var c,h=this.g;if((c=h.g?h.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(c)){var l=c;break e}}l=null}if(!(i=l)){this.i=!1,this.o=3,de(12),qe(this),Ve(this);break t}se(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Be(this,i)}this.U?(Le(this,e,u),nt&&this.i&&3==e&&(ie(this.V,this.W,"tick",this.fb),this.W.start())):(se(this.j,this.m,u,null),Be(this,u)),4==e&&qe(this),this.i&&!this.I&&(4==e?fr(this.l,this):(this.i=!1,je(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,de(12)):(this.o=0,de(13)),qe(this),Ve(this)}}}catch(e){}},w.fb=function(){if(this.g){var t=Wn(this.g),e=this.g.ga();this.C<e.length&&(Ue(this),Le(this,t,e),this.i&&4!=t&&je(this))}},w.cancel=function(){this.I=!0,qe(this)},w.eb=function(){this.B=null;var t=Date.now();0<=t-this.Y?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.j,this.A),2!=this.K&&(fe(3),de(17)),qe(this),this.o=2,Ve(this)):Fe(this,this.Y-t)},(w=Ke.prototype).R=function(){He(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},w.T=function(){return He(this),this.g.concat()},w.get=function(t,e){return ze(this.h,t)?this.h[t]:e},w.set=function(t,e){ze(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},w.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Je=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function We(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof We){this.g=void 0!==e?e:t.g,Xe(this,t.j),this.s=t.s,Qe(this,t.i),Ye(this,t.m),this.l=t.l,e=t.h;var n=new ln;n.i=e.i,e.g&&(n.g=new Ke(e.g),n.h=e.h),$e(this,n),this.o=t.o}else t&&(n=String(t).match(Je))?(this.g=!!e,Xe(this,n[1]||"",!0),this.s=nn(n[2]||""),Qe(this,n[3]||"",!0),Ye(this,n[4]),this.l=nn(n[5]||"",!0),$e(this,n[6]||"",!0),this.o=nn(n[7]||"")):(this.g=!!e,this.h=new ln(null,this.g))}function Ze(t){return new We(t)}function Xe(t,e,n){t.j=n?nn(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Qe(t,e,n){t.i=n?nn(e,!0):e}function Ye(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function $e(t,e,n){e instanceof ln?(t.h=e,function(t,e){e&&!t.j&&(fn(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(pn(this,e),gn(this,n,t))}),t)),t.j=e}(t.h,t.g)):(n||(e=rn(e,cn)),t.h=new ln(e,t.g))}function tn(t,e,n){t.h.set(e,n)}function en(t){return tn(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function nn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function rn(t,e,n){return"string"===typeof t?(t=encodeURI(t).replace(e,on),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function on(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}We.prototype.toString=function(){var t=[],e=this.j;e&&t.push(rn(e,an,!0),":");var n=this.i;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(rn(e,an,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push(rn(n,"/"==n.charAt(0)?un:sn,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",rn(n,hn)),t.join("")};var an=/[#\/\?@]/g,sn=/[#\?:]/g,un=/[#\?]/g,cn=/[#\?@]/g,hn=/#/g;function ln(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function fn(t){t.g||(t.g=new Ke,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function pn(t,e){fn(t),e=vn(t,e),ze(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,ze((t=t.g).h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&He(t)))}function dn(t,e){return fn(t),e=vn(t,e),ze(t.g.h,e)}function gn(t,e,n){pn(t,e),0<n.length&&(t.i=null,t.g.set(vn(t,e),U(n)),t.h+=n.length)}function vn(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(w=ln.prototype).add=function(t,e){fn(this),this.i=null,t=vn(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},w.forEach=function(t,e){fn(this),this.g.forEach((function(n,r){j(n,(function(n){t.call(e,n,r,this)}),this)}),this)},w.T=function(){fn(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},w.R=function(t){fn(this);var e=[];if("string"===typeof t)dn(this,t)&&(e=F(e,this.g.get(vn(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=F(e,t[n])}return e},w.set=function(t,e){return fn(this),this.i=null,dn(this,t=vn(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},w.get=function(t,e){return t&&0<(t=this.R(t)).length?String(t[0]):e},w.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.i=t.join("&")};var mn=function(t,e){this.h=t,this.g=e};function yn(t){this.l=t||wn,T.PerformanceNavigationTiming?t=0<(t=T.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(T.g&&T.g.Ea&&T.g.Ea()&&T.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var bn,wn=10;function In(t){return!!t.h||!!t.g&&t.g.size>=t.j}function _n(t){return t.h?1:t.g?t.g.size:0}function Tn(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function En(t,e){t.g?t.g.add(e):t.h=e}function Sn(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function kn(t){var e,n;if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){var r=t.i;try{for(var i=b(t.g.values()),o=i.next();!o.done;o=i.next()){var a=o.value;r=r.concat(a.D)}}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return U(t.i)}function An(){}function Nn(){this.g=new An}function On(t,e,n){var r=n||"";try{Ge(t,(function(t,n){var i=t;k(t)&&(i=Vt(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(zp){throw e.push(r+"type="+encodeURIComponent("_badmap")),zp}}function Cn(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}function Dn(t){this.l=t.$b||null,this.j=t.ib||!1}function Rn(t,e){jt.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=xn,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}yn.prototype.cancel=function(){var t,e;if(this.i=kn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=b(this.g.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.g.clear()}},An.prototype.stringify=function(t){return T.JSON.stringify(t,void 0)},An.prototype.parse=function(t){return T.JSON.parse(t,void 0)},x(Dn,be),Dn.prototype.g=function(){return new Rn(this.l,this.j)},Dn.prototype.i=(bn={},function(){return bn}),x(Rn,jt);var xn=0;function Pn(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function Ln(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Mn(t)}function Mn(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(w=Rn.prototype).open=function(t,e){if(this.readyState!=xn)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Mn(this)},w.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||T).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},w.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ln(this)),this.readyState=xn},w.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Mn(this)),this.g&&(this.readyState=3,Mn(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof T.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Pn(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},w.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Ln(this):Mn(this),3==this.readyState&&Pn(this)}},w.Ua=function(t){this.g&&(this.response=this.responseText=t,Ln(this))},w.Ta=function(t){this.g&&(this.response=t,Ln(this))},w.ha=function(){this.g&&Ln(this)},w.setRequestHeader=function(t,e){this.v.append(t,e)},w.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},w.getAllResponseHeaders=function(){if(!this.h)return"";for(var t=[],e=this.h.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(Rn.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var jn=T.JSON.parse;function Fn(t){jt.call(this),this.headers=new Ke,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Un,this.K=this.L=!1}x(Fn,jt);var Un="",Vn=/^https?$/i,qn=["POST","PUT"];function Bn(t){return"content-type"==t.toLowerCase()}function Gn(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Kn(t),zn(t)}function Kn(t){t.D||(t.D=!0,Ft(t,"complete"),Ft(t,"error"))}function Hn(t){if(t.h&&"undefined"!=typeof _&&(!t.C[1]||4!=Wn(t)||2!=t.ba()))if(t.v&&4==Wn(t))$t(t.Fa,0,t);else if(Ft(t,"readystatechange"),4==Wn(t)){t.h=!1;try{var e,n=t.ba();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.H).match(Je)[1]||null;if(!o&&T.self&&T.self.location){var a=T.self.location.protocol;o=a.substr(0,a.length-1)}i=!Vn.test(o?o.toLowerCase():"")}e=i}if(e)Ft(t,"complete"),Ft(t,"success");else{t.m=6;try{var s=2<Wn(t)?t.g.statusText:""}catch(u){s=""}t.j=s+" ["+t.ba()+"]",Kn(t)}}finally{zn(t)}}}function zn(t,e){if(t.g){Jn(t);var n=t.g,r=t.C[0]?E:null;t.g=null,t.C=null,e||Ft(t,"ready");try{n.onreadystatechange=r}catch(zp){}}}function Jn(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(T.clearTimeout(t.A),t.A=null)}function Wn(t){return t.g?t.g.readyState:0}function Zn(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case Un:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Xn(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return J(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"===typeof t?null!=n&&encodeURIComponent(String(n)):tn(t,e,n))}function Qn(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Yn(t){this.za=0,this.l=[],this.h=new ae,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Qn("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Qn("baseRetryDelayMs",5e3,t),this.$a=Qn("retryDelaySeedMs",1e4,t),this.Ya=Qn("forwardChannelMaxRetries",2,t),this.ra=Qn("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new yn(t&&t.concurrentRequestLimit),this.Ca=new Nn,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function $n(t){if(er(t),3==t.G){var e=t.V++,n=Ze(t.F);tn(n,"SID",t.J),tn(n,"RID",e),tn(n,"TYPE","terminate"),or(t,n),(e=new Ae(t,t.h,e,void 0)).K=2,e.v=en(Ze(n)),n=!1,T.navigator&&T.navigator.sendBeacon&&(n=T.navigator.sendBeacon(e.v.toString(),"")),!n&&T.Image&&((new Image).src=e.v,n=!0),n||(e.g=mr(e.l,null),e.g.ea(e.v)),e.F=Date.now(),je(e)}gr(t)}function tr(t){t.g&&(cr(t),t.g.cancel(),t.g=null)}function er(t){tr(t),t.u&&(T.clearTimeout(t.u),t.u=null),lr(t),t.i.cancel(),t.m&&("number"===typeof t.m&&T.clearTimeout(t.m),t.m=null)}function nr(t,e){t.l.push(new mn(t.Za++,e)),3==t.G&&rr(t)}function rr(t){In(t.i)||t.m||(t.m=!0,Jt(t.Ha,t),t.C=0)}function ir(t,e){var n;n=e?e.m:t.V++;var r=Ze(t.F);tn(r,"SID",t.J),tn(r,"RID",n),tn(r,"AID",t.U),or(t,r),t.o&&t.s&&Xn(r,t.o,t.s),n=new Ae(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=ar(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),En(t.i,n),Re(n,r,e)}function or(t,e){t.j&&Ge({},(function(t,n){tn(e,n,t)}))}function ar(t,e,n){n=Math.min(t.l.length,n);var r=t.j?D(t.j.Oa,t.j,t):null;t:for(var i=t.l,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].h,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].h,h=i[u].g;if(0>(c-=o))o=Math.max(0,i[u].h-100),s=!1;else try{On(h,a,"req"+c+"_")}catch($r){r&&r(h)}}if(s){r=a.join("&");break t}}return t=t.l.splice(0,n),e.D=t,r}function sr(t){t.g||t.u||(t.Y=1,Jt(t.Ga,t),t.A=0)}function ur(t){return!(t.g||t.u||3<=t.A)&&(t.Y++,t.u=ve(D(t.Ga,t),pr(t,t.A)),t.A++,!0)}function cr(t){null!=t.B&&(T.clearTimeout(t.B),t.B=null)}function hr(t){t.g=new Ae(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=Ze(t.oa);tn(e,"RID","rpc"),tn(e,"SID",t.J),tn(e,"CI",t.N?"0":"1"),tn(e,"AID",t.U),or(t,e),tn(e,"TYPE","xmlhttp"),t.o&&t.s&&Xn(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=en(Ze(e)),n.s=null,n.U=!0,xe(n,t)}function lr(t){null!=t.v&&(T.clearTimeout(t.v),t.v=null)}function fr(t,e){var n=null;if(t.g==e){lr(t),cr(t),t.g=null;var r=2}else{if(!Tn(t.i,e))return;n=e.D,Sn(t.i,e),r=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;Ft(r=he(),new ge(r,n,e,i)),rr(t)}else sr(t);else if(3==(i=e.o)||0==i&&0<t.I||!(1==r&&function(t,e){return!(_n(t.i)>=t.i.j-(t.m?1:0))&&(t.m?(t.l=e.D.concat(t.l),!0):!(1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya))&&(t.m=ve(D(t.Ha,t,e),pr(t,t.C)),t.C++,!0))}(t,e)||2==r&&ur(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:dr(t,5);break;case 4:dr(t,10);break;case 3:dr(t,6);break;default:dr(t,2)}}function pr(t,e){var n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function dr(t,e){if(t.h.info("Error code "+e),2==e){var n=null;t.j&&(n=null);var r=D(t.jb,t);n||(n=new We("//www.google.com/images/cleardot.gif"),T.location&&"http"==T.location.protocol||Xe(n,"https"),en(n)),function(t,e){var n=new ae;if(T.Image){var r=new Image;r.onload=R(Cn,n,r,"TestLoadImage: loaded",!0,e),r.onerror=R(Cn,n,r,"TestLoadImage: error",!1,e),r.onabort=R(Cn,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=R(Cn,n,r,"TestLoadImage: timeout",!1,e),T.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else de(2);t.G=0,t.j&&t.j.va(e),gr(t),er(t)}function gr(t){t.G=0,t.I=-1,t.j&&(0==kn(t.i).length&&0==t.l.length||(t.i.i.length=0,U(t.l),t.l.length=0),t.j.ua())}function vr(t,e,n){var r=function(t){return t instanceof We?Ze(t):new We(t,void 0)}(n);if(""!=r.i)e&&Qe(r,e+"."+r.i),Ye(r,r.m);else{var i=T.location;r=function(t,e,n,r){var i=new We(null,void 0);return t&&Xe(i,t),e&&Qe(i,e),n&&Ye(i,n),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.aa&&J(t.aa,(function(t,e){tn(r,e,t)})),e=t.D,n=t.sa,e&&n&&tn(r,e,n),tn(r,"VER",t.ma),or(t,r),r}function mr(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=n&&t.Ba&&!t.qa?new Fn(new Dn({ib:!0})):new Fn(t.qa)).L=t.H,e}function yr(){}function br(){if(tt&&!(10<=Number(pt)))throw Error("Environmental error: no available transport.")}function wr(t,e){jt.call(this),this.g=new Yn(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!V(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!V(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&(e in(t=this.h)&&delete t[e])),this.j=new Tr(this)}function Ir(t){Ee.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function _r(){Se.call(this),this.status=1}function Tr(t){this.g=t}(w=Fn.prototype).ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():_e.g(),this.C=this.u?we(this.u):we(_e),this.g.onreadystatechange=D(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(o){return void Gn(this,o)}t=n||"";var i=new Ke(this.headers);r&&Ge(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=Bn,n=t.length,r="string"===typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"===typeof t?t.charAt(e):t[e]}(i.T()),n=T.FormData&&t instanceof T.FormData,!(0<=M(qn,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.g.setRequestHeader(e,t)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Jn(this),0<this.B&&((this.K=function(t){return tt&&lt()&&"number"===typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=D(this.pa,this)):this.A=$t(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){Gn(this,o)}},w.pa=function(){"undefined"!=typeof _&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ft(this,"timeout"),this.abort(8))},w.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Ft(this,"complete"),Ft(this,"abort"),zn(this))},w.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),zn(this,!0)),Fn.Z.M.call(this)},w.Fa=function(){this.s||(this.F||this.v||this.l?Hn(this):this.cb())},w.cb=function(){Hn(this)},w.ba=function(){try{return 2<Wn(this)?this.g.status:-1}catch(bn){return-1}},w.ga=function(){try{return this.g?this.g.responseText:""}catch(bn){return""}},w.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),jn(e)}},w.Da=function(){return this.m},w.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(w=Yn.prototype).ma=8,w.G=1,w.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(e){}},w.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;var e=new Ae(this,this.h,t,void 0),n=this.s;if(this.P&&(n?X(n=W(n),this.P):n=this.P),null===this.o&&(e.H=n),this.ja)t:{for(var r=0,i=0;i<this.l.length;i++){var o=this.l[i];if(void 0===(o="__data__"in o.g&&"string"===typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(r+=o)){r=i;break t}if(4096===r||i===this.l.length-1){r=i+1;break t}}r=1e3}else r=1e3;r=ar(this,e,r),tn(i=Ze(this.F),"RID",t),tn(i,"CVER",22),this.D&&tn(i,"X-HTTP-Session-Id",this.D),or(this,i),this.o&&n&&Xn(i,this.o,n),En(this.i,e),this.Ra&&tn(i,"TYPE","init"),this.ja?(tn(i,"$req",r),tn(i,"SID","null"),e.$=!0,Re(e,i,null)):Re(e,i,r),this.G=2}}else 3==this.G&&(t?ir(this,t):0==this.l.length||In(this.i)||ir(this))},w.Ga=function(){if(this.u=null,hr(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=ve(D(this.bb,this),t)}},w.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,de(10),tr(this),hr(this))},w.ab=function(){null!=this.v&&(this.v=null,tr(this),ur(this),de(19))},w.jb=function(t){t?(this.h.info("Successfully pinged google.com"),de(2)):(this.h.info("Failed to ping google.com"),de(1))},(w=yr.prototype).xa=function(){},w.wa=function(){},w.va=function(){},w.ua=function(){},w.Oa=function(){},br.prototype.g=function(t,e){return new wr(t,e)},x(wr,jt),wr.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),Jt(D(t.hb,t,e))),de(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=vr(t,null,t.W),rr(t)},wr.prototype.close=function(){$n(this.g)},wr.prototype.u=function(t){if("string"===typeof t){var e={};e.__data__=t,nr(this.g,e)}else this.v?((e={}).__data__=Vt(t),nr(this.g,e)):nr(this.g,t)},wr.prototype.M=function(){this.g.j=null,delete this.j,$n(this.g),delete this.g,wr.Z.M.call(this)},x(Ir,Ee),x(_r,Se),x(Tr,yr),Tr.prototype.xa=function(){Ft(this.g,"a")},Tr.prototype.wa=function(t){Ft(this.g,new Ir(t))},Tr.prototype.va=function(t){Ft(this.g,new _r(t))},Tr.prototype.ua=function(){Ft(this.g,"b")},br.prototype.createWebChannel=br.prototype.g,wr.prototype.send=wr.prototype.u,wr.prototype.open=wr.prototype.m,wr.prototype.close=wr.prototype.close,me.NO_ERROR=0,me.TIMEOUT=8,me.HTTP_ERROR=6,ye.COMPLETE="complete",Ie.EventType=Te,Te.OPEN="a",Te.CLOSE="b",Te.ERROR="c",Te.MESSAGE="d",jt.prototype.listen=jt.prototype.N,Fn.prototype.listenOnce=Fn.prototype.O,Fn.prototype.getLastError=Fn.prototype.La,Fn.prototype.getLastErrorCode=Fn.prototype.Da,Fn.prototype.getStatus=Fn.prototype.ba,Fn.prototype.getResponseJson=Fn.prototype.Qa,Fn.prototype.getResponseText=Fn.prototype.ga,Fn.prototype.send=Fn.prototype.ea;var Er=function(){return new br},Sr=function(){return he()},kr=me,Ar=ye,Nr=ue,Or={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Cr=Dn,Dr=Ie,Rr=Fn,xr=n(34155),Pr=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();Pr.o=-1;var Lr={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Mr=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return(0,s.ZT)(e,t),e}(Error),jr=new m.Yd("@firebase/firestore");function Fr(){return jr.logLevel}function Ur(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(jr.logLevel<=m.in.DEBUG){var r=e.map(Br);jr.debug.apply(jr,(0,s.ev)(["Firestore (8.10.1): "+t],r))}}function Vr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(jr.logLevel<=m.in.ERROR){var r=e.map(Br);jr.error.apply(jr,(0,s.ev)(["Firestore (8.10.1): "+t],r))}}function qr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(jr.logLevel<=m.in.WARN){var r=e.map(Br);jr.warn.apply(jr,(0,s.ev)(["Firestore (8.10.1): "+t],r))}}function Br(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}function Gr(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.10.1) INTERNAL ASSERTION FAILED: "+t;throw Vr(e),new Error(e)}function Kr(t,e){t||Gr()}function Hr(t,e){return t}function zr(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Jr=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=zr(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Wr(t,e){return t<e?-1:t>e?1:0}function Zr(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function Xr(t){return t+"\0"}var Qr=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Mr(Lr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Mr(Lr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Mr(Lr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Mr(Lr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?Wr(this.nanoseconds,t.nanoseconds):Wr(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Yr=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new Qr(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function $r(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ti(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function ei(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var ni=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Gr(),void 0===n?n=t.length-e:n>t.length-e&&Gr(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),ri=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,s.ZT)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var a=o[i];if(a.indexOf("//")>=0)throw new Mr(Lr.INVALID_ARGUMENT,"Invalid segment ("+a+"). Paths must not contain // in them.");r.push.apply(r,a.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.emptyPath=function(){return new e([])},e}(ni),ii=/^[_a-zA-Z][_a-zA-Z0-9]*$/,oi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,s.ZT)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return ii.test(t)},e.prototype.canonicalString=function(){return this.toArray().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Mr(Lr.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<t.length;){var s=t[i];if("\\"===s){if(i+1===t.length)throw new Mr(Lr.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Mr(Lr.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new Mr(Lr.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(ni),ai=function(){function t(t){this.fields=t,t.sort(oi.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return Zr(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),si=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.binaryString,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return Wr(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();si.EMPTY_BYTE_STRING=new si("");var ui=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ci(t){if(Kr(!!t),"string"==typeof t){var e=0,n=ui.exec(t);if(Kr(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:hi(t.seconds),nanos:hi(t.nanos)}}function hi(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function li(t){return"string"==typeof t?si.fromBase64String(t):si.fromUint8Array(t)}function fi(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function pi(t){var e=t.mapValue.fields.__previous_value__;return fi(e)?pi(e):e}function di(t){var e=ci(t.mapValue.fields.__local_write_time__.timestampValue);return new Qr(e.seconds,e.nanos)}function gi(t){return null==t}function vi(t){return 0===t&&1/t==-1/0}function mi(t){return"number"==typeof t&&Number.isInteger(t)&&!vi(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var yi=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(ri.fromString(e))},t.fromName=function(e){return new t(ri.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===ri.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return ri.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new ri(e.slice()))},t}();function bi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?fi(t)?4:10:Gr()}function wi(t,e){var n=bi(t);if(n!==bi(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return di(t).isEqual(di(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=ci(t.timestampValue),r=ci(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return li(t.bytesValue).isEqual(li(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return hi(t.geoPointValue.latitude)===hi(e.geoPointValue.latitude)&&hi(t.geoPointValue.longitude)===hi(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return hi(t.integerValue)===hi(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=hi(t.doubleValue),r=hi(e.doubleValue);return n===r?vi(n)===vi(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Zr(t.arrayValue.values||[],e.arrayValue.values||[],wi);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if($r(n)!==$r(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!wi(n[i],r[i])))return!1;return!0}(t,e);default:return Gr()}}function Ii(t,e){return void 0!==(t.values||[]).find((function(t){return wi(t,e)}))}function _i(t,e){var n=bi(t),r=bi(e);if(n!==r)return Wr(n,r);switch(n){case 0:return 0;case 1:return Wr(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=hi(t.integerValue||t.doubleValue),r=hi(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Ti(t.timestampValue,e.timestampValue);case 4:return Ti(di(t),di(e));case 5:return Wr(t.stringValue,e.stringValue);case 6:return function(t,e){var n=li(t),r=li(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Wr(n[i],r[i]);if(0!==o)return o}return Wr(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Wr(hi(t.latitude),hi(e.latitude));return 0!==n?n:Wr(hi(t.longitude),hi(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=_i(n[i],r[i]);if(o)return o}return Wr(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var a=0;a<r.length&&a<o.length;++a){var s=Wr(r[a],o[a]);if(0!==s)return s;var u=_i(n[r[a]],i[o[a]]);if(0!==u)return u}return Wr(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Gr()}}function Ti(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Wr(t,e);var n=ci(t),r=ci(e),i=Wr(n.seconds,r.seconds);return 0!==i?i:Wr(n.nanos,r.nanos)}function Ei(t){return Si(t)}function Si(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=ci(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?li(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,yi.fromName(n).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=Si(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+Si(t.fields[o])}return e+"}"}(t.mapValue):Gr();var e,n}function ki(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function Ai(t){return!!t&&"integerValue"in t}function Ni(t){return!!t&&"arrayValue"in t}function Oi(t){return!!t&&"nullValue"in t}function Ci(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Di(t){return!!t&&"mapValue"in t}function Ri(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){var e={mapValue:{fields:{}}};return ti(t.mapValue.fields,(function(t,n){return e.mapValue.fields[t]=Ri(n)})),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Ri(t.arrayValue.values[r]);return n}return Object.assign({},t)}var xi=function(){function t(t){this.value=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.value;for(var e=this.value,n=0;n<t.length-1;++n)if(!Di(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.set=function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Ri(e)},t.prototype.setAll=function(t){var e=this,n=oi.emptyPath(),r={},i=[];t.forEach((function(t,o){if(!n.isImmediateParentOf(o)){var a=e.getFieldsMap(n);e.applyChanges(a,r,i),r={},i=[],n=o.popLast()}t?r[o.lastSegment()]=Ri(t):i.push(o.lastSegment())}));var o=this.getFieldsMap(n);this.applyChanges(o,r,i)},t.prototype.delete=function(t){var e=this.field(t.popLast());Di(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]},t.prototype.isEqual=function(t){return wi(this.value,t.value)},t.prototype.getFieldsMap=function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var n=0;n<t.length;++n){var r=e.mapValue.fields[t.get(n)];Di(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields},t.prototype.applyChanges=function(t,e,n){ti(e,(function(e,n){return t[e]=n}));for(var r=0,i=n;r<i.length;r++){var o=i[r];delete t[o]}},t.prototype.clone=function(){return new t(Ri(this.value))},t}();function Pi(t){var e=[];return ti(t.fields,(function(t,n){var r=new oi([t]);if(Di(n)){var i=Pi(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,a=i;o<a.length;o++){var s=a[o];e.push(r.child(s))}}else e.push(r)})),new ai(e)}var Li=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,Yr.min(),xi.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,xi.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,xi.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=xi.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=xi.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),Mi=function(t,e,n,r,i,o,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.h=null};function ji(t,e,n,r,i,o,a){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),new Mi(t,e,n,r,i,o,a)}function Fi(t){var e=Hr(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.canonicalString()+t.op.toString()+Ei(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.canonicalString()+t.dir}(t)})).join(","),gi(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Qi(e.startAt)),e.endAt&&(n+="|ub:",n+=Qi(e.endAt)),e.h=n}return e.h}function Ui(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!$i(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!wi(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!eo(t.startAt,e.startAt)&&eo(t.endAt,e.endAt)}function Vi(t){return yi.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var qi=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return(0,s.ZT)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new Bi(t,n,r):"array-contains"===n?new zi(t,r):"in"===n?new Ji(t,r):"not-in"===n?new Wi(t,r):"array-contains-any"===n?new Zi(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new Gi(t,n):new Ki(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(_i(e,this.value)):null!==e&&bi(this.value)===bi(e)&&this.m(_i(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Gr()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),Bi=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=yi.fromName(r.referenceValue),i}return(0,s.ZT)(e,t),e.prototype.matches=function(t){var e=yi.comparator(t.key,this.key);return this.m(e)},e}(qi),Gi=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Hi("in",n),r}return(0,s.ZT)(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(qi),Ki=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Hi("not-in",n),r}return(0,s.ZT)(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(qi);function Hi(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return yi.fromName(t.referenceValue)}))}var zi=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return(0,s.ZT)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return Ni(e)&&Ii(e.arrayValue,this.value)},e}(qi),Ji=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return(0,s.ZT)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&Ii(this.value.arrayValue,e)},e}(qi),Wi=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return(0,s.ZT)(e,t),e.prototype.matches=function(t){if(Ii(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!Ii(this.value.arrayValue,e)},e}(qi),Zi=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return(0,s.ZT)(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!Ni(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return Ii(e.value.arrayValue,t)}))},e}(qi),Xi=function(t,e){this.position=t,this.before=e};function Qi(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return Ei(t)})).join(",")}var Yi=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function $i(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function to(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],a=t.position[i];if(r=o.field.isKeyField()?yi.comparator(yi.fromName(a.referenceValue),n.key):_i(a,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function eo(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!wi(t.position[n],e.position[n]))return!1;return!0}var no=function(t,e,n,r,i,o,a,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===a&&(a=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.p=null,this.T=null,this.startAt,this.endAt};function ro(t,e,n,r,i,o,a,s){return new no(t,e,n,r,i,o,a,s)}function io(t){return new no(t)}function oo(t){return!gi(t.limit)&&"F"===t.limitType}function ao(t){return!gi(t.limit)&&"L"===t.limitType}function so(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function uo(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function co(t){return null!==t.collectionGroup}function ho(t){var e=Hr(t);if(null===e.p){e.p=[];var n=uo(e),r=so(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new Yi(n)),e.p.push(new Yi(oi.keyField(),"asc"));else{for(var i=!1,o=0,a=e.explicitOrderBy;o<a.length;o++){var s=a[o];e.p.push(s),s.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new Yi(oi.keyField(),u))}}}return e.p}function lo(t){var e=Hr(t);if(!e.T)if("F"===e.limitType)e.T=ji(e.path,e.collectionGroup,ho(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=ho(e);r<i.length;r++){var o=i[r],a="desc"===o.dir?"asc":"desc";n.push(new Yi(o.field,a))}var s=e.endAt?new Xi(e.endAt.position,!e.endAt.before):null,u=e.startAt?new Xi(e.startAt.position,!e.startAt.before):null;e.T=ji(e.path,e.collectionGroup,n,e.filters,e.limit,s,u)}return e.T}function fo(t,e,n){return new no(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function po(t,e){return Ui(lo(t),lo(e))&&t.limitType===e.limitType}function go(t){return Fi(lo(t))+"|lt:"+t.limitType}function vo(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.canonicalString()+" "+e.op+" "+Ei(e.value);var e})).join(", ")+"]"),gi(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Qi(t.startAt)),t.endAt&&(e+=", endAt: "+Qi(t.endAt)),"Target("+e+")"}(lo(t))+"; limitType="+t.limitType+")"}function mo(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):yi.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!to(t.startAt,ho(t),e))&&(!t.endAt||!to(t.endAt,ho(t),e))}(t,e)}function yo(t){return function(e,n){for(var r=!1,i=0,o=ho(t);i<o.length;i++){var a=o[i],s=bo(a,e,n);if(0!==s)return s;r=r||a.field.isKeyField()}return 0}}function bo(t,e,n){var r=t.field.isKeyField()?yi.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?_i(r,i):Gr()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Gr()}}function wo(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vi(e)?"-0":e}}function Io(t){return{integerValue:""+t}}function _o(t,e){return mi(e)?Io(e):wo(t,e)}var To=function(){this._=void 0};function Eo(t,e,n){return t instanceof Ao?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof No?Oo(t,e):t instanceof Co?Do(t,e):function(t,e){var n=ko(t,e),r=xo(n)+xo(t.A);return Ai(n)&&Ai(t.A)?Io(r):wo(t.R,r)}(t,e)}function So(t,e,n){return t instanceof No?Oo(t,e):t instanceof Co?Do(t,e):n}function ko(t,e){return t instanceof Ro?Ai(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Ao=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,s.ZT)(e,t),e}(To),No=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return(0,s.ZT)(e,t),e}(To);function Oo(t,e){for(var n=Po(e),r=function(t){n.some((function(e){return wi(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Co=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return(0,s.ZT)(e,t),e}(To);function Do(t,e){for(var n=Po(e),r=function(t){n=n.filter((function(e){return!wi(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Ro=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return(0,s.ZT)(e,t),e}(To);function xo(t){return hi(t.integerValue||t.doubleValue)}function Po(t){return Ni(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Lo=function(t,e){this.field=t,this.transform=e},Mo=function(t,e){this.version=t,this.transformResults=e},jo=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Fo(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var Uo=function(){};function Vo(t,e,n){t instanceof Ho?function(t,e,n){var r=t.value.clone(),i=Wo(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof zo?function(t,e,n){if(Fo(t.precondition,e)){var r=Wo(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(Jo(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function qo(t,e,n){t instanceof Ho?function(t,e,n){if(Fo(t.precondition,e)){var r=t.value.clone(),i=Zo(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(Ko(e),r).setHasLocalMutations()}}(t,e,n):t instanceof zo?function(t,e,n){if(Fo(t.precondition,e)){var r=Zo(t.fieldTransforms,n,e),i=e.data;i.setAll(Jo(t)),i.setAll(r),e.convertToFoundDocument(Ko(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){Fo(t.precondition,e)&&e.convertToNoDocument(Yr.min())}(t,e)}function Bo(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],a=e.data.field(o.field),s=ko(o.transform,a||null);null!=s&&(null==n&&(n=xi.empty()),n.set(o.field,s))}return n||null}function Go(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Zr(t,e,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof No&&e instanceof No||t instanceof Co&&e instanceof Co?Zr(t.elements,e.elements,wi):t instanceof Ro&&e instanceof Ro?wi(t.A,e.A):t instanceof Ao&&e instanceof Ao}(t.transform,e.transform)}(t,e)}))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function Ko(t){return t.isFoundDocument()?t.version:Yr.min()}var Ho=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return(0,s.ZT)(e,t),e}(Uo),zo=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var a=this;return(a=t.call(this)||this).key=e,a.data=n,a.fieldMask=r,a.precondition=i,a.fieldTransforms=o,a.type=1,a}return(0,s.ZT)(e,t),e}(Uo);function Jo(t){var e=new Map;return t.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}})),e}function Wo(t,e,n){var r=new Map;Kr(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],a=o.transform,s=e.data.field(o.field);r.set(o.field,So(a,s,n[i]))}return r}function Zo(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var a=o[i],s=a.transform,u=n.data.field(a.field);r.set(a.field,Eo(s,u,e))}return r}var Xo,Qo,Yo=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return(0,s.ZT)(e,t),e}(Uo),$o=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return(0,s.ZT)(e,t),e}(Uo),ta=function(t){this.count=t};function ea(t){switch(t){case Lr.OK:return Gr();case Lr.CANCELLED:case Lr.UNKNOWN:case Lr.DEADLINE_EXCEEDED:case Lr.RESOURCE_EXHAUSTED:case Lr.INTERNAL:case Lr.UNAVAILABLE:case Lr.UNAUTHENTICATED:return!1;case Lr.INVALID_ARGUMENT:case Lr.NOT_FOUND:case Lr.ALREADY_EXISTS:case Lr.PERMISSION_DENIED:case Lr.FAILED_PRECONDITION:case Lr.ABORTED:case Lr.OUT_OF_RANGE:case Lr.UNIMPLEMENTED:case Lr.DATA_LOSS:return!0;default:return Gr()}}function na(t){if(void 0===t)return Vr("GRPC error has no .code"),Lr.UNKNOWN;switch(t){case Xo.OK:return Lr.OK;case Xo.CANCELLED:return Lr.CANCELLED;case Xo.UNKNOWN:return Lr.UNKNOWN;case Xo.DEADLINE_EXCEEDED:return Lr.DEADLINE_EXCEEDED;case Xo.RESOURCE_EXHAUSTED:return Lr.RESOURCE_EXHAUSTED;case Xo.INTERNAL:return Lr.INTERNAL;case Xo.UNAVAILABLE:return Lr.UNAVAILABLE;case Xo.UNAUTHENTICATED:return Lr.UNAUTHENTICATED;case Xo.INVALID_ARGUMENT:return Lr.INVALID_ARGUMENT;case Xo.NOT_FOUND:return Lr.NOT_FOUND;case Xo.ALREADY_EXISTS:return Lr.ALREADY_EXISTS;case Xo.PERMISSION_DENIED:return Lr.PERMISSION_DENIED;case Xo.FAILED_PRECONDITION:return Lr.FAILED_PRECONDITION;case Xo.ABORTED:return Lr.ABORTED;case Xo.OUT_OF_RANGE:return Lr.OUT_OF_RANGE;case Xo.UNIMPLEMENTED:return Lr.UNIMPLEMENTED;case Xo.DATA_LOSS:return Lr.DATA_LOSS;default:return Gr()}}(Qo=Xo||(Xo={}))[Qo.OK=0]="OK",Qo[Qo.CANCELLED=1]="CANCELLED",Qo[Qo.UNKNOWN=2]="UNKNOWN",Qo[Qo.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qo[Qo.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qo[Qo.NOT_FOUND=5]="NOT_FOUND",Qo[Qo.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qo[Qo.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qo[Qo.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qo[Qo.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qo[Qo.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qo[Qo.ABORTED=10]="ABORTED",Qo[Qo.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qo[Qo.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qo[Qo.INTERNAL=13]="INTERNAL",Qo[Qo.UNAVAILABLE=14]="UNAVAILABLE",Qo[Qo.DATA_LOSS=15]="DATA_LOSS";var ra=function(){function t(t,e){this.comparator=t,this.root=e||oa.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,oa.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,oa.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.inorderTraversal((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new ia(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new ia(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new ia(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new ia(this.root,t,this.comparator,!0)},t}(),ia=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),oa=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw Gr();if(this.right.isRed())throw Gr();var t=this.left.check();if(t!==this.right.check())throw Gr();return t+(this.isRed()?0:1)},t}();oa.EMPTY=null,oa.RED=!0,oa.BLACK=!1,oa.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Gr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Gr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Gr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Gr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Gr()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new oa(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var aa=function(){function t(t){this.comparator=t,this.data=new ra(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new sa(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new sa(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),sa=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),ua=new ra(yi.comparator);function ca(){return ua}var ha=new ra(yi.comparator);function la(){return ha}var fa=new ra(yi.comparator);function pa(){return fa}var da=new aa(yi.comparator);function ga(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=da,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var va=new aa(Wr);function ma(){return va}var ya=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,ba.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(Yr.min(),r,ma(),ca(),ga())},t}(),ba=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(si.EMPTY_BYTE_STRING,n,ga(),ga(),ga())},t}(),wa=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},Ia=function(t,e){this.targetId=t,this.V=e},_a=function(t,e,n,r){void 0===n&&(n=si.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Ta=function(){function t(){this.S=0,this.D=ka(),this.C=si.EMPTY_BYTE_STRING,this.N=!1,this.k=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"F",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$",{get:function(){return this.k},enumerable:!1,configurable:!0}),t.prototype.O=function(t){t.approximateByteSize()>0&&(this.k=!0,this.C=t)},t.prototype.M=function(){var t=ga(),e=ga(),n=ga();return this.D.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Gr()}})),new ba(this.C,this.N,t,e,n)},t.prototype.L=function(){this.k=!1,this.D=ka()},t.prototype.B=function(t,e){this.k=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.k=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.k=!0,this.N=!0},t}(),Ea=function(){function t(t){this.W=t,this.G=new Map,this.H=ca(),this.J=Sa(),this.Y=new aa(Wr)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.tt(r,t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,(function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.O(t.resumeToken);break;case 1:r.K(),r.F||r.L(),r.O(t.resumeToken);break;case 2:r.K(),r.F||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.O(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.O(t.resumeToken));break;default:Gr()}}))},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach((function(t,r){n.st(r)&&e(r)}))},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(Vi(i))if(0===n){var o=new yi(i.path);this.tt(e,o,Li.newNoDocument(o,Yr.min()))}else Kr(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach((function(r,i){var o=e.ot(i);if(o){if(r.current&&Vi(o.target)){var a=new yi(o.target.path);null!==e.H.get(a)||e.at(i,a)||e.tt(i,a,Li.newNoDocument(a,t))}r.$&&(n.set(i,r.M()),r.L())}}));var r=ga();this.J.forEach((function(t,n){var i=!0;n.forEachWhile((function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new ya(t,n,this.Y,this.H,r);return this.H=ca(),this.J=Sa(),this.Y=new aa(Wr),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new Ta,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new aa(Wr),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||Ur("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.F?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new Ta),this.W.getRemoteKeysForTarget(t).forEach((function(n){e.tt(t,n,null)}))},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function Sa(){return new ra(yi.comparator)}function ka(){return new ra(yi.comparator)}var Aa={asc:"ASCENDING",desc:"DESCENDING"},Na={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Oa=function(t,e){this.databaseId=t,this.I=e};function Ca(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Da(t,e){return t.I?e.toBase64():e.toUint8Array()}function Ra(t,e){return Ca(t,e.toTimestamp())}function xa(t){return Kr(!!t),Yr.fromTimestamp(function(t){var e=ci(t);return new Qr(e.seconds,e.nanos)}(t))}function Pa(t,e){return function(t){return new ri(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function La(t){var e=ri.fromString(t);return Kr(os(e)),e}function Ma(t,e){return Pa(t.databaseId,e.path)}function ja(t,e){var n=La(e);if(n.get(1)!==t.databaseId.projectId)throw new Mr(Lr.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Mr(Lr.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new yi(qa(n))}function Fa(t,e){return Pa(t.databaseId,e)}function Ua(t){var e=La(t);return 4===e.length?ri.emptyPath():qa(e)}function Va(t){return new ri(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function qa(t){return Kr(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Ba(t,e,n){return{name:Ma(t,e),fields:n.value.mapValue.fields}}function Ga(t,e,n){var r=ja(t,e.name),i=xa(e.updateTime),o=new xi({mapValue:{fields:e.fields}}),a=Li.newFoundDocument(r,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Ka(t,e){var n;if(e instanceof Ho)n={update:Ba(t,e.key,e.value)};else if(e instanceof Yo)n={delete:Ma(t,e.key)};else if(e instanceof zo)n={update:Ba(t,e.key,e.data),updateMask:is(e.fieldMask)};else{if(!(e instanceof $o))return Gr();n={verify:Ma(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof Ao)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof No)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Co)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Ro)return{fieldPath:e.field.canonicalString(),increment:n.A};throw Gr()}(0,t)}))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Ra(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Gr()}(t,e.precondition)),n}function Ha(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?jo.updateTime(xa(t.updateTime)):void 0!==t.exists?jo.exists(t.exists):jo.none()}(e.currentDocument):jo.none(),r=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)Kr("REQUEST_TIME"===e.setToServerValue),n=new Ao;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new No(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new Co(i)}else"increment"in e?n=new Ro(t,e.increment):Gr();var o=oi.fromServerFormat(e.fieldPath);return new Lo(o,n)}(t,e)})):[];if(e.update){e.update.name;var i=ja(t,e.update.name),o=new xi({mapValue:{fields:e.update.fields}});if(e.updateMask){var a=function(t){var e=t.fieldPaths||[];return new ai(e.map((function(t){return oi.fromServerFormat(t)})))}(e.updateMask);return new zo(i,o,a,n,r)}return new Ho(i,o,n,r)}if(e.delete){var s=ja(t,e.delete);return new Yo(s,n)}if(e.verify){var u=ja(t,e.verify);return new $o(u,n)}return Gr()}function za(t,e){return{documents:[Fa(t,e.path)]}}function Ja(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Fa(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Fa(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(Ci(t.value))return{unaryFilter:{field:ts(t.field),op:"IS_NAN"}};if(Oi(t.value))return{unaryFilter:{field:ts(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Ci(t.value))return{unaryFilter:{field:ts(t.field),op:"IS_NOT_NAN"}};if(Oi(t.value))return{unaryFilter:{field:ts(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ts(t.field),op:$a(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:ts(t.field),direction:Ya(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var a=function(t,e){return t.I||gi(e)?e:{value:e}}(t,e.limit);return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=Xa(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Xa(e.endAt)),n}function Wa(t){var e=Ua(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Kr(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var a=[];n.where&&(a=Za(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(t){return function(t){return new Yi(es(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var u=null;n.limit&&(u=function(t){var e;return gi(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Qa(n.startAt));var h=null;return n.endAt&&(h=Qa(n.endAt)),ro(e,i,s,a,u,"F",c,h)}function Za(t){return t?void 0!==t.unaryFilter?[rs(t)]:void 0!==t.fieldFilter?[ns(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return Za(t)})).reduce((function(t,e){return t.concat(e)})):Gr():[]}function Xa(t){return{before:t.before,values:t.position}}function Qa(t){var e=!!t.before,n=t.values||[];return new Xi(n,e)}function Ya(t){return Aa[t]}function $a(t){return Na[t]}function ts(t){return{fieldPath:t.canonicalString()}}function es(t){return oi.fromServerFormat(t.fieldPath)}function ns(t){return qi.create(es(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Gr()}}(t.fieldFilter.op),t.fieldFilter.value)}function rs(t){switch(t.unaryFilter.op){case"IS_NAN":var e=es(t.unaryFilter.field);return qi.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=es(t.unaryFilter.field);return qi.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=es(t.unaryFilter.field);return qi.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=es(t.unaryFilter.field);return qi.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Gr()}}function is(t){var e=[];return t.fields.forEach((function(t){return e.push(t.canonicalString())})),{fieldPaths:e}}function os(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function as(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=us(e)),e=ss(t.get(n),e);return us(e)}function ss(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function us(t){return t+"\x01\x01"}function cs(t){var e=t.length;if(Kr(e>=2),2===e)return Kr("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),ri.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var a=t.indexOf("\x01",o);switch((a<0||a>n)&&Gr(),t.charAt(a+1)){case"\x01":var s=t.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"\x10":i+=t.substring(o,a),i+="\0";break;case"\x11":i+=t.substring(o,a+1);break;default:Gr()}o=a+2}return new ri(r)}var hs=function(t,e){this.seconds=t,this.nanoseconds=e},ls=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};ls.store="owner",ls.key="owner";var fs=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};fs.store="mutationQueues",fs.keyPath="userId";var ps=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};ps.store="mutations",ps.keyPath="batchId",ps.userMutationsIndex="userMutationsIndex",ps.userMutationsKeyPath=["userId","batchId"];var ds=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,as(e)]},t.key=function(t,e,n){return[t,as(e),n]},t}();ds.store="documentMutations",ds.PLACEHOLDER=new ds;var gs=function(t,e){this.path=t,this.readTime=e},vs=function(t,e){this.path=t,this.version=e},ms=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};ms.store="remoteDocuments",ms.readTimeIndex="readTimeIndex",ms.readTimeIndexPath="readTime",ms.collectionReadTimeIndex="collectionReadTimeIndex",ms.collectionReadTimeIndexPath=["parentPath","readTime"];var ys=function(t){this.byteSize=t};ys.store="remoteDocumentGlobal",ys.key="remoteDocumentGlobalKey";var bs=function(t,e,n,r,i,o,a){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a};bs.store="targets",bs.keyPath="targetId",bs.queryTargetsIndexName="queryTargetsIndex",bs.queryTargetsKeyPath=["canonicalId","targetId"];var ws=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};ws.store="targetDocuments",ws.keyPath=["targetId","path"],ws.documentTargetsIndex="documentTargetsIndex",ws.documentTargetsKeyPath=["path","targetId"];var Is=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Is.key="targetGlobalKey",Is.store="targetGlobal";var _s=function(t,e){this.collectionId=t,this.parent=e};_s.store="collectionParents",_s.keyPath=["collectionId","parent"];var Ts=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Ts.store="clientMetadata",Ts.keyPath="clientId";var Es=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Es.store="bundles",Es.keyPath="bundleId";var Ss=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Ss.store="namedQueries",Ss.keyPath="name";var ks=(0,s.ev)((0,s.ev)([],(0,s.ev)((0,s.ev)([],(0,s.ev)((0,s.ev)([],(0,s.ev)((0,s.ev)([],[fs.store,ps.store,ds.store,ms.store,bs.store,ls.store,Is.store,ws.store]),[Ts.store])),[ys.store])),[_s.store])),[Es.store,Ss.store]),As="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Ns=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(t){return t()}))},t}(),Os=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},Cs=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)}),(function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&Gr(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}}))},t.prototype.toPromise=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.waitFor=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.waitFor(r)},t}(),Ds=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new Os,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new Ps(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=Us(e.target.error);n.ft.reject(new Ps(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new Ps(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(Ur("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Ms(e)},t}(),Rs=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t((0,v.z$)())&&Vr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return Ur("SimpleDb","Removing database:",t),js(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=(0,v.z$)(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof xr&&"YES"===(null===(t=xr.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return(0,s.mG)(this,void 0,void 0,(function(){var e,n=this;return(0,s.Jh)(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(Ur("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Ps(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Mr(Lr.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new Ps(t,n))},i.onupgradeneeded=function(t){Ur("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.wt.Rt(e,i.transaction,t.oldVersion,n.version).next((function(){Ur("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}}))}))},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return(0,s.mG)(this,void 0,void 0,(function(){var i,o,a,u,c;return(0,s.Jh)(this,(function(h){switch(h.label){case 0:i="readonly"===e,o=0,a=function(){var e,a,c,h,l;return(0,s.Jh)(this,(function(s){switch(s.label){case 0:++o,s.label=1;case 1:return s.trys.push([1,4,,5]),[4,u.At(t)];case 2:return u.db=s.sent(),e=Ds.open(u.db,t,i?"readonly":"readwrite",n),a=r(e).catch((function(t){return e.abort(t),Cs.reject(t)})).toPromise(),c={},a.catch((function(){})),[4,e.dt];case 3:return[2,(c.value=(s.sent(),a),c)];case 4:return h=s.sent(),l="FirebaseError"!==h.name&&o<3,Ur("SimpleDb","Transaction failed with error:",h.message,"Retrying:",l),u.close(),l?[3,5]:[2,{value:Promise.reject(h)}];case 5:return[2]}}))},u=this,h.label=1;case 1:return[5,a()];case 2:if("object"==typeof(c=h.sent()))return[2,c.value];h.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),xs=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return js(this.Pt.delete())},t}(),Ps=function(t){function e(e,n){var r=this;return(r=t.call(this,Lr.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return(0,s.ZT)(e,t),e}(Mr);function Ls(t){return"IndexedDbTransactionError"===t.name}var Ms=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Ur("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Ur("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),js(n)},t.prototype.add=function(t){return Ur("SimpleDb","ADD",this.store.name,t,t),js(this.store.add(t))},t.prototype.get=function(t){var e=this;return js(this.store.get(t)).next((function(n){return void 0===n&&(n=null),Ur("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return Ur("SimpleDb","DELETE",this.store.name,t),js(this.store.delete(t))},t.prototype.count=function(){return Ur("SimpleDb","COUNT",this.store.name),js(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.kt=function(t,e){Ur("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.Ft=!1;var r=this.cursor(n);return this.xt(r,(function(t,e,n){return n.delete()}))},t.prototype.$t=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.Ot=function(t){var e=this.cursor({});return new Cs((function(n,r){e.onerror=function(t){var e=Us(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.xt=function(t,e){var n=[];return new Cs((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new xs(i),a=e(i.primaryKey,i.value,o);if(a instanceof Cs){var s=a.catch((function(t){return o.done(),Cs.reject(t)}));n.push(s)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}})).next((function(){return Cs.waitFor(n)}))},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.Ft?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function js(t){return new Cs((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=Us(t.target.error);n(e)}}))}var Fs=!1;function Us(t){var e=Rs._t((0,v.z$)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Mr("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Fs||(Fs=!0,setTimeout((function(){throw r}),0)),r}}return t}var Vs=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return(0,s.ZT)(e,t),e}(Ns);function qs(t,e){var n=Hr(t);return Rs.It(n.Mt,e)}var Bs=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&Vo(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&qo(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&qo(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach((function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Yr.min())}))},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),ga())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Zr(this.mutations,t.mutations,(function(t,e){return Go(t,e)}))&&Zr(this.baseMutations,t.baseMutations,(function(t,e){return Go(t,e)}))},t}(),Gs=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){Kr(e.mutations.length===r.length);for(var i=pa(),o=e.mutations,a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new t(e,n,r,i)},t}(),Ks=function(){function t(t,e,n,r,i,o,a){void 0===i&&(i=Yr.min()),void 0===o&&(o=Yr.min()),void 0===a&&(a=si.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),Hs=function(t){this.Lt=t};function zs(t,e){if(e.document)return Ga(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=yi.fromSegments(e.noDocument.path),r=Qs(e.noDocument.readTime),i=Li.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=yi.fromSegments(e.unknownDocument.path);return r=Qs(e.unknownDocument.version),Li.newUnknownDocument(o,r)}return Gr()}function Js(t,e,n){var r=Ws(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:Ma(t,e.key),fields:e.data.value.mapValue.fields,updateTime:Ca(t,e.version.toTimestamp())}}(t.Lt,e),a=e.hasCommittedMutations;return new ms(null,null,o,a,r,i)}if(e.isNoDocument()){var s=e.key.path.toArray(),u=Xs(e.version);return a=e.hasCommittedMutations,new ms(null,new gs(s,u),null,a,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),h=Xs(e.version);return new ms(new vs(c,h),null,null,!0,r,i)}return Gr()}function Ws(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Zs(t){var e=new Qr(t[0],t[1]);return Yr.fromTimestamp(e)}function Xs(t){var e=t.toTimestamp();return new hs(e.seconds,e.nanoseconds)}function Qs(t){var e=new Qr(t.seconds,t.nanoseconds);return Yr.fromTimestamp(e)}function Ys(t,e){for(var n=(e.baseMutations||[]).map((function(e){return Ha(t.Lt,e)})),r=0;r<e.mutations.length-1;++r){var i=e.mutations[r];if(r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform){var o=e.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(r+1,1),++r}}var a=e.mutations.map((function(e){return Ha(t.Lt,e)})),s=Qr.fromMillis(e.localWriteTimeMs);return new Bs(e.batchId,s,n,a)}function $s(t){var e,n,r=Qs(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Qs(t.lastLimboFreeSnapshotVersion):Yr.min();return void 0!==t.query.documents?(Kr(1===(n=t.query).documents.length),e=lo(io(Ua(n.documents[0])))):e=function(t){return lo(Wa(t))}(t.query),new Ks(e,t.targetId,0,t.lastListenSequenceNumber,r,i,si.fromBase64String(t.resumeToken))}function tu(t,e){var n,r=Xs(e.snapshotVersion),i=Xs(e.lastLimboFreeSnapshotVersion);n=Vi(e.target)?za(t.Lt,e.target):Ja(t.Lt,e.target);var o=e.resumeToken.toBase64();return new bs(e.targetId,Fi(e.target),r,o,e.sequenceNumber,i,n)}function eu(t){var e=Wa({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?fo(e,e.limit,"L"):e}var nu=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return ru(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:Qs(e.createTime),version:e.version};var e}))},t.prototype.saveBundleMetadata=function(t,e){return ru(t).put({bundleId:(n=e).id,createTime:Xs(xa(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return iu(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:eu(e.bundledQuery),readTime:Qs(e.readTime)};var e}))},t.prototype.saveNamedQuery=function(t,e){return iu(t).put(function(t){return{name:t.name,readTime:Xs(xa(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function ru(t){return qs(t,Es.store)}function iu(t){return qs(t,Ss.store)}var ou=function(){function t(){this.Bt=new au}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),Cs.resolve()},t.prototype.getCollectionParents=function(t,e){return Cs.resolve(this.Bt.getEntries(e))},t}(),au=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new aa(ri.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new aa(ri.comparator)).toArray()},t}(),su=function(){function t(){this.qt=new au}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener((function(){n.qt.add(e)}));var o={collectionId:r,parent:as(i)};return uu(t).put(o)}return Cs.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Xr(e),""],!1,!0);return uu(t).Nt(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(cs(o.parent))}return n}))},t}();function uu(t){return qs(t,_s.store)}var cu={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},hu=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function lu(t,e,n){var r=t.store(ps.store),i=t.store(ds.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.$t({range:a},(function(t,e,n){return s++,n.delete()}));o.push(u.next((function(){Kr(1===s)})));for(var c=[],h=0,l=n.mutations;h<l.length;h++){var f=l[h],p=ds.key(e,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return Cs.waitFor(o).next((function(){return c}))}function fu(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Gr();e=t.noDocument}return JSON.stringify(e).length}hu.DEFAULT_COLLECTION_PERCENTILE=10,hu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,hu.DEFAULT=new hu(41943040,hu.DEFAULT_COLLECTION_PERCENTILE,hu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),hu.DISABLED=new hu(-1,0,0);var pu=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Kt={}}return t.Qt=function(e,n,r,i){return Kr(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return gu(t).$t({index:ps.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=vu(t),a=gu(t);return a.add({}).next((function(s){Kr("number"==typeof s);for(var u=new Bs(s,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return Ka(t.Lt,e)})),i=n.mutations.map((function(e){return Ka(t.Lt,e)}));return new ps(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),h=[],l=new aa((function(t,e){return Wr(t.canonicalString(),e.canonicalString())})),f=0,p=r;f<p.length;f++){var d=p[f],g=ds.key(i.userId,d.key.path,s);l=l.add(d.key.path.popLast()),h.push(a.put(c)),h.push(o.put(g,ds.PLACEHOLDER))}return l.forEach((function(e){h.push(i.Ut.addToCollectionParentIndex(t,e))})),t.addOnCommittedListener((function(){i.Kt[s]=u.keys()})),Cs.waitFor(h).next((function(){return u}))}))},t.prototype.lookupMutationBatch=function(t,e){var n=this;return gu(t).get(e).next((function(t){return t?(Kr(t.userId===n.userId),Ys(n.R,t)):null}))},t.prototype.jt=function(t,e){var n=this;return this.Kt[e]?Cs.resolve(this.Kt[e]):this.lookupMutationBatch(t,e).next((function(t){if(t){var r=t.keys();return n.Kt[e]=r,r}return null}))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return gu(t).$t({index:ps.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(Kr(e.batchId>=r),o=Ys(n.R,e)),i.done()})).next((function(){return o}))},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return gu(t).$t({index:ps.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return gu(t).Nt(ps.userMutationsIndex,n).next((function(t){return t.map((function(t){return Ys(e.R,t)}))}))},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=ds.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return vu(t).$t({range:i},(function(r,i,a){var s=r[0],u=r[1],c=r[2],h=cs(u);if(s===n.userId&&e.path.isEqual(h))return gu(t).get(c).next((function(t){if(!t)throw Gr();Kr(t.userId===n.userId),o.push(Ys(n.R,t))}));a.done()})).next((function(){return o}))},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new aa(Wr),i=[];return e.forEach((function(e){var o=ds.prefixForPath(n.userId,e.path),a=IDBKeyRange.lowerBound(o),s=vu(t).$t({range:a},(function(t,i,o){var a=t[0],s=t[1],u=t[2],c=cs(s);a===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(s)})),Cs.waitFor(i).next((function(){return n.Wt(t,r)}))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=ds.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new aa(Wr);return vu(t).$t({range:a},(function(t,e,o){var a=t[0],u=t[1],c=t[2],h=cs(u);a===n.userId&&r.isPrefixOf(h)?h.length===i&&(s=s.add(c)):o.done()})).next((function(){return n.Wt(t,s)}))},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(gu(t).get(e).next((function(t){if(null===t)throw Gr();Kr(t.userId===n.userId),r.push(Ys(n.R,t))})))})),Cs.waitFor(i).next((function(){return r}))},t.prototype.removeMutationBatch=function(t,e){var n=this;return lu(t.Mt,this.userId,e).next((function(r){return t.addOnCommittedListener((function(){n.Gt(e.batchId)})),Cs.forEach(r,(function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)}))}))},t.prototype.Gt=function(t){delete this.Kt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next((function(n){if(!n)return Cs.resolve();var r=IDBKeyRange.lowerBound(ds.prefixForUser(e.userId)),i=[];return vu(t).$t({range:r},(function(t,n,r){if(t[0]===e.userId){var o=cs(t[1]);i.push(o)}else r.done()})).next((function(){Kr(0===i.length)}))}))},t.prototype.containsKey=function(t,e){return du(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return mu(t).get(this.userId).next((function(t){return t||new fs(e.userId,-1,"")}))},t}();function du(t,e,n){var r=ds.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return vu(t).$t({range:o,Ft:!0},(function(t,n,r){var o=t[0],s=t[1];t[2],o===e&&s===i&&(a=!0),r.done()})).next((function(){return a}))}function gu(t){return qs(t,ps.store)}function vu(t){return qs(t,ds.store)}function mu(t){return qs(t,fs.store)}var yu=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),bu=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next((function(n){var r=new yu(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next((function(t){return Yr.fromTimestamp(new Qr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)}))},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next((function(){return n.Xt(t).next((function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)}))}))},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next((function(){return wu(t).delete(e.targetId)})).next((function(){return n.Xt(t)})).next((function(e){return Kr(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)}))},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return wu(t).$t((function(a,s){var u=$s(s);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))})).next((function(){return Cs.waitFor(o)})).next((function(){return i}))},t.prototype.forEachTarget=function(t,e){return wu(t).$t((function(t,n){var r=$s(n);e(r)}))},t.prototype.Xt=function(t){return Iu(t).get(Is.key).next((function(t){return Kr(null!==t),t}))},t.prototype.Zt=function(t,e){return Iu(t).put(Is.key,e)},t.prototype.te=function(t,e){return wu(t).put(tu(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next((function(t){return t.targetCount}))},t.prototype.getTargetData=function(t,e){var n=Fi(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return wu(t).$t({range:r,index:bs.queryTargetsIndexName},(function(t,n,r){var o=$s(n);Ui(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=_u(t);return e.forEach((function(e){var a=as(e.path);i.push(o.put(new ws(n,a))),i.push(r.referenceDelegate.addReference(t,n,e))})),Cs.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=_u(t);return Cs.forEach(e,(function(e){var o=as(e.path);return Cs.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])}))},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=_u(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=_u(t),i=ga();return r.$t({range:n,Ft:!0},(function(t,e,n){var r=cs(t[1]),o=new yi(r);i=i.add(o)})).next((function(){return i}))},t.prototype.containsKey=function(t,e){var n=as(e.path),r=IDBKeyRange.bound([n],[Xr(n)],!1,!0),i=0;return _u(t).$t({index:ws.documentTargetsIndex,Ft:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.lt=function(t,e){return wu(t).get(e).next((function(t){return t?$s(t):null}))},t}();function wu(t){return qs(t,bs.store)}function Iu(t){return qs(t,Is.store)}function _u(t){return qs(t,ws.store)}function Tu(t){return(0,s.mG)(this,void 0,void 0,(function(){return(0,s.Jh)(this,(function(e){if(t.code!==Lr.FAILED_PRECONDITION||t.message!==As)throw t;return Ur("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}function Eu(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],a=Wr(n,i);return 0===a?Wr(r,o):a}var Su=function(){function t(t){this.ne=t,this.buffer=new aa(Eu),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Eu(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),ku=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;Ur("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(function(){return(0,s.mG)(e,void 0,void 0,(function(){var e;return(0,s.Jh)(this,(function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return Ls(e=n.sent())?(Ur("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Tu(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),Au=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return Cs.resolve(Pr.o);var r=new Su(e);return this.ae.forEachTarget(t,(function(t){return r.re(t.sequenceNumber)})).next((function(){return n.ae.le(t,(function(t){return r.re(t)}))})).next((function(){return r.maxValue}))},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Ur("LruGarbageCollector","Garbage collection skipped; disabled"),Cs.resolve(cu)):this.getCacheSize(t).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Ur("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),cu):n.fe(t,e)}))},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,a,s,u,c=this,h=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((function(e){return e>c.params.maximumSequenceNumbersToCollect?(Ur("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)})).next((function(r){return n=r,a=Date.now(),c.removeTargets(t,n,e)})).next((function(e){return i=e,s=Date.now(),c.removeOrphanedDocuments(t,n)})).next((function(t){return u=Date.now(),Fr()<=m.in.DEBUG&&Ur("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-h)+"ms\n\tDetermined least recently used "+r+" in "+(a-o)+"ms\n\tRemoved "+i+" targets in "+(s-a)+"ms\n\tRemoved "+t+" documents in "+(u-s)+"ms\nTotal Duration: "+(u-h)+"ms"),Cs.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})}))},t}(),Nu=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new Au(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.de=function(t){var e=0;return this.le(t,(function(t){e++})).next((function(){return e}))},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,(function(t,n){return e(n)}))},t.prototype.addReference=function(t,e,n){return Ou(t,n)},t.prototype.removeReference=function(t,e,n){return Ou(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return Ou(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return mu(t).Ot((function(r){return du(t,r,e).next((function(t){return t&&(n=!0),Cs.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,(function(a,s){if(s<=e){var u=n._e(t,a).next((function(e){if(!e)return o++,r.getEntry(t,a).next((function(){return r.removeEntry(a),_u(t).delete([0,as(a.path)])}))}));i.push(u)}})).next((function(){return Cs.waitFor(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return Ou(t,e)},t.prototype.we=function(t,e){var n,r=_u(t),i=Pr.o;return r.$t({index:ws.documentTargetsIndex},(function(t,r){var o=t[0];t[1];var a=r.path,s=r.sequenceNumber;0===o?(i!==Pr.o&&e(new yi(cs(n)),i),i=s,n=a):i=Pr.o})).next((function(){i!==Pr.o&&e(new yi(cs(n)),i)}))},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function Ou(t,e){return _u(t).put(function(t,e){return new ws(0,as(t.path),e)}(e,t.currentSequenceNumber))}var Cu=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(this.equalsFn(a,t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){ti(this.inner,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];t(a,s)}}))},t.prototype.isEmpty=function(){return ei(this.inner)},t}(),Du=function(){function t(){this.changes=new Cu((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:Yr.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:Li.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?Cs.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),Ru=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return Lu(t).put(Mu(e),n)},t.prototype.removeEntry=function(t,e){var n=Lu(t),r=Mu(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.me(t,r)}))},t.prototype.getEntry=function(t,e){var n=this;return Lu(t).get(Mu(e)).next((function(t){return n.ye(e,t)}))},t.prototype.ge=function(t,e){var n=this;return Lu(t).get(Mu(e)).next((function(t){return{document:n.ye(e,t),size:fu(t)}}))},t.prototype.getEntries=function(t,e){var n=this,r=ca();return this.pe(t,e,(function(t,e){var i=n.ye(t,e);r=r.insert(t,i)})).next((function(){return r}))},t.prototype.Ee=function(t,e){var n=this,r=ca(),i=new ra(yi.comparator);return this.pe(t,e,(function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,fu(e))})).next((function(){return{documents:r,Te:i}}))},t.prototype.pe=function(t,e,n){if(e.isEmpty())return Cs.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return Lu(t).$t({range:r},(function(t,e,r){for(var a=yi.fromSegments(t);o&&yi.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=ca(),o=e.path.length+1,a={};if(n.isEqual(Yr.min())){var s=e.path.toArray();a.range=IDBKeyRange.lowerBound(s)}else{var u=e.path.toArray(),c=Ws(n);a.range=IDBKeyRange.lowerBound([u,c],!0),a.index=ms.collectionReadTimeIndex}return Lu(t).$t(a,(function(t,n,a){if(t.length===o){var s=zs(r.R,n);e.path.isPrefixOf(s.key.path)?mo(e,s)&&(i=i.insert(s.key,s)):a.done()}})).next((function(){return i}))},t.prototype.newChangeBuffer=function(t){return new xu(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return Pu(t).get(ys.key).next((function(t){return Kr(!!t),t}))},t.prototype.me=function(t,e){return Pu(t).put(ys.key,e)},t.prototype.ye=function(t,e){if(e){var n=zs(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(Yr.min()))return n}return Li.newInvalidDocument(t)},t}(),xu=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new Cu((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return(0,s.ZT)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new aa((function(t,e){return Wr(t.canonicalString(),e.canonicalString())}));return this.changes.forEach((function(o,a){var s=e.Ae.get(o);if(a.document.isValidDocument()){var u=Js(e.Ie.R,a.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=fu(u);r+=c-s,n.push(e.Ie.addEntry(t,o,u))}else if(r-=s,e.trackRemovals){var h=Js(e.Ie.R,Li.newNoDocument(o,Yr.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,h))}else n.push(e.Ie.removeEntry(t,o))})),i.forEach((function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))})),n.push(this.Ie.updateMetadata(t,r)),Cs.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next((function(t){return n.Ae.set(e,t.size),t.document}))},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next((function(t){var e=t.documents;return t.Te.forEach((function(t,e){n.Ae.set(t,e)})),e}))},e}(Du);function Pu(t){return qs(t,ys.store)}function Lu(t){return qs(t,ms.store)}function Mu(t){return t.path.toArray()}var ju=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;Kr(n<r&&n>=0&&r<=11);var o=new Ds("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(ls.store)}(t),function(t){t.createObjectStore(fs.store,{keyPath:fs.keyPath}),t.createObjectStore(ps.store,{keyPath:ps.keyPath,autoIncrement:!0}).createIndex(ps.userMutationsIndex,ps.userMutationsKeyPath,{unique:!0}),t.createObjectStore(ds.store)}(t),Fu(t),function(t){t.createObjectStore(ms.store)}(t));var a=Cs.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(ws.store),t.deleteObjectStore(bs.store),t.deleteObjectStore(Is.store)}(t),Fu(t)),a=a.next((function(){return function(t){var e=t.store(Is.store),n=new Is(0,0,Yr.min().toTimestamp(),0);return e.put(Is.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(a=a.next((function(){return function(t,e){return e.store(ps.store).Nt().next((function(n){t.deleteObjectStore(ps.store),t.createObjectStore(ps.store,{keyPath:ps.keyPath,autoIncrement:!0}).createIndex(ps.userMutationsIndex,ps.userMutationsKeyPath,{unique:!0});var r=e.store(ps.store),i=n.map((function(t){return r.put(t)}));return Cs.waitFor(i)}))}(t,o)}))),a=a.next((function(){!function(t){t.createObjectStore(Ts.store,{keyPath:Ts.keyPath})}(t)}))),n<5&&r>=5&&(a=a.next((function(){return i.Re(o)}))),n<6&&r>=6&&(a=a.next((function(){return function(t){t.createObjectStore(ys.store)}(t),i.be(o)}))),n<7&&r>=7&&(a=a.next((function(){return i.ve(o)}))),n<8&&r>=8&&(a=a.next((function(){return i.Pe(t,o)}))),n<9&&r>=9&&(a=a.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(ms.store);e.createIndex(ms.readTimeIndex,ms.readTimeIndexPath,{unique:!1}),e.createIndex(ms.collectionReadTimeIndex,ms.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(a=a.next((function(){return i.Ve(o)}))),n<11&&r>=11&&(a=a.next((function(){!function(t){t.createObjectStore(Es.store,{keyPath:Es.keyPath})}(t),function(t){t.createObjectStore(Ss.store,{keyPath:Ss.keyPath})}(t)}))),a},t.prototype.be=function(t){var e=0;return t.store(ms.store).$t((function(t,n){e+=fu(n)})).next((function(){var n=new ys(e);return t.store(ys.store).put(ys.key,n)}))},t.prototype.Re=function(t){var e=this,n=t.store(fs.store),r=t.store(ps.store);return n.Nt().next((function(n){return Cs.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(ps.userMutationsIndex,i).next((function(r){return Cs.forEach(r,(function(r){Kr(r.userId===n.userId);var i=Ys(e.R,r);return lu(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ve=function(t){var e=t.store(ws.store),n=t.store(ms.store);return t.store(Is.store).get(Is.key).next((function(t){var r=[];return n.$t((function(n,i){var o=new ri(n),a=function(t){return[0,as(t)]}(o);r.push(e.get(a).next((function(n){return n?Cs.resolve():function(n){return e.put(new ws(0,as(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return Cs.waitFor(r)}))}))},t.prototype.Pe=function(t,e){t.createObjectStore(_s.store,{keyPath:_s.keyPath});var n=e.store(_s.store),r=new au,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:as(i)})}};return e.store(ms.store).$t({Ft:!0},(function(t,e){var n=new ri(t);return i(n.popLast())})).next((function(){return e.store(ds.store).$t({Ft:!0},(function(t,e){t[0];var n=t[1];t[2];var r=cs(n);return i(r.popLast())}))}))},t.prototype.Ve=function(t){var e=this,n=t.store(bs.store);return n.$t((function(t,r){var i=$s(r),o=tu(e.R,i);return n.put(o)}))},t}();function Fu(t){t.createObjectStore(ws.store,{keyPath:ws.keyPath}).createIndex(ws.documentTargetsIndex,ws.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(bs.store,{keyPath:bs.keyPath}).createIndex(bs.queryTargetsIndexName,bs.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Is.store)}var Uu="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Vu=function(){function t(e,n,r,i,o,a,s,u,c,h){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=a,this.document=s,this.De=c,this.Ce=h,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ke=null,this.inForeground=!1,this.Fe=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new Mr(Lr.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Nu(this,i),this.Le=n+"main",this.R=new Hs(u),this.Be=new Rs(this.Le,11,new ju(this.R)),this.qe=new bu(this.referenceDelegate,this.R),this.Ut=new su,this.Ue=function(t,e){return new Ru(t,e)}(this.R,this.Ut),this.Ke=new nu,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===h&&Vr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Mr(Lr.FAILED_PRECONDITION,Uu);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.qe.getHighestSequenceNumber(e)}))})).then((function(e){t.Ne=new Pr(e,t.De)})).then((function(){t.xe=!0})).catch((function(e){return t.Be&&t.Be.close(),Promise.reject(e)}))},t.prototype.He=function(t){var e=this;return this.Me=function(n){return(0,s.mG)(e,void 0,void 0,(function(){return(0,s.Jh)(this,(function(e){return this.started?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt((function(n){return(0,s.mG)(e,void 0,void 0,(function(){return(0,s.Jh)(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget((function(){return(0,s.mG)(e,void 0,void 0,(function(){return(0,s.Jh)(this,(function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return Bu(e).put(new Ts(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Je(e).next((function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable((function(){return t.Me(!1)})))}))})).next((function(){return t.Ye(e)})).next((function(n){return t.isPrimary&&!n?t.Xe(e).next((function(){return!1})):!!n&&t.Ze(e).next((function(){return!0}))}))})).catch((function(e){if(Ls(e))return Ur("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Ur("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Se.enqueueRetryable((function(){return t.Me(e)})),t.isPrimary=e}))},t.prototype.Je=function(t){var e=this;return qu(t).get(ls.key).next((function(t){return Cs.resolve(e.tn(t))}))},t.prototype.en=function(t){return Bu(t).delete(this.clientId)},t.prototype.nn=function(){return(0,s.mG)(this,void 0,void 0,(function(){var t,e,n,r,i=this;return(0,s.Jh)(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=qs(t,Ts.store);return e.Nt().next((function(t){var n=i.rn(t,18e5),r=t.filter((function(t){return-1===n.indexOf(t)}));return Cs.forEach(r,(function(t){return e.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=o.sent(),this.Qe)for(e=0,n=t;e<n.length;e++)r=n[e],this.Qe.removeItem(this.on(r.clientId));o.label=2;case 2:return[2]}}))}))},t.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return t.je().then((function(){return t.nn()})).then((function(){return t.ze()}))}))},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?Cs.resolve(!0):qu(t).get(ls.key).next((function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new Mr(Lr.FAILED_PRECONDITION,Uu);return!1}}return!(!e.networkEnabled||!e.inForeground)||Bu(t).Nt().next((function(t){return void 0===e.rn(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&Ur("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.shutdown=function(){return(0,s.mG)(this,void 0,void 0,(function(){var t=this;return(0,s.Jh)(this,(function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[ls.store,Ts.store],(function(e){var n=new Vs(e,Pr.o);return t.Xe(n).next((function(){return t.en(n)}))}))];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}}))}))},t.prototype.rn=function(t,e){var n=this;return t.filter((function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)}))},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return Bu(e).Nt().next((function(e){return t.rn(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return pu.Qt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;Ur("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.Be.runTransaction(t,o,ks,(function(o){return i=new Vs(o,r.Ne?r.Ne.next():Pr.o),"readwrite-primary"===e?r.Je(i).next((function(t){return!!t||r.Ye(i)})).next((function(e){if(!e)throw Vr("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.Se.enqueueRetryable((function(){return r.Me(!1)})),new Mr(Lr.FAILED_PRECONDITION,As);return n(i)})).next((function(t){return r.Ze(i).next((function(){return t}))})):r.dn(i).next((function(){return n(i)}))})).then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.dn=function(t){var e=this;return qu(t).get(ls.key).next((function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Mr(Lr.FAILED_PRECONDITION,Uu)}))},t.prototype.Ze=function(t){var e=new ls(this.clientId,this.allowTabSynchronization,Date.now());return qu(t).put(ls.key,e)},t.yt=function(){return Rs.yt()},t.prototype.Xe=function(t){var e=this,n=qu(t);return n.get(ls.key).next((function(t){return e.tn(t)?(Ur("IndexedDbPersistence","Releasing primary lease."),n.delete(ls.key)):Cs.resolve()}))},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(Vr("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Fe=function(){t.Se.enqueueAndForget((function(){return t.inForeground="visible"===t.document.visibilityState,t.je()}))},this.document.addEventListener("visibilitychange",this.Fe),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.Fe&&(this.document.removeEventListener("visibilitychange",this.Fe),this.Fe=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ke=function(){e.un(),(0,v.G6)()&&navigator.appVersion.match("Version/14")&&e.Se.enterRestrictedMode(!0),e.Se.enqueueAndForget((function(){return e.shutdown()}))},this.window.addEventListener("pagehide",this.ke))},t.prototype.hn=function(){this.ke&&(this.window.removeEventListener("pagehide",this.ke),this.ke=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Qe)||void 0===e?void 0:e.getItem(this.on(t)));return Ur("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return Vr("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(t){Vr("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function qu(t){return qs(t,ls.store)}function Bu(t){return qs(t,Ts.store)}function Gu(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Ku=function(t,e){this.progress=t,this.wn=e},Hu=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next((function(r){return n.yn(t,e,r)}))},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next((function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t}))},t.prototype.gn=function(t,e){t.forEach((function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)}))},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next((function(e){return n.En(t,e).next((function(){return e}))}))},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next((function(t){return n.gn(e,t)}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return yi.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):co(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new yi(e)).next((function(t){var e=la();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=la();return this.Ut.getCollectionParents(t,i).next((function(a){return Cs.forEach(a,(function(a){var s=function(t,e){return new no(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,a.child(i));return r.An(t,s,n).next((function(t){t.forEach((function(t,e){o=o.insert(t,e)}))}))})).next((function(){return o}))}))},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next((function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)})).next((function(e){return i=e,o.Rn(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key,h=r.get(c);null==h&&(h=Li.newInvalidDocument(c),r=r.insert(c,h)),qo(u,h,o.localWriteTime),h.isFoundDocument()||(r=r.remove(c))}}))})).next((function(){return r.forEach((function(t,n){mo(e,n)||(r=r.remove(t))})),r}))},t.prototype.Rn=function(t,e,n){for(var r=ga(),i=0,o=e;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof zo&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next((function(t){return t.forEach((function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))})),c}))},t}(),zu=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=ga(),i=ga(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Ju=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(Yr.min())?this.Dn(t,e):this.Sn.pn(t,r).next((function(o){var a=i.Cn(e,o);return(oo(e)||ao(e))&&i.Nn(e.limitType,a,r,n)?i.Dn(t,e):(Fr()<=m.in.DEBUG&&Ur("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),vo(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next((function(t){return a.forEach((function(e){t=t.insert(e.key,e)})),t})))}))},t.prototype.Cn=function(t,e){var n=new aa(yo(t));return e.forEach((function(e,r){mo(t,r)&&(n=n.add(r))})),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return Fr()<=m.in.DEBUG&&Ur("QueryEngine","Using full collection scan to execute query:",vo(e)),this.Sn.getDocumentsMatchingQuery(t,e,Yr.min())},t}(),Wu=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.kn=new ra(Wr),this.Fn=new Cu((function(t){return Fi(t)}),Ui),this.$n=Yr.min(),this._n=t.getMutationQueue(n),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new Hu(this.On,this._n,this.persistence.getIndexManager()),this.Ke=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.collect(n,e.kn)}))},t}();function Zu(t,e,n,r){return new Wu(t,e,n,r)}function Xu(t,e){return(0,s.mG)(this,void 0,void 0,(function(){var n,r,i,o;return(0,s.Jh)(this,(function(a){switch(a.label){case 0:return n=Hr(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n._n.getAllMutationBatches(t).next((function(a){return o=a,r=n.persistence.getMutationQueue(e),i=new Hu(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)})).next((function(e){for(var n=[],r=[],a=ga(),s=0,u=o;s<u.length;s++){var c=u[s];n.push(c.batchId);for(var h=0,l=c.mutations;h<l.length;h++){var f=l[h];a=a.add(f.key)}}for(var p=0,d=e;p<d.length;p++){var g=d[p];r.push(g.batchId);for(var v=0,m=g.mutations;v<m.length;v++){var y=m[v];a=a.add(y.key)}}return i.pn(t,a).next((function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}}))}))}))];case 1:return o=a.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}}))}))}function Qu(t,e){var n=Hr(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.On.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),a=Cs.resolve();return o.forEach((function(t){a=a.next((function(){return r.getEntry(e,t)})).next((function(e){var o=n.docVersions.get(t);Kr(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))}))})),a.next((function(){return t._n.removeMutationBatch(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}function Yu(t){var e=Hr(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.qe.getLastRemoteSnapshotVersion(t)}))}function $u(t,e){var n=Hr(t),r=e.snapshotVersion,i=n.kn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.On.newChangeBuffer({trackRemovals:!0});i=n.kn;var a=[];e.targetChanges.forEach((function(e,o){var s=i.get(o);if(s){a.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next((function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)})));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=s.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return Kr(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(s,c,e)&&a.push(n.qe.updateTargetData(t,c))}}}));var s=ca();if(e.documentUpdates.forEach((function(r,i){e.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),a.push(tc(t,o,e.documentUpdates,r,void 0).next((function(t){s=t}))),!r.isEqual(Yr.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next((function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)}));a.push(u)}return Cs.waitFor(a).next((function(){return o.apply(t)})).next((function(){return n.Mn.En(t,s)})).next((function(){return s}))})).then((function(t){return n.kn=i,t}))}function tc(t,e,n,r,i){var o=ga();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=ca();return n.forEach((function(n,a){var s=t.get(n),u=(null==i?void 0:i.get(n))||r;a.isNoDocument()&&a.version.isEqual(Yr.min())?(e.removeEntry(n,u),o=o.insert(n,a)):!s.isValidDocument()||a.version.compareTo(s.version)>0||0===a.version.compareTo(s.version)&&s.hasPendingWrites?(e.addEntry(a,u),o=o.insert(n,a)):Ur("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",a.version)})),o}))}function ec(t,e){var n=Hr(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)}))}function nc(t,e){var n=Hr(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.qe.getTargetData(t,e).next((function(i){return i?(r=i,Cs.resolve(r)):n.qe.allocateTargetId(t).next((function(i){return r=new Ks(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.kn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.kn=n.kn.insert(t.targetId,t),n.Fn.set(e,t.targetId)),t}))}function rc(t,e,n){return(0,s.mG)(this,void 0,void 0,(function(){var r,i,o,a;return(0,s.Jh)(this,(function(s){switch(s.label){case 0:r=Hr(t),i=r.kn.get(e),o=n?"readwrite":"readwrite-primary",s.label=1;case 1:return s.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.referenceDelegate.removeTarget(t,i)}))];case 2:s.sent(),s.label=3;case 3:return[3,5];case 4:if(!Ls(a=s.sent()))throw a;return Ur("LocalStore","Failed to update sequence numbers for target "+e+": "+a),[3,5];case 5:return r.kn=r.kn.remove(e),r.Fn.delete(i.target),[2]}}))}))}function ic(t,e,n){var r=Hr(t),i=Yr.min(),o=ga();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=Hr(t),i=r.Fn.get(n);return void 0!==i?Cs.resolve(r.kn.get(i)):r.qe.getTargetData(e,n)}(r,t,lo(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:Yr.min(),n?o:ga())})).next((function(t){return{documents:t,Bn:o}}))}))}function oc(t,e){var n=Hr(t),r=Hr(n.qe),i=n.kn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.lt(t,e).next((function(t){return t?t.target:null}))}))}function ac(t){var e=Hr(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=Hr(t),i=ca(),o=Ws(n),a=Lu(e),s=IDBKeyRange.lowerBound(o,!0);return a.$t({index:ms.readTimeIndex,range:s},(function(t,e){var n=zs(r.R,e);i=i.insert(n.key,n),o=e.readTime})).next((function(){return{wn:i,readTime:Zs(o)}}))}(e.On,t,e.$n)})).then((function(t){var n=t.wn,r=t.readTime;return e.$n=r,n}))}function sc(t){return(0,s.mG)(this,void 0,void 0,(function(){var e;return(0,s.Jh)(this,(function(n){return[2,(e=Hr(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=Lu(t),n=Yr.min();return e.$t({index:ms.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=Zs(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.$n=t}))]}))}))}function uc(t,e,n,r){return(0,s.mG)(this,void 0,void 0,(function(){var i,o,a,u,c,h,l,f,p,d;return(0,s.Jh)(this,(function(s){switch(s.label){case 0:for(i=Hr(t),o=ga(),a=ca(),u=pa(),c=0,h=n;c<h.length;c++)l=h[c],f=e.qn(l.metadata.name),l.document&&(o=o.add(f)),a=a.insert(f,e.Un(l)),u=u.insert(f,e.Kn(l.metadata.readTime));return p=i.On.newChangeBuffer({trackRemovals:!0}),[4,nc(i,function(t){return lo(io(ri.fromString("__bundle__/docs/"+t)))}(r))];case 1:return d=s.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",(function(t){return tc(t,p,a,Yr.min(),u).next((function(e){return p.apply(t),e})).next((function(e){return i.qe.removeMatchingKeysForTargetId(t,d.targetId).next((function(){return i.qe.addMatchingKeys(t,o,d.targetId)})).next((function(){return i.Mn.En(t,e)})).next((function(){return e}))}))}))]}}))}))}function cc(t,e,n){return void 0===n&&(n=ga()),(0,s.mG)(this,void 0,void 0,(function(){var r,i;return(0,s.Jh)(this,(function(o){switch(o.label){case 0:return[4,nc(t,lo(eu(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=Hr(t)).persistence.runTransaction("Save named query","readwrite",(function(t){var o=xa(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Ke.saveNamedQuery(t,e);var a=r.withResumeToken(si.EMPTY_BYTE_STRING,o);return i.kn=i.kn.insert(a.targetId,a),i.qe.updateTargetData(t,a).next((function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)})).next((function(){return i.qe.addMatchingKeys(t,n,r.targetId)})).next((function(){return i.Ke.saveNamedQuery(t,e)}))}))]}}))}))}var hc=function(){function t(t){this.R=t,this.Qn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return Cs.resolve(this.Qn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Qn.set(e.id,{id:(n=e).id,version:n.version,createTime:xa(n.createTime)}),Cs.resolve()},t.prototype.getNamedQuery=function(t,e){return Cs.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:eu(t.bundledQuery),readTime:xa(t.readTime)}}(e)),Cs.resolve()},t}(),lc=function(){function t(){this.Wn=new aa(fc.Gn),this.zn=new aa(fc.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new fc(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach((function(t){return n.addReference(t,e)}))},t.prototype.removeReference=function(t,e){this.Yn(new fc(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach((function(t){return n.removeReference(t,e)}))},t.prototype.Zn=function(t){var e=this,n=new yi(new ri([])),r=new fc(n,t),i=new fc(n,t+1),o=[];return this.zn.forEachInRange([r,i],(function(t){e.Yn(t),o.push(t.key)})),o},t.prototype.ts=function(){var t=this;this.Wn.forEach((function(e){return t.Yn(e)}))},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new yi(new ri([])),n=new fc(e,t),r=new fc(e,t+1),i=ga();return this.zn.forEachInRange([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.containsKey=function(t){var e=new fc(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),fc=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return yi.comparator(t.key,e.key)||Wr(t.ns,e.ns)},t.Hn=function(t,e){return Wr(t.ns,e.ns)||yi.comparator(t.key,e.key)},t}(),pc=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new aa(fc.Gn)}return t.prototype.checkEmpty=function(t){return Cs.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];var o=new Bs(i,e,n,r);this._n.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.rs=this.rs.add(new fc(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return Cs.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return Cs.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=e+1,r=this.cs(n),i=r<0?0:r;return Cs.resolve(this._n.length>i?this._n[i]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return Cs.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return Cs.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new fc(e,0),i=new fc(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],(function(t){var e=n.os(t.ns);o.push(e)})),Cs.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new aa(Wr);return e.forEach((function(t){var e=new fc(t,0),i=new fc(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],(function(t){r=r.add(t.ns)}))})),Cs.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;yi.isDocumentKey(i)||(i=i.child(""));var o=new fc(new yi(i),0),a=new aa(Wr);return this.rs.forEachWhile((function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(a=a.add(t.ns)),!0)}),o),Cs.resolve(this.us(a))},t.prototype.us=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.os(t);null!==r&&n.push(r)})),n},t.prototype.removeMutationBatch=function(t,e){var n=this;Kr(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return Cs.forEach(e.mutations,(function(i){var o=new fc(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((function(){n.rs=r}))},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new fc(e,0),r=this.rs.firstAfterOrEqual(n);return Cs.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return this._n.length,Cs.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),dc=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new ra(yi.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,a=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:a,readTime:n}),this.size+=a-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return Cs.resolve(n?n.document.clone():Li.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=ca();return e.forEach((function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():Li.newInvalidDocument(t))})),Cs.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=ca(),i=new yi(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var a=o.getNext(),s=a.key,u=a.value,c=u.document,h=u.readTime;if(!e.path.isPrefixOf(s.path))break;h.compareTo(n)<=0||mo(e,c)&&(r=r.insert(c.key,c.clone()))}return Cs.resolve(r)},t.prototype.fs=function(t,e){return Cs.forEach(this.docs,(function(t){return e(t)}))},t.prototype.newChangeBuffer=function(t){return new gc(this)},t.prototype.getSize=function(t){return Cs.resolve(this.size)},t}(),gc=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return(0,s.ZT)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)})),Cs.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(Du),vc=function(){function t(t){this.persistence=t,this.ds=new Cu((function(t){return Fi(t)}),Ui),this.lastRemoteSnapshotVersion=Yr.min(),this.highestTargetId=0,this.ws=0,this._s=new lc,this.targetCount=0,this.ys=yu.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach((function(t,n){return e(n)})),Cs.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return Cs.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return Cs.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),Cs.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),Cs.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new yu(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,Cs.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),Cs.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,Cs.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach((function(a,s){s.sequenceNumber<=e&&null===n.get(s.targetId)&&(r.ds.delete(a),o.push(r.removeMatchingKeysForTargetId(t,s.targetId)),i++)})),Cs.waitFor(o).next((function(){return i}))},t.prototype.getTargetCount=function(t){return Cs.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return Cs.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),Cs.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((function(e){i.push(r.markPotentiallyOrphaned(t,e))})),Cs.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),Cs.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return Cs.resolve(n)},t.prototype.containsKey=function(t,e){return Cs.resolve(this._s.containsKey(e))},t}(),mc=function(){function t(t,e){var n=this;this.gs={},this.Ne=new Pr(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new vc(this),this.Ut=new ou,this.Ue=function(t,e){return new dc(t,(function(t){return n.referenceDelegate.ps(t)}))}(this.Ut),this.R=new Hs(e),this.Ke=new hc(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new pc(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;Ur("MemoryPersistence","Starting transaction:",t);var i=new yc(this.Ne.next());return this.referenceDelegate.Es(),n(i).next((function(t){return r.referenceDelegate.Ts(i).next((function(){return t}))})).toPromise().then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.Is=function(t,e){return Cs.or(Object.values(this.gs).map((function(n){return function(){return n.containsKey(t,e)}})))},t}(),yc=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return(0,s.ZT)(e,t),e}(Ns),bc=function(){function t(t){this.persistence=t,this.As=new lc,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw Gr()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),Cs.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),Cs.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),Cs.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach((function(t){return n.vs.add(t.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((function(t){t.forEach((function(t){return n.vs.add(t.toString())}))})).next((function(){return r.removeTargetData(t,e)}))},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Cs.forEach(this.vs,(function(r){var i=yi.fromPath(r);return e.Ps(t,i).next((function(t){t||n.removeEntry(i)}))})).next((function(){return e.Rs=null,n.apply(t)}))},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next((function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())}))},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return Cs.or([function(){return Cs.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),wc=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function Ic(t,e){return"firestore_clients_"+t+"_"+e}function _c(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function Tc(t,e){return"firestore_targets_"+t+"_"+e}wc.UNAUTHENTICATED=new wc(null),wc.GOOGLE_CREDENTIALS=new wc("google-credentials-uid"),wc.FIRST_PARTY=new wc("first-party-uid"),wc.MOCK_USER=new wc("mock-user");var Ec=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),a="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return a&&o.error&&(a="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new Mr(o.error.code,o.error.message)),a?new t(e,n,o.state,i):(Vr("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Sc=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Mr(i.error.code,i.error.message)),o?new t(e,i.state,r):(Vr("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),kc=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=ma(),a=0;i&&a<r.activeTargetIds.length;++a)i=mi(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new t(e,o):(Vr("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Ac=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(Vr("SharedClientState","Failed to parse online state: "+e),null)},t}(),Nc=function(){function t(){this.activeTargetIds=ma()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Oc=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.ks.bind(this),this.Fs=new ra(Wr),this.started=!1,this.$s=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=Ic(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Fs=this.Fs.insert(this.Ns,new Nc),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Ks=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return(0,s.mG)(this,void 0,void 0,(function(){var t,e,n,r,i,o,a,u,c,h,l,f=this;return(0,s.Jh)(this,(function(s){switch(s.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=s.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(Ic(this.persistenceKey,r)))&&(o=kc.Vs(r,i))&&(this.Fs=this.Fs.insert(o.clientId,o));for(this.Qs(),(a=this.storage.getItem(this.Us))&&(u=this.js(a))&&this.Ws(u),c=0,h=this.$s;c<h.length;c++)l=h[c],this.ks(l);return this.$s=[],this.window.addEventListener("pagehide",(function(){return f.shutdown()})),this.started=!0,[2]}}))}))},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.Fs)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.Fs.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(Tc(this.persistenceKey,t));if(n){var r=Sc.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Qs(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Qs()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(Tc(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach((function(t){r.Hs(t)})),this.currentUser=t,n.forEach((function(t){r.addPendingMutation(t)}))},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return Ur("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){Ur("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){Ur("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.ks=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(Ur("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Os)return void Vr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable((function(){return(0,s.mG)(e,void 0,void 0,(function(){var t,e,r,i,o,a;return(0,s.Jh)(this,(function(s){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(a=function(t){var e=Pr.o;if(null!=t)try{var n=JSON.parse(t);Kr("number"==typeof n),e=n}catch(t){Vr("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Pr.o&&this.sequenceNumberHandler(a);else if(n.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.Fs.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new Ec(this.currentUser,t,e,n),i=_c(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=_c(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){var e={clientId:this.Ns,onlineState:t};this.storage.setItem(this.Us,JSON.stringify(e))},t.prototype.Ys=function(t,e,n){var r=Tc(this.persistenceKey,t),i=new Sc(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return kc.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Ec.Vs(new wc(i),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return Sc.Vs(r,e)},t.prototype.js=function(t){return Ac.Vs(t)},t.prototype.ii=function(t){return(0,s.mG)(this,void 0,void 0,(function(){return(0,s.Jh)(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(Ur("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.Fs.insert(t,e):this.Fs.remove(t),i=this.Gs(this.Fs),o=this.Gs(r),a=[],s=[];return o.forEach((function(t){i.has(t)||a.push(t)})),i.forEach((function(t){o.has(t)||s.push(t)})),this.syncEngine.hi(a,s).then((function(){n.Fs=r}))},t.prototype.Ws=function(t){this.Fs.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=ma();return t.forEach((function(t,n){e=e.unionWith(n.activeTargetIds)})),e},t}(),Cc=function(){function t(){this.li=new Nc,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new Nc,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),Dc=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),Rc=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){Ur("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){Ur("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),xc={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Pc=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),Lc=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n.useFetchStreams=e.useFetchStreams,n}return(0,s.ZT)(e,t),e.prototype.Fi=function(t,e,n,r){return new Promise((function(i,o){var a=new Rr;a.listenOnce(Ar.COMPLETE,(function(){try{switch(a.getLastErrorCode()){case kr.NO_ERROR:var e=a.getResponseJson();Ur("Connection","XHR received:",JSON.stringify(e)),i(e);break;case kr.TIMEOUT:Ur("Connection",'RPC "'+t+'" timed out'),o(new Mr(Lr.DEADLINE_EXCEEDED,"Request time out"));break;case kr.HTTP_ERROR:var n=a.getStatus();if(Ur("Connection",'RPC "'+t+'" failed with status:',n,"response text:",a.getResponseText()),n>0){var r=a.getResponseJson().error;if(r&&r.status&&r.message){var s=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(Lr).indexOf(e)>=0?e:Lr.UNKNOWN}(r.status);o(new Mr(s,r.message))}else o(new Mr(Lr.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Mr(Lr.UNAVAILABLE,"Connection failed."));break;default:Gr()}}finally{Ur("Connection",'RPC "'+t+'" completed.')}}));var s=JSON.stringify(r);a.send(e,"POST",s,n,15)}))},e.prototype.Oi=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=Er(),i=Sr(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new Cr({})),this.ki(o.initMessageHeaders,e),(0,v.uI)()||(0,v.b$)()||(0,v.d)()||(0,v.w1)()||(0,v.Mn)()||(0,v.ru)()||(o.httpHeadersOverwriteParam="$httpHeaders");var a=n.join("");Ur("Connection","Creating WebChannel: "+a,o);var s=r.createWebChannel(a,o),u=!1,c=!1,h=new Pc({Ei:function(t){c?Ur("Connection","Not sending because WebChannel is closed:",t):(u||(Ur("Connection","Opening WebChannel transport."),s.open(),u=!0),Ur("Connection","WebChannel sending:",t),s.send(t))},Ti:function(){return s.close()}}),l=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return l(s,Dr.EventType.OPEN,(function(){c||Ur("Connection","WebChannel transport opened.")})),l(s,Dr.EventType.CLOSE,(function(){c||(c=!0,Ur("Connection","WebChannel transport closed"),h.Vi())})),l(s,Dr.EventType.ERROR,(function(t){c||(c=!0,qr("Connection","WebChannel transport errored:",t),h.Vi(new Mr(Lr.UNAVAILABLE,"The operation could not be completed")))})),l(s,Dr.EventType.MESSAGE,(function(t){var e;if(!c){var n=t.data[0];Kr(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){Ur("Connection","WebChannel received error:",i);var o=i.status,a=function(t){var e=Xo[t];if(void 0!==e)return na(e)}(o),u=i.message;void 0===a&&(a=Lr.INTERNAL,u="Unknown error status: "+o+" with message "+i.message),c=!0,h.Vi(new Mr(a,u)),s.close()}else Ur("Connection","WebChannel received:",n),h.Si(n)}})),l(i,Nr.STAT_EVENT,(function(t){t.stat===Or.PROXY?Ur("Connection","Detected buffering proxy"):t.stat===Or.NOPROXY&&Ur("Connection","Detected no buffering proxy")})),setTimeout((function(){h.Pi()}),0),h},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId;var e=t.ssl?"https":"http";this.Di=e+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);Ur("RestConnection","Sending: ",i,n);var o={};return this.ki(o,r),this.Fi(t,i,o,n).then((function(t){return Ur("RestConnection","Received: ",t),t}),(function(e){throw qr("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.$i=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.ki=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.10.1",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){var n=xc[t];return this.Di+"/v1/"+e+":"+n},t}());function Mc(){return"undefined"!=typeof window?window:null}function jc(){return"undefined"!=typeof document?document:null}function Fc(t){return new Oa(t,!0)}var Uc=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Qi=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Ki),i=Math.max(0,n-r);i>0&&Ur("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,(function(){return e.Ki=Date.now(),t()})),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),Vc=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new Uc(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return(0,s.mG)(this,void 0,void 0,(function(){return(0,s.Jh)(this,(function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,(function(){return t.rr()})))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return(0,s.mG)(this,void 0,void 0,(function(){return(0,s.Jh)(this,(function(t){return this.er()?[2,this.close(0)]:[2]}))}))},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return(0,s.mG)(this,void 0,void 0,(function(){return(0,s.Jh)(this,(function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===Lr.RESOURCE_EXHAUSTED?(Vr(e.toString()),Vr("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):e&&e.code===Lr.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then((function(e){t.Yi===n&&t.lr(e)}),(function(n){e((function(){var e=new Mr(Lr.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)}))}))},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii((function(){n((function(){return e.state=2,e.listener.Ii()}))})),this.stream.Ri((function(t){n((function(){return e.dr(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji((function(){return(0,s.mG)(t,void 0,void 0,(function(){return(0,s.Jh)(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.dr=function(t){return Ur("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget((function(){return e.Yi===t?n():(Ur("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),qc=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,a}return(0,s.ZT)(e,t),e.prototype.wr=function(t){return this.Hi.Oi("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Gr()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(Kr(void 0===e||"string"==typeof e),si.fromBase64String(e||"")):(Kr(void 0===e||e instanceof Uint8Array),si.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),a=(s=e.targetChange.cause)&&function(t){var e=void 0===t.code?Lr.UNKNOWN:na(t.code);return new Mr(e,t.message||"")}(s);n=new _a(r,i,o,a||null)}else if("documentChange"in e){e.documentChange,(r=e.documentChange).document,r.document.name,r.document.updateTime,i=ja(t,r.document.name),o=xa(r.document.updateTime);var s=new xi({mapValue:{fields:r.document.fields}}),u=(a=Li.newFoundDocument(i,o,s),r.targetIds||[]),c=r.removedTargetIds||[];n=new wa(u,c,a.key,a)}else if("documentDelete"in e)e.documentDelete,(r=e.documentDelete).document,i=ja(t,r.document),o=r.readTime?xa(r.readTime):Yr.min(),s=Li.newNoDocument(i,o),a=r.removedTargetIds||[],n=new wa([],a,s.key,s);else if("documentRemove"in e)e.documentRemove,(r=e.documentRemove).document,i=ja(t,r.document),o=r.removedTargetIds||[],n=new wa([],o,i,null);else{if(!("filter"in e))return Gr();e.filter;var h=e.filter;h.targetId,r=h.count||0,i=new ta(r),o=h.targetId,n=new Ia(o,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return Yr.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Yr.min():e.readTime?xa(e.readTime):Yr.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=Va(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=Vi(r)?{documents:za(t,r)}:{query:Ja(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=Da(t,e.resumeToken):e.snapshotVersion.compareTo(Yr.min())>0&&(n.readTime=Ca(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Gr()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.R,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=Va(this.R),e.removeTarget=t,this.cr(e)},e}(Vc),Bc=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,a.gr=!1,a}return(0,s.ZT)(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.Oi("Write",t)},e.prototype.onMessage=function(t){if(Kr(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(Kr(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?xa(t.updateTime):xa(e);return n.isEqual(Yr.min())&&(n=xa(e)),new Mo(n,t.transformResults||[])}(t,e)}))):[]}(t.writeResults,t.commitTime),n=xa(t.commitTime);return this.listener.Tr(n,e)}return Kr(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=Va(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return Ka(e.R,t)}))};this.cr(n)},e}(Vc),Gc=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return(0,s.ZT)(e,t),e.prototype.br=function(){if(this.Rr)throw new Mr(Lr.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Ni(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===Lr.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Mr(Lr.UNKNOWN,t.toString())}))},e.prototype.$i=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.$i(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===Lr.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Mr(Lr.UNKNOWN,t.toString())}))},e.prototype.terminate=function(){this.Rr=!0},e}((function(){})),Kc=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()})))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.kr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.kr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(Vr(e),this.Vr=!1):Ur("OnlineStateTracker",e)},t.prototype.kr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),Hc=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.Fr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di((function(t){n.enqueueAndForget((function(){return(0,s.mG)(o,void 0,void 0,(function(){return(0,s.Jh)(this,(function(t){switch(t.label){case 0:return th(this)?(Ur("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return(0,s.mG)(this,void 0,void 0,(function(){var e;return(0,s.Jh)(this,(function(n){switch(n.label){case 0:return(e=Hr(t)).Or.add(4),[4,Jc(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.Or.delete(4),[4,zc(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Br=new Kc(n,r)};function zc(t){return(0,s.mG)(this,void 0,void 0,(function(){var e,n;return(0,s.Jh)(this,(function(r){switch(r.label){case 0:if(!th(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Jc(t){return(0,s.mG)(this,void 0,void 0,(function(){var e,n;return(0,s.Jh)(this,(function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Wc(t,e){var n=Hr(t);n.$r.has(e.targetId)||(n.$r.set(e.targetId,e),$c(n)?Yc(n):gh(n).er()&&Xc(n,e))}function Zc(t,e){var n=Hr(t),r=gh(n);n.$r.delete(e),r.er()&&Qc(n,e),0===n.$r.size&&(r.er()?r.ir():th(n)&&n.Br.set("Unknown"))}function Xc(t,e){t.qr.U(e.targetId),gh(t).mr(e)}function Qc(t,e){t.qr.U(e),gh(t).yr(e)}function Yc(t){t.qr=new Ea({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.$r.get(e)||null}}),gh(t).start(),t.Br.Sr()}function $c(t){return th(t)&&!gh(t).tr()&&t.$r.size>0}function th(t){return 0===Hr(t).Or.size}function eh(t){t.qr=void 0}function nh(t){return(0,s.mG)(this,void 0,void 0,(function(){return(0,s.Jh)(this,(function(e){return t.$r.forEach((function(e,n){Xc(t,e)})),[2]}))}))}function rh(t,e){return(0,s.mG)(this,void 0,void 0,(function(){return(0,s.Jh)(this,(function(n){return eh(t),$c(t)?(t.Br.Nr(e),Yc(t)):t.Br.set("Unknown"),[2]}))}))}function ih(t,e,n){return(0,s.mG)(this,void 0,void 0,(function(){var r,i,o;return(0,s.Jh)(this,(function(a){switch(a.label){case 0:if(t.Br.set("Online"),!(e instanceof _a&&2===e.state&&e.cause))return[3,6];a.label=1;case 1:return a.trys.push([1,3,,5]),[4,function(t,e){return(0,s.mG)(this,void 0,void 0,(function(){var n,r,i,o;return(0,s.Jh)(this,(function(a){switch(a.label){case 0:n=e.cause,r=0,i=e.targetIds,a.label=1;case 1:return r<i.length?(o=i[r],t.$r.has(o)?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]):[3,5];case 2:a.sent(),t.$r.delete(o),t.qr.removeTarget(o),a.label=3;case 3:a.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return a.sent(),[3,5];case 3:return r=a.sent(),Ur("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,oh(t,r)];case 4:return a.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof wa?t.qr.X(e):e instanceof Ia?t.qr.rt(e):t.qr.et(e),n.isEqual(Yr.min()))return[3,13];a.label=7;case 7:return a.trys.push([7,11,,13]),[4,Yu(t.localStore)];case 8:return i=a.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.$r.get(r);i&&t.$r.set(r,i.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach((function(e){var n=t.$r.get(e);if(n){t.$r.set(e,n.withResumeToken(si.EMPTY_BYTE_STRING,n.snapshotVersion)),Qc(t,e);var r=new Ks(n.target,e,1,n.sequenceNumber);Xc(t,r)}})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:a.sent(),a.label=10;case 10:return[3,13];case 11:return Ur("RemoteStore","Failed to raise snapshot:",o=a.sent()),[4,oh(t,o)];case 12:return a.sent(),[3,13];case 13:return[2]}}))}))}function oh(t,e,n){return(0,s.mG)(this,void 0,void 0,(function(){var r=this;return(0,s.Jh)(this,(function(i){switch(i.label){case 0:if(!Ls(e))throw e;return t.Or.add(1),[4,Jc(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return Yu(t.localStore)}),t.asyncQueue.enqueueRetryable((function(){return(0,s.mG)(r,void 0,void 0,(function(){return(0,s.Jh)(this,(function(e){switch(e.label){case 0:return Ur("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Or.delete(1),[4,zc(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function ah(t,e){return e().catch((function(n){return oh(t,n,e)}))}function sh(t){return(0,s.mG)(this,void 0,void 0,(function(){var e,n,r,i,o;return(0,s.Jh)(this,(function(a){switch(a.label){case 0:e=Hr(t),n=vh(e),r=e.Fr.length>0?e.Fr[e.Fr.length-1].batchId:-1,a.label=1;case 1:if(!function(t){return th(t)&&t.Fr.length<10}(e))return[3,7];a.label=2;case 2:return a.trys.push([2,4,,6]),[4,ec(e.localStore,r)];case 3:return null===(i=a.sent())?(0===e.Fr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.Fr.push(e);var n=vh(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=a.sent(),[4,oh(e,o)];case 5:return a.sent(),[3,6];case 6:return[3,1];case 7:return uh(e)&&ch(e),[2]}}))}))}function uh(t){return th(t)&&!vh(t).tr()&&t.Fr.length>0}function ch(t){vh(t).start()}function hh(t){return(0,s.mG)(this,void 0,void 0,(function(){return(0,s.Jh)(this,(function(e){return vh(t).Ar(),[2]}))}))}function lh(t){return(0,s.mG)(this,void 0,void 0,(function(){var e,n,r,i;return(0,s.Jh)(this,(function(o){for(e=vh(t),n=0,r=t.Fr;n<r.length;n++)i=r[n],e.Er(i.mutations);return[2]}))}))}function fh(t,e,n){return(0,s.mG)(this,void 0,void 0,(function(){var r,i;return(0,s.Jh)(this,(function(o){switch(o.label){case 0:return r=t.Fr.shift(),i=Gs.from(r,e,n),[4,ah(t,(function(){return t.remoteSyncer.applySuccessfulWrite(i)}))];case 1:return o.sent(),[4,sh(t)];case 2:return o.sent(),[2]}}))}))}function ph(t,e){return(0,s.mG)(this,void 0,void 0,(function(){return(0,s.Jh)(this,(function(n){switch(n.label){case 0:return e&&vh(t).pr?[4,function(t,e){return(0,s.mG)(this,void 0,void 0,(function(){var n,r;return(0,s.Jh)(this,(function(i){switch(i.label){case 0:return ea(r=e.code)&&r!==Lr.ABORTED?(n=t.Fr.shift(),vh(t).sr(),[4,ah(t,(function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,sh(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return uh(t)&&ch(t),[2]}}))}))}function dh(t,e){return(0,s.mG)(this,void 0,void 0,(function(){var n;return(0,s.Jh)(this,(function(r){switch(r.label){case 0:return n=Hr(t),e?(n.Or.delete(2),[4,zc(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Or.add(2),[4,Jc(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function gh(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=Hr(t);return r.br(),new qc(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:nh.bind(null,t),Ri:rh.bind(null,t),_r:ih.bind(null,t)}),t.Mr.push((function(n){return(0,s.mG)(e,void 0,void 0,(function(){return(0,s.Jh)(this,(function(e){switch(e.label){case 0:return n?(t.Ur.sr(),$c(t)?Yc(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),eh(t),e.label=3;case 3:return[2]}}))}))}))),t.Ur}function vh(t){var e=this;return t.Kr||(t.Kr=function(t,e,n){var r=Hr(t);return r.br(),new Bc(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:hh.bind(null,t),Ri:ph.bind(null,t),Ir:lh.bind(null,t),Tr:fh.bind(null,t)}),t.Mr.push((function(n){return(0,s.mG)(e,void 0,void 0,(function(){return(0,s.Jh)(this,(function(e){switch(e.label){case 0:return n?(t.Kr.sr(),[4,sh(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Kr.stop()];case 3:e.sent(),t.Fr.length>0&&(Ur("RemoteStore","Stopping write stream with "+t.Fr.length+" pending writes"),t.Fr=[]),e.label=4;case 4:return[2]}}))}))}))),t.Kr}var mh=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Os,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(t){}))}return t.createAndSchedule=function(e,n,r,i,o){var a=new t(e,n,Date.now()+r,i,o);return a.start(r),a},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout((function(){return e.handleDelayElapsed()}),t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Mr(Lr.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget((function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then((function(e){return t.deferred.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function yh(t,e){if(Vr("AsyncQueue",e+": "+t),Ls(t))return new Mr(Lr.UNAVAILABLE,e+": "+t);throw t}var bh=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||yi.comparator(e.key,n.key)}:function(t,e){return yi.comparator(t.key,e.key)},this.keyedMap=la(),this.sortedSet=new ra(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),wh=function(){function t(){this.Qr=new ra(yi.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Qr.get(e);n?0!==t.type&&3===n.type?this.Qr=this.Qr.insert(e,t):3===t.type&&1!==n.type?this.Qr=this.Qr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Qr=this.Qr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Qr=this.Qr.remove(e):1===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):Gr():this.Qr=this.Qr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Qr.inorderTraversal((function(e,n){t.push(n)})),t},t}(),Ih=function(){function t(t,e,n,r,i,o,a,s){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,bh.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&po(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),_h=function(){this.Wr=void 0,this.listeners=[]},Th=function(){this.queries=new Cu((function(t){return go(t)}),po),this.onlineState="Unknown",this.Gr=new Set};function Eh(t,e){return(0,s.mG)(this,void 0,void 0,(function(){var n,r,i,o,a,u,c;return(0,s.Jh)(this,(function(s){switch(s.label){case 0:if(n=Hr(t),r=e.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new _h),!i)return[3,4];s.label=1;case 1:return s.trys.push([1,3,,4]),a=o,[4,n.onListen(r)];case 2:return a.Wr=s.sent(),[3,4];case 3:return u=s.sent(),c=yh(u,"Initialization of query '"+vo(e.query)+"' failed"),[2,void e.onError(c)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&Nh(n),[2]}}))}))}function Sh(t,e){return(0,s.mG)(this,void 0,void 0,(function(){var n,r,i,o,a;return(0,s.Jh)(this,(function(s){return n=Hr(t),r=e.query,i=!1,(o=n.queries.get(r))&&(a=o.listeners.indexOf(e))>=0&&(o.listeners.splice(a,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]}))}))}function kh(t,e){for(var n=Hr(t),r=!1,i=0,o=e;i<o.length;i++){var a=o[i],s=a.query,u=n.queries.get(s);if(u){for(var c=0,h=u.listeners;c<h.length;c++)h[c].Hr(a)&&(r=!0);u.Wr=a}}r&&Nh(n)}function Ah(t,e,n){var r=Hr(t),i=r.queries.get(e);if(i)for(var o=0,a=i.listeners;o<a.length;o++)a[o].onError(n);r.queries.delete(e)}function Nh(t){t.Gr.forEach((function(t){t.next()}))}var Oh=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Ih(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.so&&n||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){if(t.docChanges.length>0)return!0;var e=this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=Ih.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),Ch=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),Dh=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return ja(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?Ga(this.R,t.document,!1):Li.newNoDocument(this.qn(t.metadata.name),this.Kn(t.metadata.readTime))},t.prototype.Kn=function(t){return xa(t)},t}();!function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=Rh(t)}t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new Dh(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var a=n.qn(o.metadata.name),s=0,u=o.metadata.queries;s<u.length;s++){var c=u[s],h=(e.get(c)||ga()).add(a);e.set(c,h)}}return e},t.prototype.complete=function(){return(0,s.mG)(this,void 0,void 0,(function(){var t,e,n,r,i;return(0,s.Jh)(this,(function(o){switch(o.label){case 0:return[4,uc(this.localStore,new Dh(this.R),this.documents,this.ro.id)];case 1:t=o.sent(),e=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?(i=r[n],[4,cc(this.localStore,i,e.get(i.name))]):[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new Ku(Object.assign({},this.progress),t))]}}))}))}}();function Rh(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var xh=function(t){this.key=t},Ph=function(t){this.key=t},Lh=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=ga(),this.mutatedKeys=ga(),this.lo=yo(t),this.fo=new bh(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new wh,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,a=i,s=!1,u=oo(this.query)&&i.size===this.query.limit?i.last():null,c=ao(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((function(t,e){var h=i.get(t),l=mo(n.query,e)?e:null,f=!!h&&n.mutatedKeys.has(h.key),p=!!l&&(l.hasLocalMutations||n.mutatedKeys.has(l.key)&&l.hasCommittedMutations),d=!1;h&&l?h.data.isEqual(l.data)?f!==p&&(r.track({type:3,doc:l}),d=!0):n.yo(h,l)||(r.track({type:2,doc:l}),d=!0,(u&&n.lo(l,u)>0||c&&n.lo(l,c)<0)&&(s=!0)):!h&&l?(r.track({type:0,doc:l}),d=!0):h&&!l&&(r.track({type:1,doc:h}),d=!0,(u||c)&&(s=!0)),d&&(l?(a=a.add(l),o=p?o.add(t):o.delete(t)):(a=a.delete(t),o=o.delete(t)))})),oo(this.query)||ao(this.query))for(;a.size>this.query.limit;){var h=oo(this.query)?a.last():a.first();a=a.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{fo:a,mo:r,Nn:s,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Gr()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)})),this.po(n);var a=e?this.Eo():[],s=0===this.ho.size&&this.current?1:0,u=s!==this.ao;return this.ao=s,0!==o.length||u?{snapshot:new Ih(this.query,t.fo,i,o,t.mutatedKeys,0===s,u,!1),To:a}:{To:a}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new wh,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach((function(t){return e.uo=e.uo.add(t)})),t.modifiedDocuments.forEach((function(t){})),t.removedDocuments.forEach((function(t){return e.uo=e.uo.delete(t)})),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=ga(),this.fo.forEach((function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))}));var n=[];return e.forEach((function(e){t.ho.has(e)||n.push(new Ph(e))})),this.ho.forEach((function(t){e.has(t)||n.push(new xh(t))})),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=ga();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return Ih.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),Mh=function(t,e,n){this.query=t,this.targetId=e,this.view=n},jh=function(t){this.key=t,this.bo=!1},Fh=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new Cu((function(t){return go(t)}),po),this.Vo=new Map,this.So=new Set,this.Do=new ra(yi.comparator),this.Co=new Map,this.No=new lc,this.xo={},this.ko=new Map,this.Fo=yu.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),t}();function Uh(t,e){return(0,s.mG)(this,void 0,void 0,(function(){var n,r,i,o,a,u;return(0,s.Jh)(this,(function(s){switch(s.label){case 0:return n=dl(t),(o=n.Po.get(e))?(r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Ro(),[3,4]):[3,1];case 1:return[4,nc(n.localStore,lo(e))];case 2:return a=s.sent(),u=n.sharedClientState.addLocalQueryTarget(a.targetId),r=a.targetId,[4,Vh(n,e,r,"current"===u)];case 3:i=s.sent(),n.isPrimaryClient&&Wc(n.remoteStore,a),s.label=4;case 4:return[2,i]}}))}))}function Vh(t,e,n,r){return(0,s.mG)(this,void 0,void 0,(function(){var i,o,a,u,c,h;return(0,s.Jh)(this,(function(l){switch(l.label){case 0:return t.Oo=function(e,n,r){return function(t,e,n,r){return(0,s.mG)(this,void 0,void 0,(function(){var i,o,a;return(0,s.Jh)(this,(function(s){switch(s.label){case 0:return(i=e.view._o(n)).Nn?[4,ic(t.localStore,e.query,!1).then((function(t){var n=t.documents;return e.view._o(n,i)}))]:[3,2];case 1:i=s.sent(),s.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),a=e.view.applyChanges(i,t.isPrimaryClient,o),[2,($h(t,e.targetId,a.To),a.snapshot)]}}))}))}(t,e,n,r)},[4,ic(t.localStore,e,!0)];case 1:return i=l.sent(),o=new Lh(e,i.Bn),a=o._o(i.documents),u=ba.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),c=o.applyChanges(a,t.isPrimaryClient,u),$h(t,n,c.To),h=new Mh(e,n,o),[2,(t.Po.set(e,h),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),c.snapshot)]}}))}))}function qh(t,e){return(0,s.mG)(this,void 0,void 0,(function(){var n,r,i;return(0,s.Jh)(this,(function(o){switch(o.label){case 0:return n=Hr(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter((function(t){return!po(t,e)}))),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,rc(n.localStore,r.targetId,!1).then((function(){n.sharedClientState.clearQueryState(r.targetId),Zc(n.remoteStore,r.targetId),Qh(n,r.targetId)})).catch(Tu)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return Qh(n,r.targetId),[4,rc(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function Bh(t,e,n){return(0,s.mG)(this,void 0,void 0,(function(){var r,i,o,a;return(0,s.Jh)(this,(function(s){switch(s.label){case 0:r=gl(t),s.label=1;case 1:return s.trys.push([1,5,,6]),[4,function(t,e){var n,r=Hr(t),i=Qr.now(),o=e.reduce((function(t,e){return t.add(e.key)}),ga());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Mn.pn(t,o).next((function(o){n=o;for(var a=[],s=0,u=e;s<u.length;s++){var c=u[s],h=Bo(c,n.get(c.key));null!=h&&a.push(new zo(c.key,h,Pi(h.value.mapValue),jo.exists(!0)))}return r._n.addMutationBatch(t,i,a,e)}))})).then((function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}}))}(r.localStore,e)];case 2:return i=s.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new ra(Wr)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,nl(r,i.changes)];case 3:return s.sent(),[4,sh(r.remoteStore)];case 4:return s.sent(),[3,6];case 5:return o=s.sent(),a=yh(o,"Failed to persist write"),n.reject(a),[3,6];case 6:return[2]}}))}))}function Gh(t,e){return(0,s.mG)(this,void 0,void 0,(function(){var n,r;return(0,s.Jh)(this,(function(i){switch(i.label){case 0:n=Hr(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,$u(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach((function(t,e){var r=n.Co.get(e);r&&(Kr(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?Kr(r.bo):t.removedDocuments.size>0&&(Kr(r.bo),r.bo=!1))})),[4,nl(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,Tu(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function Kh(t,e,n){var r=Hr(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach((function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=Hr(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)})),r&&Nh(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Hh(t,e,n){return(0,s.mG)(this,void 0,void 0,(function(){var r,i,o,a,u,c;return(0,s.Jh)(this,(function(s){switch(s.label){case 0:return(r=Hr(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(a=(a=new ra(yi.comparator)).insert(o,Li.newNoDocument(o,Yr.min())),u=ga().add(o),c=new ya(Yr.min(),new Map,new aa(Wr),a,u),[4,Gh(r,c)]):[3,2];case 1:return s.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),el(r),[3,4];case 2:return[4,rc(r.localStore,e,!1).then((function(){return Qh(r,e,n)})).catch(Tu)];case 3:s.sent(),s.label=4;case 4:return[2]}}))}))}function zh(t,e){return(0,s.mG)(this,void 0,void 0,(function(){var n,r,i;return(0,s.Jh)(this,(function(o){switch(o.label){case 0:n=Hr(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Qu(n.localStore,e)];case 2:return i=o.sent(),Xh(n,r,null),Zh(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,nl(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,Tu(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Jh(t,e,n){return(0,s.mG)(this,void 0,void 0,(function(){var r,i;return(0,s.Jh)(this,(function(o){switch(o.label){case 0:r=Hr(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=Hr(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n._n.lookupMutationBatch(t,e).next((function(e){return Kr(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}(r.localStore,e)];case 2:return i=o.sent(),Xh(r,e,n),Zh(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,nl(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,Tu(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Wh(t,e){return(0,s.mG)(this,void 0,void 0,(function(){var n,r,i,o,a;return(0,s.Jh)(this,(function(s){switch(s.label){case 0:th((n=Hr(t)).remoteStore)||Ur("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,function(t){var e=Hr(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e._n.getHighestUnacknowledgedBatchId(t)}))}(n.localStore)];case 2:return-1===(r=s.sent())?[2,void e.resolve()]:((i=n.ko.get(r)||[]).push(e),n.ko.set(r,i),[3,4]);case 3:return o=s.sent(),a=yh(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(a),[3,4];case 4:return[2]}}))}))}function Zh(t,e){(t.ko.get(e)||[]).forEach((function(t){t.resolve()})),t.ko.delete(e)}function Xh(t,e,n){var r=Hr(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function Qh(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach((function(e){t.No.containsKey(e)||Yh(t,e)}))}function Yh(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(Zc(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),el(t))}function $h(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof xh?(t.No.addReference(o.key,e),tl(t,o)):o instanceof Ph?(Ur("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||Yh(t,o.key)):Gr()}}function tl(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(Ur("SyncEngine","New document in limbo: "+n),t.So.add(r),el(t))}function el(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new yi(ri.fromString(e)),r=t.Fo.next();t.Co.set(r,new jh(n)),t.Do=t.Do.insert(n,r),Wc(t.remoteStore,new Ks(lo(io(n.path)),r,2,Pr.o))}}function nl(t,e,n){return(0,s.mG)(this,void 0,void 0,(function(){var r,i,o,a;return(0,s.Jh)(this,(function(u){switch(u.label){case 0:return r=Hr(t),i=[],o=[],a=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach((function(t,s){a.push(r.Oo(s,e,n).then((function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(s.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=zu.Pn(s.targetId,t);o.push(e)}})))})),[4,Promise.all(a)]);case 1:return u.sent(),r.vo._r(i),[4,function(t,e){return(0,s.mG)(this,void 0,void 0,(function(){var n,r,i,o,a,u,c,h,l;return(0,s.Jh)(this,(function(s){switch(s.label){case 0:n=Hr(t),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return Cs.forEach(e,(function(e){return Cs.forEach(e.bn,(function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)})).next((function(){return Cs.forEach(e.vn,(function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)}))}))}))}))];case 2:return s.sent(),[3,4];case 3:if(!Ls(r=s.sent()))throw r;return Ur("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=o[i],u=a.targetId,a.fromCache||(c=n.kn.get(u),h=c.snapshotVersion,l=c.withLastLimboFreeSnapshotVersion(h),n.kn=n.kn.insert(u,l));return[2]}}))}))}(r.localStore,o)];case 2:u.sent(),u.label=3;case 3:return[2]}}))}))}function rl(t,e){return(0,s.mG)(this,void 0,void 0,(function(){var n,r;return(0,s.Jh)(this,(function(i){switch(i.label){case 0:return(n=Hr(t)).currentUser.isEqual(e)?[3,3]:(Ur("SyncEngine","User change. New user:",e.toKey()),[4,Xu(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.ko.forEach((function(t){t.forEach((function(t){t.reject(new Mr(Lr.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.ko.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,nl(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function il(t,e){var n=Hr(t),r=n.Co.get(e);if(r&&r.bo)return ga().add(r.key);var i=ga(),o=n.Vo.get(e);if(!o)return i;for(var a=0,s=o;a<s.length;a++){var u=s[a],c=n.Po.get(u);i=i.unionWith(c.view.wo)}return i}function ol(t,e){return(0,s.mG)(this,void 0,void 0,(function(){var n,r,i;return(0,s.Jh)(this,(function(o){switch(o.label){case 0:return[4,ic((n=Hr(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&$h(n,e.targetId,i.To),i)]}}))}))}function al(t){return(0,s.mG)(this,void 0,void 0,(function(){var e;return(0,s.Jh)(this,(function(n){return[2,ac((e=Hr(t)).localStore).then((function(t){return nl(e,t)}))]}))}))}function sl(t,e,n,r){return(0,s.mG)(this,void 0,void 0,(function(){var i,o;return(0,s.Jh)(this,(function(a){switch(a.label){case 0:return[4,function(t,e){var n=Hr(t),r=Hr(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.jt(t,e).next((function(e){return e?n.Mn.pn(t,e):Cs.resolve(null)}))}))}((i=Hr(t)).localStore,e)];case 1:return null===(o=a.sent())?[3,6]:"pending"!==n?[3,3]:[4,sh(i.remoteStore)];case 2:return a.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Xh(i,e,r||null),Zh(i,e),function(t,e){Hr(Hr(t)._n).Gt(e)}(i.localStore,e)):Gr(),a.label=4;case 4:return[4,nl(i,o)];case 5:return a.sent(),[3,7];case 6:Ur("SyncEngine","Cannot apply mutation batch with id: "+e),a.label=7;case 7:return[2]}}))}))}function ul(t,e){return(0,s.mG)(this,void 0,void 0,(function(){var n,r,i,o,a,u,c,h;return(0,s.Jh)(this,(function(s){switch(s.label){case 0:return dl(n=Hr(t)),gl(n),!0!==e||!0===n.$o?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,cl(n,r.toArray())]);case 1:return i=s.sent(),n.$o=!0,[4,dh(n.remoteStore,!0)];case 2:for(s.sent(),o=0,a=i;o<a.length;o++)u=a[o],Wc(n.remoteStore,u);return[3,7];case 3:return!1!==e||!1===n.$o?[3,7]:(c=[],h=Promise.resolve(),n.Vo.forEach((function(t,e){n.sharedClientState.isLocalQueryTarget(e)?c.push(e):h=h.then((function(){return Qh(n,e),rc(n.localStore,e,!0)})),Zc(n.remoteStore,e)})),[4,h]);case 4:return s.sent(),[4,cl(n,c)];case 5:return s.sent(),function(t){var e=Hr(t);e.Co.forEach((function(t,n){Zc(e.remoteStore,n)})),e.No.ts(),e.Co=new Map,e.Do=new ra(yi.comparator)}(n),n.$o=!1,[4,dh(n.remoteStore,!1)];case 6:s.sent(),s.label=7;case 7:return[2]}}))}))}function cl(t,e,n){return(0,s.mG)(this,void 0,void 0,(function(){var n,r,i,o,a,u,c,h,l,f,p,d,g,v;return(0,s.Jh)(this,(function(s){switch(s.label){case 0:n=Hr(t),r=[],i=[],o=0,a=e,s.label=1;case 1:return o<a.length?(u=a[o],c=void 0,(h=n.Vo.get(u))&&0!==h.length?[4,nc(n.localStore,lo(h[0]))]:[3,7]):[3,13];case 2:c=s.sent(),l=0,f=h,s.label=3;case 3:return l<f.length?(p=f[l],d=n.Po.get(p),[4,ol(n,d)]):[3,6];case 4:(g=s.sent()).snapshot&&i.push(g.snapshot),s.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,oc(n.localStore,u)];case 8:return v=s.sent(),[4,nc(n.localStore,v)];case 9:return c=s.sent(),[4,Vh(n,hl(v),u,!1)];case 10:s.sent(),s.label=11;case 11:r.push(c),s.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}}))}))}function hl(t){return ro(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function ll(t){var e=Hr(t);return Hr(Hr(e.localStore).persistence).fn()}function fl(t,e,n,r){return(0,s.mG)(this,void 0,void 0,(function(){var i,o,a;return(0,s.Jh)(this,(function(s){switch(s.label){case 0:return(i=Hr(t)).$o?(Ur("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,ac(i.localStore)];case 3:return o=s.sent(),a=ya.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,nl(i,o,a)];case 4:return s.sent(),[3,8];case 5:return[4,rc(i.localStore,e,!0)];case 6:return s.sent(),Qh(i,e,r),[3,8];case 7:Gr(),s.label=8;case 8:return[2]}}))}))}function pl(t,e,n){return(0,s.mG)(this,void 0,void 0,(function(){var r,i,o,a,u,c,h,l,f,p;return(0,s.Jh)(this,(function(d){switch(d.label){case 0:if(!(r=dl(t)).$o)return[3,10];i=0,o=e,d.label=1;case 1:return i<o.length?(a=o[i],r.Vo.has(a)?(Ur("SyncEngine","Adding an already active target "+a),[3,5]):[4,oc(r.localStore,a)]):[3,6];case 2:return u=d.sent(),[4,nc(r.localStore,u)];case 3:return c=d.sent(),[4,Vh(r,hl(u),c.targetId,!1)];case 4:d.sent(),Wc(r.remoteStore,c),d.label=5;case 5:return i++,[3,1];case 6:h=function(t){return(0,s.Jh)(this,(function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,rc(r.localStore,t,!1).then((function(){Zc(r.remoteStore,t),Qh(r,t)})).catch(Tu)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},l=0,f=n,d.label=7;case 7:return l<f.length?(p=f[l],[5,h(p)]):[3,10];case 8:d.sent(),d.label=9;case 9:return l++,[3,7];case 10:return[2]}}))}))}function dl(t){var e=Hr(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Gh.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=il.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Hh.bind(null,e),e.vo._r=kh.bind(null,e.eventManager),e.vo.Mo=Ah.bind(null,e.eventManager),e}function gl(t){var e=Hr(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=zh.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Jh.bind(null,e),e}var vl=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return(0,s.mG)(this,void 0,void 0,(function(){return(0,s.Jh)(this,(function(e){switch(e.label){case 0:return this.R=Fc(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Ko(t),[2]}}))}))},t.prototype.Uo=function(t){return null},t.prototype.Ko=function(t){return Zu(this.persistence,new Ju,t.initialUser,this.R)},t.prototype.qo=function(t){return new mc(bc.bs,this.R)},t.prototype.Bo=function(t){return new Cc},t.prototype.terminate=function(){return(0,s.mG)(this,void 0,void 0,(function(){return(0,s.Jh)(this,(function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}}))}))},t}(),ml=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qo=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return(0,s.ZT)(e,t),e.prototype.initialize=function(e){return(0,s.mG)(this,void 0,void 0,(function(){var n=this;return(0,s.Jh)(this,(function(r){switch(r.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return r.sent(),[4,sc(this.localStore)];case 2:return r.sent(),[4,this.Qo.initialize(this,e)];case 3:return r.sent(),[4,gl(this.Qo.syncEngine)];case 4:return r.sent(),[4,sh(this.Qo.remoteStore)];case 5:return r.sent(),[4,this.persistence.He((function(){return n.gcScheduler&&!n.gcScheduler.started&&n.gcScheduler.start(n.localStore),Promise.resolve()}))];case 6:return r.sent(),[2]}}))}))},e.prototype.Ko=function(t){return Zu(this.persistence,new Ju,t.initialUser,this.R)},e.prototype.Uo=function(t){var e=this.persistence.referenceDelegate.garbageCollector;return new ku(e,t.asyncQueue)},e.prototype.qo=function(t){var e=Gu(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?hu.withCacheSize(this.cacheSizeBytes):hu.DEFAULT;return new Vu(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,Mc(),jc(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new Cc},e}(vl),yl=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Qo=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return(0,s.ZT)(e,t),e.prototype.initialize=function(e){return(0,s.mG)(this,void 0,void 0,(function(){var n,r=this;return(0,s.Jh)(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Qo.syncEngine,this.sharedClientState instanceof Oc?(this.sharedClientState.syncEngine={ui:sl.bind(null,n),ai:fl.bind(null,n),hi:pl.bind(null,n),fn:ll.bind(null,n),ci:al.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He((function(t){return(0,s.mG)(r,void 0,void 0,(function(){return(0,s.Jh)(this,(function(e){switch(e.label){case 0:return[4,ul(this.Qo.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.Bo=function(t){var e=Mc();if(!Oc.yt(e))throw new Mr(Lr.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Gu(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new Oc(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(ml),bl=function(){function t(){}return t.prototype.initialize=function(t,e){return(0,s.mG)(this,void 0,void 0,(function(){var n=this;return(0,s.Jh)(this,(function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return Kh(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=rl.bind(null,this.syncEngine),[4,dh(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.createEventManager=function(t){return new Th},t.prototype.createDatastore=function(t){var e,n=Fc(t.databaseInfo.databaseId),r=(e=t.databaseInfo,new Lc(e));return function(t,e,n){return new Gc(t,e,n)}(t.credentials,r,n)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,a=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return Kh(a.syncEngine,t,0)},o=Rc.yt()?new Rc:new Dc,new Hc(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,a){var s=new Fh(t,e,n,r,i,o);return a&&(s.$o=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return(0,s.mG)(this,void 0,void 0,(function(){var e;return(0,s.Jh)(this,(function(n){switch(n.label){case 0:return e=Hr(t),Ur("RemoteStore","RemoteStore shutting down."),e.Or.add(5),[4,Jc(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}}))}))}(this.remoteStore)},t}();var wl=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),Il=(function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new Os,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then((function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))}),(function(t){return n.metadata.reject(t)}))}t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return(0,s.mG)(this,void 0,void 0,(function(){return(0,s.Jh)(this,(function(t){return[2,this.metadata.promise]}))}))},t.prototype.Lo=function(){return(0,s.mG)(this,void 0,void 0,(function(){return(0,s.Jh)(this,(function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}}))}))},t.prototype.Ho=function(){return(0,s.mG)(this,void 0,void 0,(function(){var t,e,n,r;return(0,s.Jh)(this,(function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new Ch(JSON.parse(r),t.length+n)]}}))}))},t.prototype.Zo=function(){return this.buffer.findIndex((function(t){return t==="{".charCodeAt(0)}))},t.prototype.Jo=function(){return(0,s.mG)(this,void 0,void 0,(function(){var t,e;return(0,s.Jh)(this,(function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}}))}))},t.prototype.Xo=function(t){return(0,s.mG)(this,void 0,void 0,(function(){var e;return(0,s.Jh)(this,(function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}}))}))},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return(0,s.mG)(this,void 0,void 0,(function(){var t,e;return(0,s.Jh)(this,(function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}}))}))}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return(0,s.mG)(this,void 0,void 0,(function(){var e,n=this;return(0,s.Jh)(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Mr(Lr.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return(0,s.mG)(this,void 0,void 0,(function(){var n,r,i,o,a,u;return(0,s.Jh)(this,(function(s){switch(s.label){case 0:return n=Hr(t),r=Va(n.R)+"/documents",i={documents:e.map((function(t){return Ma(n.R,t)}))},[4,n.$i("BatchGetDocuments",r,i)];case 1:return o=s.sent(),a=new Map,o.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){Kr(!!e.found),e.found.name,e.found.updateTime;var n=ja(t,e.found.name),r=xa(e.found.updateTime),i=new xi({mapValue:{fields:e.found.fields}});return Li.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){Kr(!!e.missing),Kr(!!e.readTime);var n=ja(t,e.missing),r=xa(e.readTime);return Li.newNoDocument(n,r)}(t,e):Gr()}(n.R,t);a.set(e.key.toString(),e)})),u=[],[2,(e.forEach((function(t){var e=a.get(t.toString());Kr(!!e),u.push(e)})),u)]}}))}))}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach((function(t){return n.recordVersion(t)})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new Yo(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return(0,s.mG)(this,void 0,void 0,(function(){var t,e=this;return(0,s.Jh)(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=yi.fromPath(n);e.mutations.push(new $o(r,e.precondition(r)))})),[4,function(t,e){return(0,s.mG)(this,void 0,void 0,(function(){var n,r,i;return(0,s.Jh)(this,(function(o){switch(o.label){case 0:return n=Hr(t),r=Va(n.R)+"/documents",i={writes:e.map((function(t){return Ka(n.R,t)}))},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw Gr();e=Yr.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Mr(Lr.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?jo.updateTime(e):jo.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Yr.min()))throw new Mr(Lr.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return jo.updateTime(e)}return jo.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),_l=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new Uc(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.ec-=1,this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji((function(){return(0,s.mG)(t,void 0,void 0,(function(){var t,e,n=this;return(0,s.Jh)(this,(function(r){return t=new Il(this.datastore),(e=this.sc(t))&&e.then((function(e){n.asyncQueue.enqueueAndForget((function(){return t.commit().then((function(){n.deferred.resolve(e)})).catch((function(t){n.ic(t)}))}))})).catch((function(t){n.ic(t)})),[2]}))}))}))},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!gi(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget((function(){return e.nc(),Promise.resolve()}))):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!ea(e)}return!1},t}(),Tl=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=wc.UNAUTHENTICATED,this.clientId=Jr.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,(function(t){return(0,s.mG)(r,void 0,void 0,(function(){return(0,s.Jh)(this,(function(e){switch(e.label){case 0:return Ur("FirestoreClient","Received user=",t.uid),[4,this.credentialListener(t)];case 1:return e.sent(),this.user=t,[2]}}))}))}))}return t.prototype.getConfiguration=function(){return(0,s.mG)(this,void 0,void 0,(function(){return(0,s.Jh)(this,(function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]}))}))},t.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Mr(Lr.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new Os;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((function(){return(0,s.mG)(t,void 0,void 0,(function(){var t,n;return(0,s.Jh)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=yh(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();function El(t,e){return(0,s.mG)(this,void 0,void 0,(function(){var n,r,i=this;return(0,s.Jh)(this,(function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),Ur("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener((function(t){return(0,s.mG)(i,void 0,void 0,(function(){return(0,s.Jh)(this,(function(n){switch(n.label){case 0:return r.isEqual(t)?[3,2]:[4,Xu(e.localStore,t)];case 1:n.sent(),r=t,n.label=2;case 2:return[2]}}))}))})),e.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=e,[2]}}))}))}function Sl(t,e){return(0,s.mG)(this,void 0,void 0,(function(){var n,r;return(0,s.Jh)(this,(function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,kl(t)];case 1:return n=i.sent(),Ur("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener((function(t){return function(t,e){return(0,s.mG)(this,void 0,void 0,(function(){var n,r;return(0,s.Jh)(this,(function(i){switch(i.label){case 0:return(n=Hr(t)).asyncQueue.verifyOperationInProgress(),Ur("RemoteStore","RemoteStore received new credentials"),r=th(n),n.Or.add(3),[4,Jc(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Or.delete(3),[4,zc(n)];case 3:return i.sent(),[2]}}))}))}(e.remoteStore,t)})),t.onlineComponents=e,[2]}}))}))}function kl(t){return(0,s.mG)(this,void 0,void 0,(function(){return(0,s.Jh)(this,(function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(Ur("FirestoreClient","Using default OfflineComponentProvider"),[4,El(t,new vl)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}}))}))}function Al(t){return(0,s.mG)(this,void 0,void 0,(function(){return(0,s.Jh)(this,(function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(Ur("FirestoreClient","Using default OnlineComponentProvider"),[4,Sl(t,new bl)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}}))}))}function Nl(t){return kl(t).then((function(t){return t.persistence}))}function Ol(t){return kl(t).then((function(t){return t.localStore}))}function Cl(t){return Al(t).then((function(t){return t.remoteStore}))}function Dl(t){return Al(t).then((function(t){return t.syncEngine}))}function Rl(t){return(0,s.mG)(this,void 0,void 0,(function(){var e,n;return(0,s.Jh)(this,(function(r){switch(r.label){case 0:return[4,Al(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=Uh.bind(null,e.syncEngine),n.onUnlisten=qh.bind(null,e.syncEngine),n)]}}))}))}function xl(t,e,n){var r=this;void 0===n&&(n={});var i=new Os;return t.asyncQueue.enqueueAndForget((function(){return(0,s.mG)(r,void 0,void 0,(function(){var r;return(0,s.Jh)(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new wl({next:function(o){e.enqueueAndForget((function(){return Sh(t,a)}));var s=o.docs.has(n);!s&&o.fromCache?i.reject(new Mr(Lr.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&o.fromCache&&r&&"server"===r.source?i.reject(new Mr(Lr.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),a=new Oh(io(n.path),o,{includeMetadataChanges:!0,so:!0});return Eh(t,a)},[4,Rl(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}function Pl(t,e,n){var r=this;void 0===n&&(n={});var i=new Os;return t.asyncQueue.enqueueAndForget((function(){return(0,s.mG)(r,void 0,void 0,(function(){var r;return(0,s.Jh)(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new wl({next:function(n){e.enqueueAndForget((function(){return Sh(t,a)})),n.fromCache&&"server"===r.source?i.reject(new Mr(Lr.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),a=new Oh(n,o,{includeMetadataChanges:!0,so:!0});return Eh(t,a)},[4,Rl(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}var Ll=function(t,e,n,r,i,o,a,s){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=s},Ml=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),jl=new Map,Fl=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},Ul=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable((function(){return e(wc.UNAUTHENTICATED)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Vl=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){var n=this;this.changeListener=e,t.enqueueRetryable((function(){return e(n.token.user)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),ql=function(){function t(t){var e=this;this.currentUser=wc.UNAUTHENTICATED,this.oc=new Os,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){e.cc++,e.currentUser=e.ac(),e.oc.resolve(),e.changeListener&&e.asyncQueue.enqueueRetryable((function(){return e.changeListener(e.currentUser)}))};var n=function(t){Ur("FirebaseCredentialsProvider","Auth detected"),e.auth=t,e.auth.addAuthTokenListener(e.uc)};t.onInit((function(t){return n(t)})),setTimeout((function(){if(!e.auth){var r=t.getImmediate({optional:!0});r?n(r):(Ur("FirebaseCredentialsProvider","Auth not yet detected"),e.oc.resolve())}}),0)}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.cc!==e?(Ur("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Kr("string"==typeof n.accessToken),new Fl(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t,e){var n=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable((function(){return(0,s.mG)(n,void 0,void 0,(function(){return(0,s.Jh)(this,(function(t){switch(t.label){case 0:return[4,this.oc.promise];case 1:return t.sent(),[4,e(this.currentUser)];case 2:return t.sent(),this.changeListener=e,[2]}}))}))}))},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},t.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return Kr(null===t||"string"==typeof t),new wc(t)},t}(),Bl=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n,this.type="FirstParty",this.user=wc.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},e=this.hc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),t}(),Gl=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n}return t.prototype.getToken=function(){return Promise.resolve(new Bl(this.hc,this.lc,this.fc))},t.prototype.setChangeListener=function(t,e){t.enqueueRetryable((function(){return e(wc.FIRST_PARTY)}))},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function Kl(t,e,n){if(!n)throw new Mr(Lr.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Hl(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Mr(Lr.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function zl(t,e,n,r){if(!0===e&&!0===r)throw new Mr(Lr.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Jl(t){if(!yi.isDocumentKey(t))throw new Mr(Lr.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Wl(t){if(yi.isDocumentKey(t))throw new Mr(Lr.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function Zl(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Gr()}function Xl(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Mr(Lr.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Zl(t);throw new Mr(Lr.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Ql(t,e){if(e<=0)throw new Mr(Lr.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var Yl=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Mr(Lr.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Mr(Lr.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,zl("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},t}(),$l=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Yl({}),this._settingsFrozen=!1,t instanceof Ml?(this._databaseId=t,this._credentials=new Ul):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Mr(Lr.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ml(t.options.projectId)}(t),this._credentials=new ql(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new Mr(Lr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new Mr(Lr.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Yl(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new Ul;switch(t.type){case"gapi":var e=t.client;return Kr(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Gl(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Mr(Lr.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return this,(t=jl.get(this))&&(Ur("ComponentProvider","Removing Datastore"),jl.delete(this),t.terminate()),Promise.resolve();var t},t}(),tf=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new nf(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),ef=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),nf=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,io(r))||this)._path=r,i.type="collection",i}return(0,s.ZT)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new tf(this.firestore,null,new yi(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(ef);function rf(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=(0,v.m9)(t),Kl("collection","path",e),t instanceof $l)return Wl(n=ri.fromString.apply(ri,(0,s.ev)([e],r))),new nf(t,null,n);if(!(t instanceof tf||t instanceof nf))throw new Mr(Lr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Wl(n=ri.fromString.apply(ri,(0,s.ev)([t.path],r)).child(ri.fromString(e))),new nf(t.firestore,null,n)}function of(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=(0,v.m9)(t),1===arguments.length&&(e=Jr.u()),Kl("doc","path",e),t instanceof $l)return Jl(n=ri.fromString.apply(ri,(0,s.ev)([e],r))),new tf(t,null,new yi(n));if(!(t instanceof tf||t instanceof nf))throw new Mr(Lr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Jl(n=t._path.child(ri.fromString.apply(ri,(0,s.ev)([e],r)))),new tf(t.firestore,t instanceof nf?t.converter:null,new yi(n))}function af(t,e){return t=(0,v.m9)(t),e=(0,v.m9)(e),(t instanceof tf||t instanceof nf)&&(e instanceof tf||e instanceof nf)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function sf(t,e){return t=(0,v.m9)(t),e=(0,v.m9)(e),t instanceof ef&&e instanceof ef&&t.firestore===e.firestore&&po(t._query,e._query)&&t.converter===e.converter}var uf=function(){function t(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new Uc(this,"async_queue_retry"),this.Ic=function(){var e=jc();e&&Ur("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=jc();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ac(),this.Rc(t)},t.prototype.enterRestrictedMode=function(t){if(!this._c){this._c=!0,this.Ec=t||!1;var e=jc();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Ic)}},t.prototype.enqueue=function(t){var e=this;if(this.Ac(),this._c)return new Promise((function(){}));var n=new Os;return this.Rc((function(){return e._c&&e.Ec?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget((function(){return e.wc.push(t),e.bc()}))},t.prototype.bc=function(){return(0,s.mG)(this,void 0,void 0,(function(){var t,e=this;return(0,s.Jh)(this,(function(n){switch(n.label){case 0:if(0===this.wc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return n.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!Ls(t=n.sent()))throw t;return Ur("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji((function(){return e.bc()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Rc=function(t){var e=this,n=this.dc.then((function(){return e.gc=!0,t().catch((function(t){throw e.yc=t,e.gc=!1,Vr("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.gc=!1,t}))}));return this.dc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Ac(),this.Tc.indexOf(t)>-1&&(e=0);var i=mh.createAndSchedule(this,t,e,n,(function(t){return r.vc(t)}));return this.mc.push(i),i},t.prototype.Ac=function(){this.yc&&Gr()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Pc=function(){return(0,s.mG)(this,void 0,void 0,(function(){var t;return(0,s.Jh)(this,(function(e){switch(e.label){case 0:return[4,t=this.dc];case 1:e.sent(),e.label=2;case 2:if(t!==this.dc)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.Vc=function(t){for(var e=0,n=this.mc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Sc=function(t){var e=this;return this.Pc().then((function(){e.mc.sort((function(t,e){return t.targetTimeMs-e.targetTimeMs}));for(var n=0,r=e.mc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.Pc()}))},t.prototype.Dc=function(t){this.Tc.push(t)},t.prototype.vc=function(t){var e=this.mc.indexOf(t);this.mc.splice(e,1)},t}();function cf(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new Os,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var hf=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new uf,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return(0,s.ZT)(e,t),e.prototype._terminate=function(){return this._firestoreClient||ff(this),this._firestoreClient.terminate()},e}($l);function lf(t){return t._firestoreClient||ff(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function ff(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new Ll(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new Tl(t._credentials,t._queue,r)}function pf(t,e,n){var r=this,i=new Os;return t.asyncQueue.enqueue((function(){return(0,s.mG)(r,void 0,void 0,(function(){var r;return(0,s.Jh)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,El(t,n)];case 1:return o.sent(),[4,Sl(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===Lr.FAILED_PRECONDITION||t.code===Lr.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return i.promise}))}function df(t){if(t._initialized||t._terminated)throw new Mr(Lr.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var gf=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Mr(Lr.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new oi(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),vf=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(si.fromBase64String(e))}catch(e){throw new Mr(Lr.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(si.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),mf=function(t){this._methodName=t},yf=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new Mr(Lr.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Mr(Lr.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return Wr(this._lat,t._lat)||Wr(this._long,t._long)},t}(),bf=/^__.*__$/,wf=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new zo(t,this.data,this.fieldMask,e,this.fieldTransforms):new Ho(t,this.data,e,this.fieldTransforms)},t}(),If=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new zo(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function _f(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Gr()}}var Tf=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Cc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),t.prototype.xc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.kc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,Fc:!1});return r.$c(t),r},t.prototype.Oc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,Fc:!1});return r.Cc(),r},t.prototype.Mc=function(t){return this.xc({path:void 0,Fc:!0})},t.prototype.Lc=function(t){return Gf(t,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find((function(e){return t.isPrefixOf(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.isPrefixOf(e.field)}))},t.prototype.Cc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.$c(this.path.get(t))},t.prototype.$c=function(t){if(0===t.length)throw this.Lc("Document fields must not be empty");if(_f(this.Nc)&&bf.test(t))throw this.Lc('Document fields cannot begin and end with "__"')},t}(),Ef=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||Fc(t)}return t.prototype.Uc=function(t,e,n,r){return void 0===r&&(r=!1),new Tf({Nc:t,methodName:e,qc:n,path:oi.emptyPath(),Fc:!1,Bc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function Sf(t){var e=t._freezeSettings(),n=Fc(t._databaseId);return new Ef(t._databaseId,!!e.ignoreUndefinedProperties,n)}function kf(t,e,n,r,i,o){void 0===o&&(o={});var a=t.Uc(o.merge||o.mergeFields?2:0,e,n,i);Uf("Data must be an object, but it was:",a,r);var s,u,c=jf(r,a);if(o.merge)s=new ai(a.fieldMask),u=a.fieldTransforms;else if(o.mergeFields){for(var h=[],l=0,f=o.mergeFields;l<f.length;l++){var p=Vf(e,f[l],n);if(!a.contains(p))throw new Mr(Lr.INVALID_ARGUMENT,"Field '"+p+"' is specified in your field mask but missing from your input data.");Kf(h,p)||h.push(p)}s=new ai(h),u=a.fieldTransforms.filter((function(t){return s.covers(t.field)}))}else s=null,u=a.fieldTransforms;return new wf(new xi(c),s,u)}var Af=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,s.ZT)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Nc)throw 1===t.Nc?t.Lc(this._methodName+"() can only appear at the top level of your update data"):t.Lc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(mf);function Nf(t,e,n){return new Tf({Nc:3,qc:e.settings.qc,methodName:t._methodName,Fc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var Of=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,s.ZT)(e,t),e.prototype._toFieldTransform=function(t){return new Lo(t.path,new Ao)},e.prototype.isEqual=function(t){return t instanceof e},e}(mf),Cf=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return(0,s.ZT)(e,t),e.prototype._toFieldTransform=function(t){var e=Nf(this,t,!0),n=this.Kc.map((function(t){return Mf(t,e)})),r=new No(n);return new Lo(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(mf),Df=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return(0,s.ZT)(e,t),e.prototype._toFieldTransform=function(t){var e=Nf(this,t,!0),n=this.Kc.map((function(t){return Mf(t,e)})),r=new Co(n);return new Lo(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(mf),Rf=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Qc=n,r}return(0,s.ZT)(e,t),e.prototype._toFieldTransform=function(t){var e=new Ro(t.R,_o(t.R,this.Qc));return new Lo(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(mf);function xf(t,e,n,r){var i=t.Uc(1,e,n);Uf("Data must be an object, but it was:",i,r);var o=[],a=xi.empty();ti(r,(function(t,r){var s=Bf(e,t,n);r=(0,v.m9)(r);var u=i.Oc(s);if(r instanceof Af)o.push(s);else{var c=Mf(r,u);null!=c&&(o.push(s),a.set(s,c))}}));var s=new ai(o);return new If(a,s,i.fieldTransforms)}function Pf(t,e,n,r,i,o){var a=t.Uc(1,e,n),s=[Vf(e,r,n)],u=[i];if(o.length%2!=0)throw new Mr(Lr.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)s.push(Vf(e,o[c])),u.push(o[c+1]);for(var h=[],l=xi.empty(),f=s.length-1;f>=0;--f)if(!Kf(h,s[f])){var p=s[f],d=u[f];d=(0,v.m9)(d);var g=a.Oc(p);if(d instanceof Af)h.push(p);else{var m=Mf(d,g);null!=m&&(h.push(p),l.set(p,m))}}var y=new ai(h);return new If(l,y,a.fieldTransforms)}function Lf(t,e,n,r){return void 0===r&&(r=!1),Mf(n,t.Uc(r?4:3,e))}function Mf(t,e){if(Ff(t=(0,v.m9)(t)))return Uf("Unsupported field value:",e,t),jf(t,e);if(t instanceof mf)return function(t,e){if(!_f(e.Nc))throw e.Lc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Lc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Fc&&4!==e.Nc)throw e.Lc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var a=Mf(o[i],e.Mc(r));null==a&&(a={nullValue:"NULL_VALUE"}),n.push(a),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=(0,v.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return _o(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Qr.fromDate(t);return{timestampValue:Ca(e.R,n)}}if(t instanceof Qr)return n=new Qr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:Ca(e.R,n)};if(t instanceof yf)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof vf)return{bytesValue:Da(e.R,t._byteString)};if(t instanceof tf){n=e.databaseId;var r=t.firestore._databaseId;if(!r.isEqual(n))throw e.Lc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Pa(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Lc("Unsupported field value: "+Zl(t))}(t,e)}function jf(t,e){var n={};return ei(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ti(t,(function(t,r){var i=Mf(r,e.kc(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function Ff(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Qr||t instanceof yf||t instanceof vf||t instanceof tf||t instanceof mf)}function Uf(t,e,n){if(!Ff(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=Zl(n);throw"an object"===r?e.Lc(t+" a custom object"):e.Lc(t+" "+r)}}function Vf(t,e,n){if((e=(0,v.m9)(e))instanceof gf)return e._internalPath;if("string"==typeof e)return Bf(t,e);throw Gf("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var qf=new RegExp("[~\\*/\\[\\]]");function Bf(t,e,n){if(e.search(qf)>=0)throw Gf("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(gf.bind.apply(gf,(0,s.ev)([void 0],e.split(".")))))._internalPath}catch(zp){throw Gf("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function Gf(t,e,n,r,i){var o=r&&!r.isEmpty(),a=void 0!==i,s="Function "+e+"() called with invalid data";n&&(s+=" (via `toFirestore()`)");var u="";return(o||a)&&(u+=" (found",o&&(u+=" in field "+r),a&&(u+=" in document "+i),u+=")"),new Mr(Lr.INVALID_ARGUMENT,(s+=". ")+t+u)}function Kf(t,e){return t.some((function(t){return t.isEqual(e)}))}var Hf=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new tf(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new zf(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(Jf("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),zf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,s.ZT)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(Hf);function Jf(t,e){return"string"==typeof e?Bf(t,e):e instanceof gf?e._internalPath:e._delegate._internalPath}var Wf=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Zf=function(t){function e(e,n,r,i,o,a){var s=this;return(s=t.call(this,e,n,r,i,a)||this)._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return(0,s.ZT)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new Xf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(Jf("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(Hf),Xf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,s.ZT)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Zf),Qf=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Wf(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach((function(r){t.call(e,new Xf(n._firestore,n._userDataWriter,r.key,r,new Wf(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Mr(Lr.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map((function(e){return{type:"added",doc:new Xf(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Wf(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}}))}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new Xf(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Wf(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Yf(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function Yf(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Gr()}}function $f(t,e){return t instanceof Zf&&e instanceof Zf?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Qf&&e instanceof Qf&&t._firestore===e._firestore&&sf(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function tp(t){if(ao(t)&&0===t.explicitOrderBy.length)throw new Mr(Lr.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var ep=function(){};function np(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var rp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).jc=e,i.Wc=n,i.Gc=r,i.type="where",i}return(0,s.ZT)(e,t),e.prototype._apply=function(t){var e=Sf(t.firestore),n=function(t,e,n,r,i,o,a){var s;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new Mr(Lr.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){hp(a,o);for(var u=[],c=0,h=a;c<h.length;c++){var l=h[c];u.push(cp(r,t,l))}s={arrayValue:{values:u}}}else s=cp(r,t,a)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||hp(a,o),s=Lf(n,"where",a,"in"===o||"not-in"===o);var f=qi.create(i,o,s);return function(t,e){if(e.g()){var n=uo(t);if(null!==n&&!n.isEqual(e.field))throw new Mr(Lr.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=so(t);null!==r&&lp(t,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new Mr(Lr.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new Mr(Lr.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,f),f}(t._query,0,e,t.firestore._databaseId,this.jc,this.Wc,this.Gc);return new ef(t.firestore,t.converter,function(t,e){var n=t.filters.concat([e]);return new no(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(ep),ip=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).jc=e,r.zc=n,r.type="orderBy",r}return(0,s.ZT)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new Mr(Lr.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Mr(Lr.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Yi(e,n);return function(t,e){if(null===so(t)){var n=uo(t);null!==n&&lp(t,n,e.field)}}(t,r),r}(t._query,this.jc,this.zc);return new ef(t.firestore,t.converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new no(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(ep),op=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return(0,s.ZT)(e,t),e.prototype._apply=function(t){return new ef(t.firestore,t.converter,fo(t._query,this.Hc,this.Jc))},e}(ep),ap=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return(0,s.ZT)(e,t),e.prototype._apply=function(t){var e=up(t,this.type,this.Yc,this.Xc);return new ef(t.firestore,t.converter,function(t,e){return new no(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(ep),sp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return(0,s.ZT)(e,t),e.prototype._apply=function(t){var e=up(t,this.type,this.Yc,this.Xc);return new ef(t.firestore,t.converter,function(t,e){return new no(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(ep);function up(t,e,n,r){if(n[0]=(0,v.m9)(n[0]),n[0]instanceof Hf)return function(t,e,n,r,i){if(!r)throw new Mr(Lr.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],a=0,s=ho(t);a<s.length;a++){var u=s[a];if(u.field.isKeyField())o.push(ki(e,r.key));else{var c=r.data.field(u.field);if(fi(c))throw new Mr(Lr.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var h=u.field.canonicalString();throw new Mr(Lr.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+h+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Xi(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=Sf(t.firestore);return function(t,e,n,r,i,o){var a=t.explicitOrderBy;if(i.length>a.length)throw new Mr(Lr.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var s=[],u=0;u<i.length;u++){var c=i[u];if(a[u].field.isKeyField()){if("string"!=typeof c)throw new Mr(Lr.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!co(t)&&-1!==c.indexOf("/"))throw new Mr(Lr.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var h=t.path.child(ri.fromString(c));if(!yi.isDocumentKey(h))throw new Mr(Lr.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+h+"' is not because it contains an odd number of segments.");var l=new yi(h);s.push(ki(e,l))}else{var f=Lf(n,r,c);s.push(f)}}return new Xi(s,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function cp(t,e,n){if("string"==typeof(n=(0,v.m9)(n))){if(""===n)throw new Mr(Lr.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!co(e)&&-1!==n.indexOf("/"))throw new Mr(Lr.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(ri.fromString(n));if(!yi.isDocumentKey(r))throw new Mr(Lr.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return ki(t,new yi(r))}if(n instanceof tf)return ki(t,n._key);throw new Mr(Lr.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Zl(n)+".")}function hp(t,e){if(!Array.isArray(t)||0===t.length)throw new Mr(Lr.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Mr(Lr.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function lp(t,e,n){if(!n.isEqual(e))throw new Mr(Lr.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var fp=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),bi(t)){case 0:return null;case 1:return t.booleanValue;case 2:return hi(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(li(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Gr()}},t.prototype.convertObject=function(t,e){var n=this,r={};return ti(t.fields,(function(t,i){r[t]=n.convertValue(i,e)})),r},t.prototype.convertGeoPoint=function(t){return new yf(hi(t.latitude),hi(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.convertValue(t,e)}))},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=pi(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(di(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=ci(t);return new Qr(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=ri.fromString(t);Kr(os(n));var r=new Ml(n.get(1),n.get(3)),i=new yi(n.popFirst(5));return r.isEqual(e)||Vr("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function pp(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var dp=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,s.ZT)(e,t),e.prototype.convertBytes=function(t){return new vf(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new tf(this.firestore,null,e)},e}(fp),gp=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Sf(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=vp(t,this._firestore),i=pp(r.converter,e,n),o=kf(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,jo.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,a=vp(t,this._firestore);return o="string"==typeof(e=(0,v.m9)(e))||e instanceof gf?Pf(this._dataReader,"WriteBatch.update",a._key,e,n,r):xf(this._dataReader,"WriteBatch.update",a._key,e),this._mutations.push(o.toMutation(a._key,jo.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=vp(t,this._firestore);return this._mutations=this._mutations.concat(new Yo(e._key,jo.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new Mr(Lr.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function vp(t,e){if((t=(0,v.m9)(t)).firestore!==e)throw new Mr(Lr.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var mp=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,s.ZT)(e,t),e.prototype.convertBytes=function(t){return new vf(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new tf(this.firestore,null,e)},e}(fp);function yp(t,e,n){t=Xl(t,tf);var r=Xl(t.firestore,hf),i=pp(t.converter,e,n);return Ip(r,[kf(Sf(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,jo.none())])}function bp(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=Xl(t,tf);var o=Xl(t.firestore,hf),a=Sf(o);return Ip(o,[("string"==typeof(e=(0,v.m9)(e))||e instanceof gf?Pf(a,"updateDoc",t._key,e,n,r):xf(a,"updateDoc",t._key,e)).toMutation(t._key,jo.exists(!0))])}function wp(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=(0,v.m9)(t);var a={includeMetadataChanges:!1},u=0;"object"!=typeof i[u]||cf(i[u])||(a=i[u],u++);var c,h,l,f={includeMetadataChanges:a.includeMetadataChanges};if(cf(i[u])){var p=i[u];i[u]=null===(e=p.next)||void 0===e?void 0:e.bind(p),i[u+1]=null===(n=p.error)||void 0===n?void 0:n.bind(p),i[u+2]=null===(r=p.complete)||void 0===r?void 0:r.bind(p)}if(t instanceof tf)h=Xl(t.firestore,hf),l=io(t._key.path),c={next:function(e){i[u]&&i[u](_p(h,t,e))},error:i[u+1],complete:i[u+2]};else{var d=Xl(t,ef);h=Xl(d.firestore,hf),l=d._query;var g=new mp(h);c={next:function(t){i[u]&&i[u](new Qf(h,g,d,t))},error:i[u+1],complete:i[u+2]},tp(t._query)}return function(t,e,n,r){var i=this,o=new wl(r),a=new Oh(e,o,n);return t.asyncQueue.enqueueAndForget((function(){return(0,s.mG)(i,void 0,void 0,(function(){var e;return(0,s.Jh)(this,(function(n){switch(n.label){case 0:return e=Eh,[4,Rl(t)];case 1:return[2,e.apply(void 0,[n.sent(),a])]}}))}))})),function(){o.Wo(),t.asyncQueue.enqueueAndForget((function(){return(0,s.mG)(i,void 0,void 0,(function(){var e;return(0,s.Jh)(this,(function(n){switch(n.label){case 0:return e=Sh,[4,Rl(t)];case 1:return[2,e.apply(void 0,[n.sent(),a])]}}))}))}))}}(lf(h),l,f,c)}function Ip(t,e){return function(t,e){var n=this,r=new Os;return t.asyncQueue.enqueueAndForget((function(){return(0,s.mG)(n,void 0,void 0,(function(){var n;return(0,s.Jh)(this,(function(i){switch(i.label){case 0:return n=Bh,[4,Dl(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(lf(t),e)}function _p(t,e,n){var r=n.docs.get(e._key),i=new mp(t);return new Zf(t,i,e._key,r,new Wf(n.hasPendingWrites,n.fromCache),e.converter)}var Tp=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return(0,s.ZT)(e,t),e.prototype.get=function(e){var n=this,r=vp(e,this._firestore),i=new mp(this._firestore);return t.prototype.get.call(this,e).then((function(t){return new Zf(n._firestore,i,r._key,t._document,new Wf(!1,!1),r.converter)}))},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=Sf(t)}return t.prototype.get=function(t){var e=this,n=vp(t,this._firestore),r=new dp(this._firestore);return this._transaction.lookup([n._key]).then((function(t){if(!t||1!==t.length)return Gr();var i=t[0];if(i.isFoundDocument())return new Hf(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Hf(e._firestore,r,n._key,null,n.converter);throw Gr()}))},t.prototype.set=function(t,e,n){var r=vp(t,this._firestore),i=pp(r.converter,e,n),o=kf(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,a=vp(t,this._firestore);return o="string"==typeof(e=(0,v.m9)(e))||e instanceof gf?Pf(this._dataReader,"Transaction.update",a._key,e,n,r):xf(this._dataReader,"Transaction.update",a._key,e),this._transaction.update(a._key,o),this},t.prototype.delete=function(t){var e=vp(t,this._firestore);return this._transaction.delete(e._key),this},t}());function Ep(){if("undefined"==typeof Uint8Array)throw new Mr(Lr.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Sp(){if("undefined"==typeof atob)throw new Mr(Lr.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var kp=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return Sp(),new t(vf.fromBase64String(e))},t.fromUint8Array=function(e){return Ep(),new t(vf.fromUint8Array(e))},t.prototype.toBase64=function(){return Sp(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return Ep(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),Ap=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){df(t=Xl(t,hf));var n=lf(t),r=t._freezeSettings(),i=new bl;return pf(n,i,new ml(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){df(t=Xl(t,hf));var e=lf(t),n=t._freezeSettings(),r=new bl;return pf(e,r,new yl(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new Mr(Lr.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new Os;return t._queue.enqueueAndForgetEvenWhileRestricted((function(){return(0,s.mG)(e,void 0,void 0,(function(){var e;return(0,s.Jh)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return(0,s.mG)(this,void 0,void 0,(function(){var e;return(0,s.Jh)(this,(function(n){switch(n.label){case 0:return Rs.yt()?(e=t+"main",[4,Rs.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(Gu(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t._delegate)},t}(),Np=function(){function t(t,e,n){var r=this;this._delegate=e,this.Zc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof Ml||(this.tu=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){var e=this._delegate._getSettings();t.merge||e.host===t.host||qr("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){var i;void 0===r&&(r={});var o=(t=Xl(t,$l))._getSettings();if("firestore.googleapis.com"!==o.host&&o.host!==e&&qr("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},o),{host:e+":"+n,ssl:!1})),r.mockUserToken){var a,s;if("string"==typeof r.mockUserToken)a=r.mockUserToken,s=wc.MOCK_USER;else{a=(0,v.Sg)(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);var u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new Mr(Lr.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");s=new wc(u)}t._credentials=new Vl(new Fl(a,s))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return(0,s.mG)(e,void 0,void 0,(function(){var e,n;return(0,s.Jh)(this,(function(r){switch(r.label){case 0:return[4,Nl(t)];case 1:return e=r.sent(),[4,Cl(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=Hr(t);return e.Or.delete(0),zc(e)}(n))]}}))}))}))}(lf(Xl(this._delegate,hf)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return(0,s.mG)(e,void 0,void 0,(function(){var e,n;return(0,s.Jh)(this,(function(r){switch(r.label){case 0:return[4,Nl(t)];case 1:return e=r.sent(),[4,Cl(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return(0,s.mG)(this,void 0,void 0,(function(){var e;return(0,s.Jh)(this,(function(n){switch(n.label){case 0:return(e=Hr(t)).Or.add(0),[4,Jc(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(lf(Xl(this._delegate,hf)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&zl("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new Os;return t.asyncQueue.enqueueAndForget((function(){return(0,s.mG)(e,void 0,void 0,(function(){var e;return(0,s.Jh)(this,(function(r){switch(r.label){case 0:return e=Wh,[4,Dl(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(lf(Xl(this._delegate,hf)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new wl(e);return t.asyncQueue.enqueueAndForget((function(){return(0,s.mG)(n,void 0,void 0,(function(){var e;return(0,s.Jh)(this,(function(n){switch(n.label){case 0:return e=function(t,e){Hr(t).Gr.add(e),e.next()},[4,Rl(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.Wo(),t.asyncQueue.enqueueAndForget((function(){return(0,s.mG)(n,void 0,void 0,(function(){var e;return(0,s.Jh)(this,(function(n){switch(n.label){case 0:return e=function(t,e){Hr(t).Gr.delete(e)},[4,Rl(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(lf(t=Xl(t,hf)),cf(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.tu)throw new Mr(Lr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new Bp(this,rf(this._delegate,t))}catch(t){throw Pp(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new xp(this,of(this._delegate,t))}catch(t){throw Pp(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new Up(this,function(t,e){if(t=Xl(t,$l),Kl("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Mr(Lr.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new ef(t,null,function(t){return new no(ri.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw Pp(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new Os;return t.asyncQueue.enqueueAndForget((function(){return(0,s.mG)(n,void 0,void 0,(function(){var n;return(0,s.Jh)(this,(function(i){switch(i.label){case 0:return[4,function(t){return Al(t).then((function(t){return t.datastore}))}(t)];case 1:return n=i.sent(),new _l(t.asyncQueue,n,e,r).run(),[2]}}))}))})),r.promise}(lf(t),(function(n){return e(new Tp(t,n))}))}(this._delegate,(function(n){return t(new Cp(e,n))}))},t.prototype.batch=function(){var t=this;return lf(this._delegate),new Dp(new gp(this._delegate,(function(e){return Ip(t._delegate,e)})))},t.prototype.loadBundle=function(t){throw new Mr(Lr.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new Mr(Lr.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),Op=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,s.ZT)(e,t),e.prototype.convertBytes=function(t){return new kp(new vf(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return xp.eu(e,this.firestore,null)},e}(fp);var Cp=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new Op(t)}return t.prototype.get=function(t){var e=this,n=Gp(t);return this._delegate.get(n).then((function(t){return new jp(e._firestore,new Zf(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))}))},t.prototype.set=function(t,e,n){var r=Gp(t);return n?(Hl("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=Gp(t);return 2===arguments.length?this._delegate.update(a,e):(r=this._delegate).update.apply(r,(0,s.ev)([a,e,n],i)),this},t.prototype.delete=function(t){var e=Gp(t);return this._delegate.delete(e),this},t}(),Dp=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=Gp(t);return n?(Hl("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=Gp(t);return 2===arguments.length?this._delegate.update(a,e):(r=this._delegate).update.apply(r,(0,s.ev)([a,e,n],i)),this},t.prototype.delete=function(t){var e=Gp(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),Rp=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new Xf(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new Fp(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.nu=function(e,n){var r=t.su,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new Op(e),n),i.set(n,o)),o},t}();Rp.su=new WeakMap;var xp=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Op(t)}return t.iu=function(e,n,r){if(e.length%2!=0)throw new Mr(Lr.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new tf(n._delegate,r,new yi(e)))},t.eu=function(e,n,r){return new t(n,new tf(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Bp(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new Bp(this.firestore,rf(this._delegate,t))}catch(t){throw Pp(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=(0,v.m9)(t))instanceof tf&&af(this._delegate,t)},t.prototype.set=function(t,e){e=Hl("DocumentReference.set",e);try{return e?yp(this._delegate,t,e):yp(this._delegate,t)}catch(t){throw Pp(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?bp(this._delegate,t):bp.apply(void 0,(0,s.ev)([this._delegate,t,e],n))}catch(t){throw Pp(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return Ip(Xl((t=this._delegate).firestore,hf),[new Yo(t._key,jo.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Lp(e),i=Mp(e,(function(e){return new jp(t.firestore,new Zf(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}));return wp(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Xl(t,tf);var e=Xl(t.firestore,hf),n=lf(e),r=new mp(e);return function(t,e){var n=this,r=new Os;return t.asyncQueue.enqueueAndForget((function(){return(0,s.mG)(n,void 0,void 0,(function(){var n;return(0,s.Jh)(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return(0,s.mG)(this,void 0,void 0,(function(){var r,i;return(0,s.Jh)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=Hr(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Mn.mn(t,e)}))}(t,e)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new Mr(Lr.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=yh(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}}))}))},[4,Ol(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._key).then((function(n){return new Zf(e,r,t._key,n,new Wf(null!==n&&n.hasLocalMutations,!0),t.converter)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Xl(t,tf);var e=Xl(t.firestore,hf);return xl(lf(e),t._key,{source:"server"}).then((function(n){return _p(e,t,n)}))}(this._delegate):function(t){t=Xl(t,tf);var e=Xl(t.firestore,hf);return xl(lf(e),t._key).then((function(n){return _p(e,t,n)}))}(this._delegate)).then((function(t){return new jp(e.firestore,new Zf(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}))},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(Rp.nu(this.firestore,e)):this._delegate.withConverter(null))},t}();function Pp(t,e,n){return t.message=t.message.replace(e,n),t}function Lp(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!cf(r))return r}return{}}function Mp(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=cf(t[0])?t[0]:cf(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var jp=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new xp(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return $f(this._delegate,t._delegate)},t}(),Fp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,s.ZT)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(jp),Up=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Op(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,np(this._delegate,function(t,e,n){var r=e,i=Jf("where",t);return new rp(i,r,n)}(e,n,r)))}catch(e){throw Pp(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,np(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=Jf("orderBy",t);return new ip(r,n)}(e,n)))}catch(e){throw Pp(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,np(this._delegate,function(t){return Ql("limit",t),new op("limit",t,"F")}(e)))}catch(e){throw Pp(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,np(this._delegate,function(t){return Ql("limitToLast",t),new op("limitToLast",t,"L")}(e)))}catch(e){throw Pp(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,np(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new ap("startAt",t,!0)}.apply(void 0,e)))}catch(e){throw Pp(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,np(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new ap("startAfter",t,!1)}.apply(void 0,e)))}catch(e){throw Pp(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,np(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new sp("endBefore",t,!0)}.apply(void 0,e)))}catch(e){throw Pp(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,np(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new sp("endAt",t,!1)}.apply(void 0,e)))}catch(e){throw Pp(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return sf(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Xl(t,ef);var e=Xl(t.firestore,hf),n=lf(e),r=new mp(e);return function(t,e){var n=this,r=new Os;return t.asyncQueue.enqueueAndForget((function(){return(0,s.mG)(n,void 0,void 0,(function(){var n;return(0,s.Jh)(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return(0,s.mG)(this,void 0,void 0,(function(){var r,i,o,a,u;return(0,s.Jh)(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,ic(t,e,!0)];case 1:return u=s.sent(),r=new Lh(e,u.Bn),i=r._o(u.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return a=s.sent(),u=yh(a,"Failed to execute query '"+e+" against cache"),n.reject(u),[3,3];case 3:return[2]}}))}))},[4,Ol(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._query).then((function(n){return new Qf(e,r,t,n)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Xl(t,ef);var e=Xl(t.firestore,hf),n=lf(e),r=new mp(e);return Pl(n,t._query,{source:"server"}).then((function(n){return new Qf(e,r,t,n)}))}(this._delegate):function(t){t=Xl(t,ef);var e=Xl(t.firestore,hf),n=lf(e),r=new mp(e);return tp(t._query),Pl(n,t._query).then((function(n){return new Qf(e,r,t,n)}))}(this._delegate)).then((function(t){return new qp(e.firestore,new Qf(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}))},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Lp(e),i=Mp(e,(function(e){return new qp(t.firestore,new Qf(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}));return wp(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(Rp.nu(this.firestore,e)):this._delegate.withConverter(null))},t}(),Vp=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new Fp(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),qp=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new Up(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map((function(e){return new Fp(t._firestore,e)}))},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map((function(t){return new Vp(e._firestore,t)}))},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach((function(r){t.call(e,new Fp(n._firestore,r))}))},t.prototype.isEqual=function(t){return $f(this._delegate,t._delegate)},t}(),Bp=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return(0,s.ZT)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new xp(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new xp(this.firestore,void 0===t?of(this._delegate):of(this._delegate,t))}catch(t){throw Pp(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=Xl(t.firestore,hf),r=of(t),i=pp(t.converter,e);return Ip(n,[kf(Sf(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,jo.exists(!1))]).then((function(){return r}))}(this._delegate,t).then((function(t){return new xp(e.firestore,t)}))},e.prototype.isEqual=function(t){return af(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(Rp.nu(this.firestore,t)):this._delegate.withConverter(null))},e}(Up);function Gp(t){return Xl(t,tf)}var Kp=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(gf.bind.apply(gf,(0,s.ev)([void 0],t)))}return t.documentId=function(){return new t(oi.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=(0,v.m9)(t))instanceof gf&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),Hp=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new Of("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new Af("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Cf("arrayUnion",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Df("arrayRemove",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new Rf("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}();var zp,Jp={Firestore:Np,GeoPoint:yf,Timestamp:Qr,Blob:kp,Transaction:Cp,WriteBatch:Dp,DocumentReference:xp,DocumentSnapshot:jp,Query:Up,QueryDocumentSnapshot:Fp,QuerySnapshot:qp,CollectionReference:Bp,FieldPath:Kp,FieldValue:Hp,setLogLevel:function(t){var e;e=t,jr.setLogLevel(e)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new u.wA("firestore",(function(t){return function(t,e){return new Np(t,new hf(t,e),new Ap)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},Jp)))})(zp=o.Z),zp.registerVersion("@firebase/firestore","2.4.1");var Wp="firebasestorage.googleapis.com",Zp=function(t){function e(n,r){var i=t.call(this,Xp(n),"Firebase Storage: "+r+" ("+Xp(n)+")")||this;return i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(i,e.prototype),i}return(0,s.ZT)(e,t),e.prototype._codeEquals=function(t){return Xp(t)===this.code},Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=this._baseMessage+"\n"+this.customData.serverResponse:this.message=this._baseMessage},enumerable:!1,configurable:!0}),e}(v.ZR);function Xp(t){return"storage/"+t}function Qp(){return new Zp("unknown","An unknown error occurred, please check the error payload for server response.")}function Yp(){return new Zp("canceled","User canceled the upload/download.")}function $p(){return new Zp("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function td(t){return new Zp("invalid-argument",t)}function ed(){return new Zp("app-deleted","The Firebase app was deleted.")}function nd(t){return new Zp("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function rd(t,e){return new Zp("invalid-format","String does not match format '"+t+"': "+e)}function id(t){throw new Zp("internal-error","Internal error: "+t)}var od={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},ad=function(t,e){this.data=t,this.contentType=e||null};function sd(t,e){switch(t){case od.RAW:return new ad(ud(e));case od.BASE64:case od.BASE64URL:return new ad(cd(t,e));case od.DATA_URL:return new ad(function(t){var e=new hd(t);return e.base64?cd(od.BASE64,e.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(zp){throw rd(od.DATA_URL,"Malformed data URL.")}return ud(e)}(e.rest)}(e),new hd(e).contentType)}throw Qp()}function ud(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<t.length-1&&56320===(64512&t.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else e.push(239,191,189);else 56320===(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function cd(t,e){switch(t){case od.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw rd(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case od.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw rd(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var a;try{a=atob(e)}catch(zp){throw rd(t,"Invalid character found")}for(var s=new Uint8Array(a.length),u=0;u<a.length;u++)s[u]=a.charCodeAt(u);return s}var hd=function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw rd(od.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n=e[1]||null;null!=n&&(this.base64=(r=n,i=";base64",r.length>=i.length&&r.substring(r.length-i.length)===i),this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=t.substring(t.indexOf(",")+1);var r,i};var ld,fd={STATE_CHANGED:"state_changed"},pd={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function dd(t){switch(t){case"running":case"pausing":case"canceling":return pd.RUNNING;case"paused":return pd.PAUSED;case"success":return pd.SUCCESS;case"canceled":return pd.CANCELED;default:return pd.ERROR}}!function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"}(ld||(ld={}));var gd=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=ld.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=ld.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=ld.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw id("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw id("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw id("cannot .getStatus() before sending");try{return this.xhr_.status}catch(zp){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw id("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},t}();var vd=function(){function t(){}return t.prototype.createConnection=function(){return new gd},t}(),md=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e,n){var r;try{r=t.makeFromUrl(e,n)}catch(zp){return new t(e,"")}if(""===r.path)return r;throw new Zp("invalid-default-bucket","Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var o=new RegExp("^gs://"+i+"(/(.*))?$","i");function a(t){t.path_=decodeURIComponent(t.path)}for(var s=n.replace(/[.]/g,"\\."),u=[{regex:o,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+s+"/v[A-Za-z0-9_]+/b/"+i+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:a},{regex:new RegExp("^https?://"+(n===Wp?"(?:storage.googleapis.com|storage.cloud.google.com)":n)+"/"+i+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:a}],c=0;c<u.length;c++){var h=u[c],l=h.regex.exec(e);if(l){var f=l[h.indices.bucket],p=l[h.indices.path];p||(p=""),r=new t(f,p),h.postModify(r);break}}if(null==r)throw function(t){return new Zp("invalid-url","Invalid URL '"+t+"'.")}(e);return r},t}(),yd=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}();function bd(t){return"string"===typeof t||t instanceof String}function wd(t){return Id()&&t instanceof Blob}function Id(){return"undefined"!==typeof Blob}function _d(t,e,n,r){if(r<e)throw td("Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw td("Invalid value for '"+t+"'. Expected "+n+" or less.")}function Td(t,e){var n=e.match(/^(\w+):\/\/.+/),r=e;return null==(null===n||void 0===n?void 0:n[1])&&(r="https://"+e),r+"/v0"+t}function Ed(t){var e=encodeURIComponent,n="?";for(var r in t){if(t.hasOwnProperty(r))n=n+(e(r)+"="+e(t[r]))+"&"}return n=n.slice(0,-1)}var Sd=function(){function t(t,e,n,r,i,o,a,s,u,c,h){var l=this;this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=a,this.errorCallback_=s,this.progressCallback_=c,this.timeout_=u,this.pool_=h,this.promise_=new Promise((function(t,e){l.resolve_=t,l.reject_=e,l.start_()}))}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,a=n.connection;if(n.wasSuccessCode)try{var s=t.callback_(a,a.getResponseText());!function(t){return void 0!==t}(s)?i():i(s)}catch(zp){o(zp)}else null!==a?((r=Qp()).serverResponse=a.getResponseText(),t.errorCallback_?o(t.errorCallback_(a,r)):o(r)):n.canceled?o(r=t.appDelete_?ed():Yp()):o(r=new Zp("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new kd(!1,null,!0)):this.backoffId_=function(t,e,n){var r=1,i=null,o=!1,a=0;function u(){return 2===a}var c=!1;function h(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];c||(c=!0,e.apply(null,t))}function l(e){i=setTimeout((function(){i=null,t(f,u())}),e)}function f(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!c)if(t)h.call.apply(h,(0,s.ev)([null,t],e));else{var i;u()||o?h.call.apply(h,(0,s.ev)([null,t],e)):(r<64&&(r*=2),1===a?(a=2,i=0):i=1e3*(r+Math.random()),l(i))}}var p=!1;function d(t){p||(p=!0,c||(null!==i?(t||(a=2),clearTimeout(i),l(0)):t||(a=1)))}return l(0),setTimeout((function(){o=!0,d(!0)}),n),d}((function(e,n){if(n)e(!1,new kd(!1,null,!0));else{var r=t.pool_.createConnection();t.pendingConnection_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then((function(){null!==t.progressCallback_&&r.removeUploadProgressListener(i),t.pendingConnection_=null;var n=r.getErrorCode()===ld.NO_ERROR,o=r.getStatus();if(n&&!t.isRetryStatusCode_(o)){var a=-1!==t.successCodes_.indexOf(o);e(!0,new kd(a,r))}else{var s=r.getErrorCode()===ld.ABORT;e(!1,new kd(!1,null,s))}}))}function i(e){var n=e.loaded,r=e.lengthComputable?e.total:-1;null!==t.progressCallback_&&t.progressCallback_(n,r)}}),e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function(t){t(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),kd=function(t,e,n){this.wasSuccessCode=t,this.connection=e,this.canceled=!!n};function Ad(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Nd(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Ad();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(Id())return new Blob(t);throw new Zp("unsupported-environment","This browser doesn't seem to support creating Blobs")}var Od=function(){function t(t,e){var n=0,r="";wd(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(wd(this.data_)){var r=function(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}(this.data_,e,n);return null===r?null:new t(r)}return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(Id()){var r=e.map((function(e){return e instanceof t?e.data_:e}));return new t(Nd.apply(null,r))}var i=e.map((function(t){return bd(t)?sd(od.RAW,t).data:t.data_})),o=0;i.forEach((function(t){o+=t.byteLength}));var a=new Uint8Array(o),s=0;return i.forEach((function(t){for(var e=0;e<t.length;e++)a[s++]=t[e]})),new t(a,!0)},t.prototype.uploadData=function(){return this.data_},t}();function Cd(t){var e;try{e=JSON.parse(t)}catch(zp){return null}return function(t){return"object"===typeof t&&!Array.isArray(t)}(e)?e:null}function Dd(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function Rd(t,e){return e}var xd=function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||Rd},Pd=null;function Ld(){if(Pd)return Pd;var t=[];t.push(new xd("bucket")),t.push(new xd("generation")),t.push(new xd("metageneration")),t.push(new xd("name","fullPath",!0));var e=new xd("name");e.xform=function(t,e){return function(t){return!bd(t)||t.length<2?t:Dd(t)}(e)},t.push(e);var n=new xd("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new xd("timeCreated")),t.push(new xd("updated")),t.push(new xd("md5Hash",null,!0)),t.push(new xd("cacheControl",null,!0)),t.push(new xd("contentDisposition",null,!0)),t.push(new xd("contentEncoding",null,!0)),t.push(new xd("contentLanguage",null,!0)),t.push(new xd("contentType",null,!0)),t.push(new xd("metadata","customMetadata",!0)),Pd=t}function Md(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var a=n[o];r[a.local]=a.xform(r,e[a.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=t.bucket,r=t.fullPath,i=new md(n,r);return e._makeStorageReference(i)}})}(r,t),r}function jd(t,e,n){var r=Cd(e);return null===r?null:Md(t,r,n)}function Fd(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}function Ud(t,e,n){var r=Cd(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var a=o[i].replace(/\/$/,""),s=t._makeStorageReference(new md(e,a));r.prefixes.push(s)}if(n.items)for(var u=0,c=n.items;u<c.length;u++){var h=c[u];s=t._makeStorageReference(new md(e,h.name)),r.items.push(s)}return r}(t,e,r)}var Vd=function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function qd(t){if(!t)throw Qp()}function Bd(t,e){return function(n,r){var i=jd(t,r,e);return qd(null!==i),i}}function Gd(t,e){return function(n,r){var i=jd(t,r,e);return qd(null!==i),function(t,e,n){var r=Cd(e);if(null===r)return null;if(!bd(r.downloadTokens))return null;var i=r.downloadTokens;if(0===i.length)return null;var o=encodeURIComponent;return i.split(",").map((function(e){var r=t.bucket,i=t.fullPath;return Td("/b/"+o(r)+"/o/"+o(i),n)+Ed({alt:"media",token:e})}))[0]}(i,r,t.host)}}function Kd(t){return function(e,n){var r,i,o;return 401===e.getStatus()?r=e.getResponseText().includes("Firebase App Check token is invalid")?new Zp("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new Zp("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?(o=t.bucket,r=new Zp("quota-exceeded","Quota for bucket '"+o+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===e.getStatus()?(i=t.path,r=new Zp("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.serverResponse=n.serverResponse,r}}function Hd(t){var e=Kd(t);return function(n,r){var i,o=e(n,r);return 404===n.getStatus()&&(i=t.path,o=new Zp("object-not-found","Object '"+i+"' does not exist.")),o.serverResponse=r.serverResponse,o}}function zd(t,e,n){var r=Td(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new Vd(r,"GET",Bd(t,n),i);return o.errorHandler=Hd(e),o}function Jd(t,e,n,r,i){var o={};e.isRoot?o.prefix="":o.prefix=e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var a=Td(e.bucketOnlyServerUrl(),t.host),s=t.maxOperationRetryTime,u=new Vd(a,"GET",function(t,e){return function(n,r){var i=Ud(t,e,r);return qd(null!==i),i}}(t,e.bucket),s);return u.urlParams=o,u.errorHandler=Kd(e),u}function Wd(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}var Zd=function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null};function Xd(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(zp){qd(!1)}return qd(!!n&&-1!==(e||["active"]).indexOf(n)),n}var Qd=262144;function Yd(t,e,n,r,i,o,a,s){var u=new Zd(0,0);if(a?(u.current=a.current,u.total=a.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new Zp("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,h=c;i>0&&(h=Math.min(h,i));var l=u.current,f=l+h,p={"X-Goog-Upload-Command":h===c?"upload, finalize":"upload","X-Goog-Upload-Offset":""+u.current},d=r.slice(l,f);if(null===d)throw $p();var g=e.maxUploadRetryTime,v=new Vd(n,"POST",(function(t,n){var i,a=Xd(t,["active","final"]),s=u.current+h,c=r.size();return i="final"===a?Bd(e,o)(t,n):null,new Zd(s,c,"final"===a,i)}),g);return v.headers=p,v.body=d.uploadData(),v.progressCallback=s||null,v.errorHandler=Kd(t),v}var $d=function(t,e,n){var r=function(t){return"function"===typeof t}(t)||null!=e||null!=n;if(r)this.next=t,this.error=e,this.complete=n;else{var i=t;this.next=i.next,this.error=i.error,this.complete=i.complete}};function tg(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then((function(){return t.apply(void 0,e)}))}}var eg=function(){function t(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=Ld(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition("error"))},this._metadataErrorHandler=function(t){r._request=void 0,t._codeEquals("canceled")?r.completeTransitions_():(r._error=t,r._transition("error"))},this._promise=new Promise((function(t,e){r._resolve=t,r._reject=e,r._start()})),this._promise.then(null,(function(){}))}return t.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},t.prototype._shouldDoResumable=function(t){return t.size()>262144},t.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},t.prototype._resolveToken=function(t){var e=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=n[0],i=n[1];switch(e._state){case"running":t(r,i);break;case"canceling":e._transition("canceled");break;case"pausing":e._transition("paused")}}))},t.prototype._createResumable=function(){var t=this;this._resolveToken((function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a=Wd(e,r,i),s={name:a.fullPath},u=Td(o,t.host),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":""+r.size(),"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},h=Fd(a,n),l=t.maxUploadRetryTime,f=new Vd(u,"POST",(function(t){var e;Xd(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(zp){qd(!1)}return qd(bd(e)),e}),l);return f.urlParams=s,f.headers=c,f.body=h,f.errorHandler=Kd(e),f}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then((function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()}),t._errorHandler)}))},t.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken((function(n,r){var i=function(t,e,n,r){var i=t.maxUploadRetryTime,o=new Vd(n,"POST",(function(t){var e=Xd(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(zp){qd(!1)}n||qd(!1);var i=Number(n);return qd(!isNaN(i)),new Zd(i,r.size(),"final"===e)}),i);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=Kd(e),o}(t._ref.storage,t._ref._location,e,t._blob),o=t._ref.storage._makeRequest(i,n,r);t._request=o,o.getPromise().then((function(e){e=e,t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()}),t._errorHandler)}))},t.prototype._continueUpload=function(){var t=this,e=Qd*this._chunkMultiplier,n=new Zd(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,o){var a;try{a=Yd(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(zp){return t._error=zp,void t._transition("error")}var s=t._ref.storage._makeRequest(a,i,o);t._request=s,s.getPromise().then((function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition("success")):t.completeTransitions_()}),t._errorHandler)}))},t.prototype._increaseMultiplier=function(){Qd*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},t.prototype._fetchMetadata=function(){var t=this;this._resolveToken((function(e,n){var r=zd(t._ref.storage,t._ref._location,t._mappings),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._transition("success")}),t._metadataErrorHandler)}))},t.prototype._oneShotUpload=function(){var t=this;this._resolveToken((function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"},s=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();a["Content-Type"]="multipart/related; boundary="+s;var u=Wd(e,r,i),c="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Fd(u,n)+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",h="\r\n--"+s+"--",l=Od.getBlob(c,r,h);if(null===l)throw $p();var f={name:u.fullPath},p=Td(o,t.host),d=t.maxUploadRetryTime,g=new Vd(p,"POST",Bd(t,n),d);return g.urlParams=f,g.headers=a,g.body=l.uploadData(),g.errorHandler=Kd(e),g}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition("success")}),t._errorHandler)}))},t.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},t.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":var e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=t,this._notifyObservers();break;case"canceled":this._error=Yp(),this._state=t,this._notifyObservers()}},t.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=dd(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var i=this,o=new $d(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},t.prototype.then=function(t,e){return this._promise.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},t.prototype._removeObserver=function(t){var e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)},t.prototype._notifyObservers=function(){var t=this;this._finishPromise(),this._observers.slice().forEach((function(e){t._notifyObserver(e)}))},t.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(dd(this._state)){case pd.SUCCESS:tg(this._resolve.bind(null,this.snapshot))();break;case pd.CANCELED:case pd.ERROR:tg(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},t.prototype._notifyObserver=function(t){switch(dd(this._state)){case pd.RUNNING:case pd.PAUSED:t.next&&tg(t.next.bind(t,this.snapshot))();break;case pd.SUCCESS:t.complete&&tg(t.complete.bind(t))();break;default:t.error&&tg(t.error.bind(t,this._error))()}},t.prototype.resume=function(){var t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t},t.prototype.pause=function(){var t="running"===this._state;return t&&this._transition("pausing"),t},t.prototype.cancel=function(){var t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t},t}(),ng=function(){function t(t,e){this._service=t,this._location=e instanceof md?e:md.makeFromUrl(e,t.host)}return t.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},t.prototype._newRef=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"root",{get:function(){var t=new md(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return Dd(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;var n=new md(this._location.bucket,e);return new t(this._service,n)},enumerable:!1,configurable:!0}),t.prototype._throwIfRoot=function(t){if(""===this._location.path)throw nd(t)},t}();function rg(t){var e={prefixes:[],items:[]};return ig(t,e).then((function(){return e}))}function ig(t,e,n){return(0,s.mG)(this,void 0,void 0,(function(){var r,i,o;return(0,s.Jh)(this,(function(a){switch(a.label){case 0:return[4,og(t,{pageToken:n})];case 1:return r=a.sent(),(i=e.prefixes).push.apply(i,r.prefixes),(o=e.items).push.apply(o,r.items),null==r.nextPageToken?[3,3]:[4,ig(t,e,r.nextPageToken)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))}function og(t,e){return(0,s.mG)(this,void 0,void 0,(function(){var n,r;return(0,s.Jh)(this,(function(i){switch(i.label){case 0:return null!=e&&"number"===typeof e.maxResults&&_d("options.maxResults",1,1e3,e.maxResults),n=e||{},r=Jd(t.storage,t._location,"/",n.pageToken,n.maxResults),[4,t.storage.makeRequestWithTokens(r)];case 1:return[2,i.sent().getPromise()]}}))}))}function ag(t,e){return(0,s.mG)(this,void 0,void 0,(function(){var n;return(0,s.Jh)(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("updateMetadata"),n=function(t,e,n,r){var i=Td(e.fullServerUrl(),t.host),o=Fd(n,r),a=t.maxOperationRetryTime,s=new Vd(i,"PATCH",Bd(t,r),a);return s.headers={"Content-Type":"application/json; charset=utf-8"},s.body=o,s.errorHandler=Hd(e),s}(t.storage,t._location,e,Ld()),[4,t.storage.makeRequestWithTokens(n)];case 1:return[2,r.sent().getPromise()]}}))}))}function sg(t){return(0,s.mG)(this,void 0,void 0,(function(){var e;return(0,s.Jh)(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("getDownloadURL"),e=function(t,e,n){var r=Td(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new Vd(r,"GET",Gd(t,n),i);return o.errorHandler=Hd(e),o}(t.storage,t._location,Ld()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise().then((function(t){if(null===t)throw new Zp("no-download-url","The given file does not have any download URLs.");return t}))]}}))}))}function ug(t){return(0,s.mG)(this,void 0,void 0,(function(){var e;return(0,s.Jh)(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("deleteObject"),e=function(t,e){var n=Td(e.fullServerUrl(),t.host),r=t.maxOperationRetryTime,i=new Vd(n,"DELETE",(function(t,e){}),r);return i.successCodes=[200,204],i.errorHandler=Hd(e),i}(t.storage,t._location),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}}))}))}function cg(t,e){var n=function(t,e){var n=e.split("/").filter((function(t){return t.length>0})).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new md(t._location.bucket,n);return new ng(t.storage,r)}function hg(t){return/^[A-Za-z]+:\/\//.test(t)}function lg(t,e){if(t instanceof dg){var n=t;if(null==n._bucket)throw new Zp("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new ng(n,n._bucket);return null!=e?lg(r,e):r}return void 0!==e?cg(t,e):t}function fg(t,e){if(e&&hg(e)){if(t instanceof dg)return new ng(t,e);throw td("To use ref(service, url), the first argument must be a Storage instance.")}return lg(t,e)}function pg(t,e){var n=null===e||void 0===e?void 0:e.storageBucket;return null==n?null:md.makeFromBucketSpec(n,t)}var dg=function(){function t(t,e,n,r,i,o){this.app=t,this._authProvider=e,this._appCheckProvider=n,this._pool=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=Wp,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?md.makeFromBucketSpec(i,this._host):pg(this._host,this.app.options)}return Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){this._host=t,null!=this._url?this._bucket=md.makeFromBucketSpec(this._url,t):this._bucket=pg(t,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){_d("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){_d("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),t.prototype._getAuthToken=function(){return(0,s.mG)(this,void 0,void 0,(function(){var t,e;return(0,s.Jh)(this,(function(n){switch(n.label){case 0:return this._overrideAuthToken?[2,this._overrideAuthToken]:(t=this._authProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}}))}))},t.prototype._getAppCheckToken=function(){return(0,s.mG)(this,void 0,void 0,(function(){var t;return(0,s.Jh)(this,(function(e){switch(e.label){case 0:return(t=this._appCheckProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:return[2,e.sent().token];case 2:return[2,null]}}))}))},t.prototype._delete=function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(t){return t.cancel()})),this._requests.clear()),Promise.resolve()},t.prototype._makeStorageReference=function(t){return new ng(this,t)},t.prototype._makeRequest=function(t,e,n){var r=this;if(this._deleted)return new yd(ed());var i=function(t,e,n,r,i,o){var a=Ed(t.urlParams),s=t.url+a,u=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(u,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(u,n),function(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(null!==e&&void 0!==e?e:"AppManager")}(u,o),function(t,e){null!==e&&(t["X-Firebase-AppCheck"]=e)}(u,r),new Sd(s,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i)}(t,this._appId,e,n,this._pool,this._firebaseVersion);return this._requests.add(i),i.getPromise().then((function(){return r._requests.delete(i)}),(function(){return r._requests.delete(i)})),i},t.prototype.makeRequestWithTokens=function(t){return(0,s.mG)(this,void 0,void 0,(function(){var e,n,r;return(0,s.Jh)(this,(function(i){switch(i.label){case 0:return[4,Promise.all([this._getAuthToken(),this._getAppCheckToken()])];case 1:return e=i.sent(),n=e[0],r=e[1],[2,this._makeRequest(t,n,r)]}}))}))},t}();function gg(t,e,n){return function(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new eg(t,new Od(e),n)}(t=(0,v.m9)(t),e,n)}function vg(t){return function(t){return(0,s.mG)(this,void 0,void 0,(function(){var e;return(0,s.Jh)(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("getMetadata"),e=zd(t.storage,t._location,Ld()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}}))}))}(t=(0,v.m9)(t))}function mg(t,e){return fg(t=(0,v.m9)(t),e)}function yg(t,e,n,r){void 0===r&&(r={}),function(t,e,n,r){void 0===r&&(r={}),t.host="http://"+e+":"+n;var i=r.mockUserToken;i&&(t._overrideAuthToken="string"===typeof i?i:(0,v.Sg)(i,t.app.options.projectId))}(t,e,n,r)}var bg=function(){function t(t,e,n){this._delegate=t,this.task=e,this.ref=n}return Object.defineProperty(t.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),t}(),wg=function(){function t(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(t.prototype,"snapshot",{get:function(){return new bg(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),t.prototype.then=function(t,e){var n=this;return this._delegate.then((function(e){if(t)return t(new bg(e,n,n._ref))}),e)},t.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"===typeof e?function(t){return e(new bg(t,i,i._ref))}:{next:e.next?function(t){return e.next(new bg(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},t}(),Ig=function(){function t(t,e){this._delegate=t,this._service=e}return Object.defineProperty(t.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map((function(e){return new _g(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){var t=this;return this._delegate.items.map((function(e){return new _g(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),t}(),_g=function(){function t(t,e){this._delegate=t,this.storage=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this._delegate.toString()},t.prototype.child=function(e){var n=function(t,e){return cg(t,e)}(this._delegate,e);return new t(n,this.storage)},Object.defineProperty(t.prototype,"root",{get:function(){return new t(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return this._throwIfRoot("put"),new wg(gg(this._delegate,t,e),this)},t.prototype.putString=function(t,e,n){void 0===e&&(e=od.RAW),this._throwIfRoot("putString");var r=sd(e,t),i=(0,s.pi)({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new wg(new eg(this._delegate,new Od(r.data,!0),i),this)},t.prototype.listAll=function(){var t=this;return function(t){return rg(t=(0,v.m9)(t))}(this._delegate).then((function(e){return new Ig(e,t.storage)}))},t.prototype.list=function(t){var e=this;return function(t,e){return og(t=(0,v.m9)(t),e)}(this._delegate,t||void 0).then((function(t){return new Ig(t,e.storage)}))},t.prototype.getMetadata=function(){return vg(this._delegate)},t.prototype.updateMetadata=function(t){return function(t,e){return ag(t=(0,v.m9)(t),e)}(this._delegate,t)},t.prototype.getDownloadURL=function(){return function(t){return sg(t=(0,v.m9)(t))}(this._delegate)},t.prototype.delete=function(){return this._throwIfRoot("delete"),function(t){return ug(t=(0,v.m9)(t))}(this._delegate)},t.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw nd(t)},t}(),Tg=function(){function t(t,e){this.app=t,this._delegate=e}return Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){if(hg(t))throw td("ref() expected a child path but got a URL, use refFromURL instead.");return new _g(mg(this._delegate,t),this)},t.prototype.refFromURL=function(t){if(!hg(t))throw td("refFromURL() expected a full URL but got a child path, use ref() instead.");try{md.makeFromUrl(t,this._delegate.host)}catch(zp){throw td("refFromUrl() expected a valid full URL but got an invalid one.")}return new _g(mg(this._delegate,t),this)},t.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},t.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),yg(this._delegate,t,e,n)},t}();function Eg(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),a=t.getProvider("app-check-internal");return new Tg(r,new dg(r,i,a,new vd,n,o.Z.SDK_VERSION))}!function(t){var e={TaskState:pd,TaskEvent:fd,StringFormat:od,Storage:dg,Reference:_g};t.INTERNAL.registerComponent(new u.wA("storage",Eg,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion("@firebase/storage","0.7.1")}(o.Z);var Sg,kg=n(23886);function Ag(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(c){return void n(c)}s.done?e(u):Promise.resolve(u).then(r,i)}function Ng(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){Ag(o,r,i,a,s,"next",t)}function s(t){Ag(o,r,i,a,s,"throw",t)}a(void 0)}))}}if(n(88317),!o.Z.apps.length){var Og=o.Z.initializeApp(kg.qe);Sg=Og.functions("europe-west3")}var Cg=o.Z.auth(),Dg=(new o.Z.auth.GoogleAuthProvider,o.Z.firestore()),Rg=(o.Z.firestore.FieldValue.serverTimestamp,o.Z.firestore.Timestamp.fromMillis,o.Z.firestore.FieldValue.increment,o.Z.storage(),o.Z.storage.TaskEvent.STATE_CHANGED,{});Rg=o.Z.analytics();!function(){var t=Ng(i().mark((function t(){var e;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=Sg.httpsCallable("getStats"),t.abrupt("return",e());case 2:case"end":return t.stop()}}),t)})))}();var xg=function(){var t=Ng(i().mark((function t(e){var n;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Sg.httpsCallable("getExhibit"),t.abrupt("return",n({publicId:e}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Pg=function(){var t=Ng(i().mark((function t(e){var n;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Sg.httpsCallable("getExhibitWithoutItems"),t.abrupt("return",n({publicId:e}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Lg=function(){return o.Z.firestore.Timestamp.now()},Mg=function(t,e){kg.yv&&Rg.logEvent(t,e)}},16181:function(t,e,n){"use strict";n.d(e,{S:function(){return r}});var r=(0,n(67294).createContext)({user:null,username:null})},30520:function(){},49320:function(){},34155:function(t){var e,n,r=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(t){if(e===setTimeout)return setTimeout(t,0);if((e===i||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(n){try{return e.call(null,t,0)}catch(n){return e.call(this,t,0)}}}!function(){try{e="function"===typeof setTimeout?setTimeout:i}catch(t){e=i}try{n="function"===typeof clearTimeout?clearTimeout:o}catch(t){n=o}}();var s,u=[],c=!1,h=-1;function l(){c&&s&&(c=!1,s.length?u=s.concat(u):h=-1,u.length&&f())}function f(){if(!c){var t=a(l);c=!0;for(var e=u.length;e;){for(s=u,u=[];++h<e;)s&&s[h].run();h=-1,e=u.length}s=null,c=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function d(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new p(t,e)),1!==u.length||c||a(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=d,r.addListener=d,r.once=d,r.off=d,r.removeListener=d,r.removeAllListeners=d,r.emit=d,r.prependListener=d,r.prependOnceListener=d,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},68718:function(t,e,n){"use strict";n.d(e,{Db:function(){return g},JP:function(){return f},OO:function(){return l},nI:function(){return d},zv:function(){return p}});var r=n(15671),i=n(43144),o=n(4942),a=n(67294);function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){(0,o.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var c,h={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0},l=a.createContext();function f(){return h}var p=function(){function t(){(0,r.Z)(this,t),this.usedNamespaces={}}return(0,i.Z)(t,[{key:"addUsedNamespaces",value:function(t){var e=this;t.forEach((function(t){e.usedNamespaces[t]||(e.usedNamespaces[t]=!0)}))}},{key:"getUsedNamespaces",value:function(){return Object.keys(this.usedNamespaces)}}]),t}();function d(){return c}var g={type:"3rdParty",init:function(t){!function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};h=u(u({},h),t)}(t.options.react),function(t){c=t}(t)}}},70655:function(t,e,n){"use strict";n.d(e,{CR:function(){return c},Jh:function(){return s},XA:function(){return u},ZT:function(){return i},ev:function(){return h},mG:function(){return a},pi:function(){return o}});var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)};function i(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},o.apply(this,arguments)};function a(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function s(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}Object.create;function u(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function h(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}Object.create},34078:function(t,e,n){var r,i,o;o=function(){function t(t){var e=[];if(0===t.length)return"";if("string"!==typeof t[0])throw new TypeError("Url must be a string. Received "+t[0]);if(t[0].match(/^[^/:]+:\/*$/)&&t.length>1){var n=t.shift();t[0]=n+t[0]}t[0].match(/^file:\/\/\//)?t[0]=t[0].replace(/^([^/:]+):\/*/,"$1:///"):t[0]=t[0].replace(/^([^/:]+):\/*/,"$1://");for(var r=0;r<t.length;r++){var i=t[r];if("string"!==typeof i)throw new TypeError("Url must be a string. Received "+i);""!==i&&(r>0&&(i=i.replace(/^[\/]+/,"")),i=r<t.length-1?i.replace(/[\/]+$/,""):i.replace(/[\/]+$/,"/"),e.push(i))}var o=e.join("/"),a=(o=o.replace(/\/(\?|&|#[^!])/g,"$1")).split("?");return o=a.shift()+(a.length>0?"?":"")+a.join("&")}return function(){return t("object"===typeof arguments[0]?arguments[0]:[].slice.call(arguments))}},t.exports?t.exports=o():void 0===(i="function"===typeof(r=o)?r.call(e,n,e,t):r)||(t.exports=i)},83878:function(t,e,n){"use strict";function r(t){if(Array.isArray(t))return t}n.d(e,{Z:function(){return r}})},15671:function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,{Z:function(){return r}})},43144:function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}n.d(e,{Z:function(){return i}})},4942:function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,{Z:function(){return r}})},25267:function(t,e,n){"use strict";function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(e,{Z:function(){return r}})},89611:function(t,e,n){"use strict";function r(t,e){return r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},r(t,e)}n.d(e,{Z:function(){return r}})},81563:function(t,e,n){"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function i(t,e){if(t){if("string"===typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}n.d(e,{Z:function(){return i}})}},function(t){var e=function(e){return t(t.s=e)};t.O(0,[9774,179],(function(){return e(6840),e(80880)}));var n=t.O();_N_E=n}]);